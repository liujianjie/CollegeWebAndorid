function getListener(e,t,n){var r;return t=t.toLowerCase(),(r=e.__allListeners||n&&(e.__allListeners={}))&&(r[t]||n&&(r[t]=[]))}function getDomNode(e,t,n,r,i,s){var o=r&&e[t],u;!o&&(o=e[n]);while(!o&&(u=(u||e).parentNode)){if(u.tagName=="BODY"||s&&!s(u))return null;o=u[n]}return o&&i&&!i(o)?getDomNode(o,t,n,!1,i):o}(function(e,t,n,r){e.switchable={Config:{panels:".panels > *",initIndex:0,effect:"none",loop:!1,onBeforeSwitch:null,onSwitch:null},Effects:{none:function(e,t){var n=this,r=n.panels;r.slice(e,e+1).hide(),r.slice(t,t+1).show()}},Plugins:[]};var i=function(n,r){var i=this,s=e(this),o="beforeSwitch",u="switch";e.extend(i,{_initPlugins:function(){var t=e.switchable.Plugins,n=t.length,r=0;for(;r<n;r++)e.isFunction(t[r].init)&&t[r].init(i)},_warn:function(e){t.console&&t.console.warn&&console.warn(e)},_init:function(){i.root=n,i.config=r;var t=e(n),a;if(t[0]._switchable)return;if(!t.find(r.panels).length){i._warn("No panel in switchable");return}i.panels=t.find(r.panels),i.length=i.panels.length;if(i.length<1){i._warn("No panel group in switchable");return}return e.isFunction(r.onBeforeSwitch)&&s.on(o,r.onBeforeSwitch),e.isFunction(r.onSwitch)&&s.on(u,r.onSwitch),i.index=(r.initIndex%i.length+i.length)%i.length,i._nextIndex=i.index,a=i.panels.slice(i.index,i.index+1),r.effect.toLowerCase()==="none"&&(i.panels.not(a).hide(),a.show()),t[0]._switchable=this,!0},_switchPanels:function(t,n){if(n===t)return;r.effect=r.effect.toLowerCase();if(!r.effect||!e.switchable.Effects[r.effect]){i._warn("No switch effect");return}e.switchable.Effects[r.effect].call(i,t,n)},switchTo:function(t){t%=i.length;if(t===i.index)return i;i._nextIndex=t;var n=e.Event(o);s.trigger(n,[t]);if(n.isDefaultPrevented())return;return i._switchPanels(i.index,t),i.index=t,n.type=u,s.trigger(n,[t]),i},willTo:function(){return i._nextIndex},destroy:function(){i._destroyPlugins(),i._destroy()},_destroyPlugins:function(){var t=e.switchable.Plugins,n=t.length,r=0;for(;r<n;r++)e.isFunction(t[r].destroy)&&t[r].destroy(i)},_destroy:function(){var t;delete e(n)[0]._switchable;for(t in i)delete i[t]}});if(!i._init())return e(n)[0]._switchable;i._initPlugins()};e.fn.switchable=function(t){var n=e(this),r=n.length,s=[],o;t=e.extend({},e.switchable.Config,t);for(o=0;o<r;o++)s[o]=new i(n.eq(o),t);return s[0]}})(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{duration:500,easing:"ease"}),e.switchable.Animate=function(t,n,s,o,u){var a=this,f={},l,c;e.switchable.Transition===r&&(e.switchable.Transition=i()),l=e.switchable.Transition,e.extend(a,{isAnimated:!1,run:function(){if(a.isAnimated)return;var r,i=[];for(r in n)i.push(r);if(l)f[l+"Property"]=i.join(", ")||"all",f[l+"Duration"]=s+"ms",f[l+"TimingFunction"]=o,t.css(e.extend(n,f)),c=setTimeout(function(){a._clearCss(),a._complete()},s);else{var u=/cubic-bezier\(([\s\d.,]+)\)/,h=o.match(u),p=e.switchable.TimingFn[o];if(p||h)o=e.switchable.Easing(h?h[1]:p.match(u)[1]);t.animate(n,s,o,function(){a._complete()})}return a.isAnimated=!0,a},stop:function(e){if(!a.isAnimated)return;return l?(clearTimeout(c),c=r,e&&(a._clearCss(),a._complete())):t.stop(!1,e),a.isAnimated=!1,a},_complete:function(){e.isFunction(u)&&u()},_clearCss:function(){f[l+"Property"]="none",t.css(f)}}),a.run()};var i=function(){var e=n.documentElement,t=["Webkit","Moz"],i="transition",s="",o;if(e.style[i]!==r)s=i;else for(o=0;o<2;o++)if(e.style[i=t[o]+"Transition"]!==r){s=i;break}return s}}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;var i=function(e){return"cubic-bezier("+e+")"},s=function(e){var t=[],n=101,r;for(r=0;r<=n;r++)t[r]=e.call(null,r/n);return function(e){if(e===1)return t[n];var r=n*e,i=Math.floor(r),s=t[i],o=t[i+1];return s+(o-s)*(r-i)}},o=function(e,t,n,r,i,s){function h(e){return((o*e+u)*e+a)*e}function p(e){return((f*e+l)*e+c)*e}function d(e){return(3*o*e+2*u)*e+a}function v(e){return 1/(200*e)}function m(e,t){return p(g(e,t))}function g(e,t){function a(e){return e>=0?e:0-e}var n,r,i,s,o,u;for(i=e,u=0;u<8;u++){s=h(i)-e;if(a(s)<t)return i;o=d(i);if(a(o)<1e-6)break;i-=s/o}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(a(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)*.5+n}return i}var o,u,a,f,l,c;return o=u=a=f=l=c=0,a=3*t,u=3*(r-t)-a,o=1-a-u,c=3*n,l=3*(i-n)-c,f=1-c-l,m(e,v(s))};e.switchable.TimingFn={ease:i(".25, .1, .25, 1"),linear:i("0, 0, 1, 1"),"ease-in":i(".42, 0, 1, 1"),"ease-out":i("0, 0, .58, 1"),"ease-in-out":i(".42, 0, .58, 1")},e.switchable.Easing=function(n){var r,u,a=0,f;n=n.split(","),u=n.length;for(;a<u;a++)n[a]=parseFloat(n[a]);return u!==4?t.console&&console.warn(i(n.join(", "))+" missing argument."):(r="cubic-bezier-"+n.join("-"),e.easing[r]||(f=s(function(e){return o(e,n[0],n[1],n[2],n[3],5)}),e.easing[r]=function(e){return f.call(null,e)})),r}}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.switchable.Effects.fade=function(t,n){var i=this,s=i.config,o=i.panels,u=o.slice(t,t+1),a=o.slice(n,n+1),f=function(){a.css({opacity:1})},l=function(){a.css({zIndex:i.length}),u.css({zIndex:1}),i._anim=r};i._anim&&i._anim.stop(!0),f(),i._anim=new e.switchable.Animate(u,{opacity:0},s.duration,s.easing,l)},e.switchable.Plugins.push({name:"fade effect",init:function(e){var t=e.config,n=e.panels,r=e.index,i=n.slice(r,r+1);t.effect.toLowerCase()==="fade"&&(n.css({position:"absolute",top:0,left:0}),n.not(i).css({opacity:0,zIndex:1}),i.css({opacity:1,zIndex:e.length}))},destroy:function(e){e._anim&&e._anim.stop(!0)}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;var i="position",s="absolute",o="relative";e.extend(e.switchable.Config,{horiz:!0}),e.switchable.Effects.scroll=function(t,n){var i=this,s=i.config,o=i._data,u=t===0&&n===o.max,a=(u||t===o.max&&n===0)&&i._circle,f={},l=function(){f[o.prop]=a?i._adjustPosition(u):-o.size*n},c=function(){a&&i._resetPosition(u),i._anim=r};i._anim&&i._anim.stop(!0),setTimeout(function(){l(),i._anim=new e.switchable.Animate(o.wrap,f,s.duration,s.easing,c)},0)},e.switchable.Plugins.push({name:"scroll effect",init:function(t){var n=t.config,u=t.panels,a=u.eq(0).outerWidth(!0),f=u.eq(0).outerHeight(!0),l={},c=t._data={wrap:u.parent(),max:t.length-1,prop:n.horiz?"left":"top",size:n.horiz?a:f};if(n.effect.toLowerCase()!=="scroll")return;n.loop,t.root.css(i)==="static"&&t.root.css(i,o),l[i]=s,l[c.prop]=-c.size*t.index,c.wrap.css(l).css("width",n.horiz?a*t.length:a),t.isHoriz=n.horiz,e.extend(t,{_adjustPosition:function(e){var n=e?c.max:0;return l[i]=o,l[c.prop]=(e?-1:1)*c.size*t.length,u.slice(n,n+1).css(l),e?c.size:-c.size*t.length},_resetPosition:function(e){var t=e?c.max:0;l[i]="",l[c.prop]="",u.slice(t,t+1).css(l),l[i]=r,l[c.prop]=e?-c.size*c.max:0,c.wrap.css(l)}})},destroy:function(e){e._anim&&e._anim.stop(!0)}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{autoplay:!1,interval:3e3,pauseOnHover:!0,isBackward:!1}),e.switchable.Plugins.push({name:"autoplay",init:function(t){var n=t.config,i=!1,s,o,u,a=function(){u=t.willTo();if(u===!1){t._cancelTimers();return}u===0&&!n.isBackward||u===t.length-1&&n.isBackward?t._circle=!0:t._circle=!1,t.switchTo(u)},f=function(){var e=n.duration||0;o=setInterval(function(){a()},n.interval+e)},l=function(e,r){if(!n.loop&&n.isBackward&&t.index===0)return;if(!n.loop&&!n.isBackward&&t.index===t.length-1)return;var i=1;n.isBackward&&(i=-1),t._nextIndex=(r+i+t.length)%t.length,t._circle=!1};if(!n.autoplay||t.length<=1)return;l(r,t.index),n.pauseOnHover&&t.panels.on("mouseenter.switchAutoplay",function(){t._pause()}).on("mouseleave.switchAutoplay",function(){i||t._play()}),e(t).on("switch",l),e.extend(t,{_play:function(){t._cancelTimers(),t.paused=!1,s=setTimeout(function(){a(),f()},n.interval)},_pause:function(){t._cancelTimers(),t.paused=!0},_cancelTimers:function(){s&&(clearTimeout(s),s=r),o&&(clearInterval(o),o=r)},play:function(){return t._play(),i=!1,t},pause:function(){return t._pause(),i=!0,t}}),t._play()},destroy:function(e){if(!e.config.autoplay||e.length<=1)return;e._pause(),e.panels.off(".switchAutoplay")}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{triggers:".trigger a",currentTrigger:"active",triggerType:"hover",delay:100}),e.switchable.Plugins.push({name:"trigger",init:function(t){var n=t.config,i=e(t.root),s,o,u=i.find(n.triggers).length;if(!u)return;while(u<t.length)i.find(n.triggers).slice(0,1).clone().insertAfter(i.find(n.triggers).last()),u=i.find(n.triggers).length;t.triggers=i.find(n.triggers).slice(0,t.length),t.triggers.removeClass(n.currentTrigger).eq(t.index).addClass(n.currentTrigger),t.triggers.on("click.switchTrigger",function(n){n.preventDefault(),s=e(this).index(),t._cancelDelayTimer(),t.switchTo(s)}),n.triggerType==="hover"&&t.triggers.on("mouseenter.switchTrigger",function(){s=e(this).index(),t._delayTimer=setTimeout(function(){t.switchTo(s)},n.delay)}).on("mouseleave.switchTrigger",function(){t._cancelDelayTimer()}),e(t).on("switch",function(e,n){t._switchTrigger(n)}),n.autoplay&&n.pauseOnHover&&t.triggers.on("mouseenter.switchTrigger",function(){o=t.paused,t._pause()}).on("mouseleave.switchTrigger",function(){o||t._play()}),e.extend(t,{_cancelDelayTimer:function(){t._delayTimer&&(clearTimeout(t._delayTimer),t._delayTimer=r)},_switchTrigger:function(e){t.triggers.removeClass(n.currentTrigger).eq(e).addClass(n.currentTrigger)}})},destroy:function(t){e(t.root).find(t.config.triggers).length&&(t.triggers.off("click.switchTrigger"),t.triggers.off(".switchTrigger"))}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{prev:".prev",next:".next",disabledClass:"disabled",respondinAnimating:!0}),e.switchable.Plugins.push({name:"carousel",init:function(t){var n=t.config,r=["prev","next"],i,s,o=0,u,a,f=function(e,r){if(!n.loop&&r&&e===0)return;if(!n.loop&&!r&&e===t.length-1)return;var i=1;r&&(i=-1),t._nextIndex=(e+i+t.length)%t.length};if(!e(t.root).find(n.prev).length&&!e(t.root).find(n.next).length)return;for(;o<2;o++){i=r[o],s=e(t.root).find(n[i]);if(!s.length)continue;t[i+"Btn"]=s}e(t.root).find(n.prev).on("click.switchCarousel",function(r){r.preventDefault();if(!e(this).hasClass(n.disabledClass)){if(t._anim){if(!n.respondinAnimating)return;t._anim.stop(!0)}f(t.index,!0),u=t.willTo(),u===t.length-1?t._circle=!0:t._circle=!1,t.switchTo(u)}}),e(t.root).find(n.next).on("click.switchCarousel",function(r){r.preventDefault();if(!e(this).hasClass(n.disabledClass)){if(t._anim){if(!n.respondinAnimating)return;t._anim.stop(!0)}f(t.index,!1),u=t.willTo(),u===0?t._circle=!0:t._circle=!1,t.switchTo(u)}}),n.autoplay&&n.pauseOnHover&&e(t.root).find(n.prev+", "+n.next).on("mouseenter.switchCarousel",function(){a=t.paused,t._pause()}).on("mouseleave.switchCarousel",function(){a||t._play()}),e(t).on("switch",function(){t.nextBtn&&(t.nextBtn.removeClass(n.disabledClass),!n.loop&&t.index===t.length-1&&t.nextBtn.addClass(n.disabledClass)),t.prevBtn&&(t.prevBtn.removeClass(n.disabledClass),!n.loop&&t.index===0&&t.prevBtn.addClass(n.disabledClass)),t._circle=!1})},destroy:function(t){e(t.root).find(t.config.prev).length&&e(t.root).find(t.config.prev).off(".switchCarousel"),e(t.root).find(t.config.next).length&&e(t.root).find(t.config.next).off(".switchCarousel")}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{indexOffset:1,numFormat:"[index]/[length]",switchNum:".switch-num"}),e.switchable.Plugins.push({name:"switchnum",init:function(t){var n=t.config,r=function(e,t){var r=n.numFormat.replace(/\[index\]/ig,"<span>"+(e+n.indexOffset)+"</span>");return r.replace(/\[length\]/ig,t)};if(!n.switchNum&&e(t.root).find(n.switchNum).length)return;e(t.root).find(n.switchNum).html(r(n.initIndex,t.length)),e(t).on("switch",function(){e(t.root).find(n.switchNum).html(r(t.index,t.length))})}})}(jQuery,window,document),function(e,t,n,r){e.extend(e.switchable.Config,{lazyloadCls:"switchlazyload"}),e.switchable.Plugins.push({name:"lazyload",init:function(t){var n=t.config.lazyloadCls,r=function(t){if(t.hasClass(n)){var r=e.trim(t.val());return t.replaceWith(r),!0}return!1};e(t).on("beforeSwitch",function(){e(t.panels).each(function(t,i){r(e(i))||r(e(i).find("."+n))})})}})}(jQuery,window,document),function(e){e(".j-switchable").each(function(t,n){var r=e(n).data("switch")||{},i=e(n).switchable(r);e.extend(n,{switchable:i})})}(jQuery),$.extend(namespace("Wenda.Timer"),function(){function r(e,t,r){var i=e||5,s="__countdown"+n+"__";o(s,1e3,function(){i==1?(u(s),r&&r()):(i--,t&&t(i))})}function i(e,n,r){t[e]=setTimeout(r,n)}function s(e){clearTimeout(t[e])}function o(e,t,n){i(e,t,function(){n(),o(e,t,n)})}function u(e){clearTimeout(t[e])}function a(){var e,t={},n,r,i,s=0,o=!1,u=function(e){return e<=9&&(e="0"+e),e};return t.localize=function(e){var t=e/1e3,n=u(parseInt(t%60,10)),r=u(parseInt(t%3600/60,10)),i=u(parseInt(t%86400/3600,10)),s=i+"\uff1a"+r+"\uff1a"+n;return s},t.go=function(){var e=new Date,n=s-e,u=0;n<=0&&(e<r?(u=1,n=r-e):(u=2,n=e-r));var a=t.localize(n);i&&i(u,a),o&&setTimeout(function(){t.go()},1e3)},t.countdownByData=function(e,n,u){i=u,s=new Date(e),r=new Date(n),o=!0,t.go()},t.stop=function(){o=!1},t}function f(){var e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e}var e={},t={},n=0;return e.countdown=r,e.create=a,e.delay=i,e.undelay=s,e.loop=o,e.unloop=u,e.midnight=f,e}());var SWFUpload;SWFUpload==undefined&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if(typeof e!="string"||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n=window.location.pathname.lastIndexOf("/");return n<=0?path="/":path=window.location.pathname.substr(0,n)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(e==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){var e=this.settings.button_window_mode;return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',e,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if(typeof e=="object")for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(e[n].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;e=this.getMovieElement();if(e&&typeof e.CallFunction=="unknown"){for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(r){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler=="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler=="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler=="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler=="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler=="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler=="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler=="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler=="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler=="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler=="function").toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,n){return t==undefined?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&typeof returnValue.post=="object"&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return typeof e=="number"?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash("AddFileParam",[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){typeof e=="string"&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();n!=undefined&&(n.style.width=e+"px",n.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var n=this;if(typeof this.settings[e]=="function")this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(this.settings[e]!==null)throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;typeof e=="function"&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t=/[$]([0-9a-f]{4})/i,n={},r;if(e!=undefined){for(var i in e.post)if(e.post.hasOwnProperty(i)){r=i;var s;while((s=t.exec(r))!==null)r=r.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));n[r]=e.post[i]}e.post=n}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if(!e){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.cleanUp=function(e){window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent("file_dialog_complete_handler",[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if(typeof this.settings.upload_start_handler=="function")e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";t===undefined&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if(typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"){for(var r in e)e.hasOwnProperty(r)&&n.push(r+": "+e[r]);t=n.join("\n")||"",n=t.split("\n"),t="EXCEPTION: "+n.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById
("SWFUpload_Console"),t||(n=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",n.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(r){alert("Exception: "+r.name+" Message: "+r.message)}},function(){function t(e){this.opts=e,this.filesDone=0,this.filesCount=0,this.filesLength=0}var e={MAXCOUNT:"\u4e00\u6b21\u6700\u591a\u4e0a\u4f205\u5f20\u56fe\u7247\u3002",MAXSIZE:"\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u4e0d\u8981\u8d85\u8fc75M\u3002",TYPE:"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u4e0a\u4f20JPG/PNG/GIF\u683c\u5f0f\u56fe\u7247\u3002"};t.prototype={bindElement:function(){var e=this,t;this.opts.input.on("change",function(){t=Array.prototype.slice.call(this.files),e.checkfiles(t)})},checkfiles:function(t){var n=[],r="",i=t.length,s=this.opts.maxfilesize,o=this,u=$.type(this.opts.upload_file_type)=="regexp";if(i<1)return;if(i>this.opts.maxfiles)return this.onerror(e.MAXCOUNT);t.forEach(function(i,s){(u?o.opts.upload_file_type.test(i.type):/image\/\w+/.test(i.type))?n.push(i):s==t.length-1?r+=i.name+e.TYPE:r+=i.name+"\uff0c"}),t=[],n.forEach(function(i,o){i.size<=s?t.push(i):o==n.length-1?r+=i.name+e.MAXSIZE:r+=i.name+"\uff0c"}),r.length>0&&this.onerror(r,"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef");if(t.length<1)return;this.upload(t)},onerror:function(e,t){return this.opts.onerror(e,t)&&!1},upload:function(e){var t=this;t.filesLength=e.length,t.filesDone=0,e.forEach(function(e,n){t.analyData(e)})},analyData:function(e){try{var t=this;if(this.opts.uploadType=="BinaryString"){var n=new FormData;n.append(this.opts.paramname,e),this.send(e,n)}else if(this.opts.uploadType=="DataURL"){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(n){var r=this.opts.paramname+"="+this.result.split(",")[1];t.send(e,r)}}}catch(i){return this.onerror(i)}},send:function(e,t){var n=this,r=new XMLHttpRequest,i=r.upload;e.currentProgress=0,e.startData=0,e.startTime=Date.now(),e.id=+e.lastModifiedDate+parseInt(Math.random()*1e5),i.addEventListener("progress",function(t){n.progress(t,e)},!1),r.open("POST",this.opts.url,!0),this.opts.uploadType=="DataURL"&&r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(t),this.opts.uploadStarted(e),r.onload=function(){r.responseText&&(e.timeDiff=Date.now()-e.startTime,n.opts.uploadFinished(JSON.parse(r.responseText),e),n.filesDone++,n.filesDone==n.filesLength&&n.afterAll())}},progress:function(e,t){if(e.lengthComputable){var n=e.loaded,r=Math.round(n*100/e.total);if(t.currentProgress!=r){t.currentProgress=r;var i=Date.now(),s=i-(t.currentStart?t.currentStart:t.startTime),o=n-t.startData;t.speed=Math.floor(o/s),t.startData=n,t.currentStart=i,this.opts.progressUpdated(t)}}},afterAll:function(){return this.opts.input.val(""),this.opts.afterAll()}},$.extend({html5Upload:function(e){var n=$.extend(!0,{url:"",input:"",loadImg:"http://p6.qhmsg.com/t01798cd1a6b1065192.gif",paramname:"imgage",maxfiles:5,uploadType:"BinaryString",maxfilesize:5242880,afterAll:function(){},onerror:function(){},uploadStarted:function(){},uploadFinished:function(){},progressUpdated:function(){}},e),r=new t(n);r.bindElement()}})}(),$.extend(namespace("Wenda.FileUpload"),function(){function n(e,t){e>0&&(this.startUpload(),$("#editorwraper").show())}function r(e){this.getStats().files_queued>0&&this.startUpload()}function i(e){this.editorId=e,this.getEditor=function(){return Wenda.Editor.get(this.editorId).editor},this.getLoadingImg=function(e){var t=this.getEditor();return e?t.iframe.contentWindow.document.getElementById(e):null},this.insert=function(e){$("#editorwraper").show();var t=this.getEditor();t.execCommand("insertHTML",'<p><img  id="'+e+'" src="http://p6.qhmsg.com/t01798cd1a6b1065192.gif" /></p>')},this.changeLoadingImg=function(e,t){var n=this.getLoadingImg(e);$(n).parent().html(t)},this.failed=function(e){var t=this.getLoadingImg(e);t.html('<img class="errorMsg_shouldbe_removed" src="http://p1.qhmsg.com/t01383134a68d72f138.png"/>')},this.finish=function(e,t){var n=this.getLoadingImg(e);if(!n)return;if(t.errno==0){var r=this.getEditor();this.changeLoadingImg(e,"<img src='"+t.data.url+"'/>"),r.adjustHeight&&r.adjustHeight(!0)}else this.failed(e)}}function s(e){var n=new i(e.id),r={url:"/submit/uploadimg/",input:$(".upload-pic"),loadImg:"http://p6.qhmsg.com/t01798cd1a6b1065192.gif",paramname:"picdata",maxfiles:5,maxfilesize:5242880,onerror:function(e,n){t.alert(n||"\u4e0a\u4f20\u5931\u8d25",e)},uploadStarted:function(e){n.insert(e.id)},uploadFinished:function(e,t){n.finish(t.id,e)},progressUpdated:function(){},afterAll:function(){}};e&&$.extend(!0,r,e),$.html5Upload(r)}function o(e){var t=new i(e.id),s={upload_url:"/submit/uploadimg/",file_size_limit:"5 MB",file_types:"*.jpg;*.png;*.gif",file_types_description:"\u56fe\u7247\u6587\u4ef6",file_upload_limit:0,file_post_name:"picdata",file_queued_handler:function(e){t.insert(e.id)},file_dialog_complete_handler:n,upload_success_handler:function(e,n){n=n.evalExp(),t.finish(e.id,n)},file_queue_error_handler:function(e,t){t==-110&&Wenda.Panel.alert({msg:"\u56fe\u7247\u5927\u5c0f\u8d85\u8fc7\u9650\u5236",desc:"\u8bf7\u4e0d\u8981\u4e0a\u4f20\u8d85\u8fc75MB\u7684\u56fe\u7247",yesBtnText:"\u786e\u5b9a"})},upload_complete_handler:r,button_image_url:"http://p19.qhmsg.com/t017df790022c9272ae.png ",button_placeholder_id:"spanButtonPlaceholder",button_width:50,button_height:20,button_text_top_padding:0,button_text_left_padding:18,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:"/resource/swf/swfupload.swf",custom_settings:{},debug:!1};return e&&$.extend(!0,s,e),new SWFUpload(s)}function u(e){function t(e){var t=$(".js-form-error");t.html(e),t.show().fadeOut(1e4)}return e.getContent().indexOf("http://p6.qhmsg.com/t01798cd1a6b1065192.gif")>-1?(t("\u6b63\u5728\u4e0a\u4f20\u56fe\u7247\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u6216\u8005\u5220\u9664\u91cd\u65b0\u4e0a\u4f20\uff01"),!1):e.getContent().indexOf("http://p1.qhmsg.com/t01383134a68d72f138.png")>-1?(t("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),!1):!0}var e={},t=Wenda.Panel;return e.makeHtml5=s,e.makeFlash=o,e.checkLoadingImg=u,e}()),function(){var e,t=window.location.pathname;e="/resource/js/components/editor/",window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,toolbars:[[]],labelMap:{},initialContent:"\u70b9\u6b64\u8f93\u5165\u60a8\u7684\u56de\u7b54",autoClearinitialContent:!0,textarea:"content",focus:!1,minFrameHeight:100,autoHeightEnabled:!0,autoHeightMax:600,pasteplain:!0,wordCount:!1,maximumWords:15e3}}(),UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor={},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE.version="1.2.3.0";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!!window.ActiveXObject,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",edge:e.indexOf("edge")>-1};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera;var r=0;n.ie&&(r=parseFloat(e.match(/msie (\d+)/)[1]),n.ie9Compat=document.documentMode==9,n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=r==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=r<7||n.quirks);if(n.gecko){var i=e.match(/rv:([\d\.]+)/);i&&(i=i[1].split("."),r=i[0]*1e4+(i[1]||0)*100+(i[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(r=parseFloat(t.version())),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=!n.mobile&&(n.ie&&r>=6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1),n}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,edge=browser.edge,utils=UE.utils={makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var r in t)if(!n||!e.hasOwnProperty(r))e[r]=t[r];return e},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isString:function(e){return typeof e=="string"||e.constructor==String},inherits:function(e,t){var n=e.prototype,r=utils.makeInstance(t.prototype);return utils.extend(r,n,!0),e.prototype=r,r.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var r;return function(){n&&clearTimeout(r),r=setTimeout(e,t)}},indexOf:function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},findNode:function(e,t,n){for(var r=0,i;i=e[r++];)if(n?n(i):this.indexOf(t,i.tagName.toLowerCase())!=-1)return i},removeItem:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t=0,n,r={};n=e[t++];)r[n.toUpperCase()]=r[n]=1;return r},unhtml:function(e,t){return e?e.replace(t||/[&<">]/g,function(e){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">"}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":e.cssFloat!=undefined?"cssFloat":e.styleFloat!=undefined?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){var e={};return function(t,n,r){var i=e[n.src||n.href];if(i){utils.isArray(i.funs)&&(i.ready?r():e[n.src||n.href].funs.push(r));return}e[n.src||n.href]=r?{funs:[r]}:1;if(!t.body){t.write('<script src="'+n.src+'"></script>');return}if(n.id&&t.getElementById(n.id))return;var s=t.createElement(n.tag);delete n.tag;for(var o in n)s.setAttribute(o,n[o]);s.onload=s.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){i=e[n.src||n.href];if(i.funs){i.ready=1;for(var t;t=i.funs.pop();)t()}s.onload=s.onreadystatechange=null}},t.getElementsByTagName("head")[0].appendChild(s)}}(),isEmptyObject:function(e){for(var t in e)return!1;return!0},isFunction:function(e){return"[object Function]"==Object.prototype.toString.call(e)},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(n.length>3)return"";t="#";for(var r=0,i;i=n[r++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function i(e,t){if(!e)return"";var n=e.top,r=e.bottom,i=e.left,s=e.right,o="";if(!n||!i||!r||!s)for(var u in e)o+=";"+t+"-"+u+":"+e[u]+";";else o+=";"+t+":"+(n==r&&r==i&&i==s?n:n==r&&i==s?n+" "+i:i==s?n+" "+i+" "+r:n+" "+s+" "+r+" "+i)+";";return o}var t,n,r;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,r,i,s){if(s.split(" ").length==1)switch(r){case"padding":return!t&&(t={}),t[i]=s,"";case"margin":return!n&&(n={}),n[i]=s,"";case"border":return s=="initial"?"":e}return e}),e+=i(t,"padding")+i(n,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},domReady:function(){function n(){e=!0;for(var n;n=t.pop();)n()}var e=!1,t=[];return function(r){if(document.readyState==="complete")return r&&setTimeout(r,1);r&&t.push(r),e&&n(),browser.ie?(function(){if(e)return;try{document.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,0);return}n()}(),window.attachEvent("onload",n)):(document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),n()},!1),window.addEventListener("load",n,!1))}}()};utils.domReady();var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)getListener(this,r,!0).push(t)},removeListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)utils.removeItem(getListener(this,r)||[],t)},fireEvent:function(e){e=utils.trim(e).split(" ");for(var t=0,n;n=e[t++];){var r=getListener(this,n),i,s,o;if(r){o=r.length;while(o--)s=r[o].apply(this,arguments),s!==undefined&&(i=s)}if(s=this["on"+n.toLowerCase()])i=s.apply(this,arguments)}return i}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}function t(e){var t=arguments;for(var n=1;n<t.length;n++){var r=t[n];for(var i in r)e.hasOwnProperty(i)||(e[i]=r[i])}return e}var n=e({isindex:1,fieldset:1}),r=e({input:1,button:1,select:1,textarea:1,label:1}),i=t(e({a:1}),r),s=t({iframe:1},i),o=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),u=e({ins:1,del:1,script:1,style:1}),a=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),u),f=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),a),l=t(e({p:1}),f),c=t(e({iframe:1}),f,r),h=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),p=t(e({a:0}),c),d=e({tr:1}),v=e({"#":1}),m=t(e({param:1}),h),g=t(e({form:1}),n,s,o,l),y=e({li:1}),b=e({style:1,script:1}),w=e({base:1,link:1,meta:1,title:1}),E=t(w,b),S=e({head:1,body:1}),x=e({html:1}),T=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),N=e({area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,embed:1});return e({$nonBodyContent:t(x,S,w),$block:T,$inline:p,$body:t(e({script:1,style:1}),T),$cdata:e({script:1,style:1}),$empty:N,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:S,head:E,style:v,script:v,body:g,base:{},link:{},meta:{},title:v,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:p,button:t(l,o),basefont:{},h5:p,h4:p,samp:p,h6:p,ol:y,h1:p,h3:p,option:v,h2:p,form:t(n,s,o,l),select:e({optgroup:1,option:1}),font:p,ins:p,menu:y,abbr:p,label:p,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:p,tfoot:d,cite:p,li:g,input:{},iframe:g,strong:p,textarea:v,noframes:g,big:p,small:p,span:e({"#":1,br:1}),hr:p,dt:p,sub:p,optgroup:e({option:1}),param:{},bdo:p,"var":p,div:g,object:m,sup:p,dd:g,strike:p,area:{},dir:y,map:t(e({area:1,form:1,p:1}),n,u,o),applet:m,dl:e({dt:1,dd:1}),del:p,isindex:{},fieldset:t(e({legend:1}),h),thead:d,ul:y,acronym:p,b:p,a:t(e({a:1}),c),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:p,i:p,u:p,tbody:d,s:p,address:t(s,l),tt:p,legend:p,q:p,pre:t(a,i),p:t(e({a:1}),p),em:p,dfn:p})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,r=[e],i=[t];n=e;while(n=n.parentNode){if(n===t)return 10;r.push(n)}n=t;while(n=n.parentNode){if(n===e)return 20;i.push(n)}r.reverse(),i.reverse();if(r[0]!==i[0])return 1;var s=-1;while(s++,r[s]===i[s]);e=r[s],t=i[s];while(e=e.nextSibling)if(e===t)return 4;return 2},getNodeIndex:function(e,t){var n=e,r=0;while(n=n.previousSibling){if(t&&n.nodeType==3)continue;r++}return r},inDoc:function(e,t){while(e=e.parentNode)if(e===t)return!0;return!1},findParent:function(e,t,n){if(!domUtils.isBody(e)){e=n?e:e.parentNode;while(e){if(!t||t(e)||this.isBody(e))return t&&!t(e)&&this.isBody(e)?null:e;e=e.parentNode}}return null},findParentByTagName:function(e,t,n,r){if(e&&e.nodeType&&!this.isBody(e)&&(e.nodeType==1||e.nodeType)){t=utils.listToMap(utils.isArray(t)?t:[t]),e=e.nodeType==3||!n?e.parentNode:e;while(e&&e.tagName&&e.nodeType!=9){if(r&&r(e))break;if(t[e.tagName])return e;e=e.parentNode}}return null},findParents:function(e,t,n,r){var i=t&&(n&&n(e)||!n)?[e]:[];while(e=domUtils.findParent(e,n))i.push(e);return r?i:i.reverse()},insertAfter:function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},remove:function(e,t){var n=e.parentNode,r;if(n){if(t&&e.hasChildNodes())while(r=e.firstChild)n.insertBefore(r,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,n,r){return getDomNode(e,"firstChild","nextSibling",t,n,r)},isBookmarkNode:function(e){return e.nodeType==1&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;var n=[e],r=[t],i=e,s=-1;while(i=i.parentNode){if(i===t)return i;n.push(i)}i=t;while(i=i.parentNode){if(i===e)return i;r.push(i)}n.reverse(),r.reverse();while(s++,n[s]===r[s]);return s==0?null:n[s-1]},clearEmptySibling:function(e,t,n){function r(e,t){var n;while(e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)))n=e[t],domUtils.remove(e),e=n}!t&&r(e.nextSibling,"nextSibling"),!n&&r(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var r=n.createTextNode("");return domUtils.insertAfter(e,r)}var i=e.splitText(t);if(browser.ie8){var s=n.createTextNode("");domUtils.insertAfter(i,s),domUtils.remove(s)}return i},isWhitespace:function(e){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)},getXY:function(e){var t=0,n=0;while(e.offsetParent)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={});var s=t+n.toString();n._d[s]||(n._d[s]=function(e){return n.call(e.srcElement,e||window.event)},e.attachEvent("on"+t,n._d[s]))}}e=null},un:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var s=t+n.toString();e.detachEvent("on"+t,n._d?n._d[s]:n),n._d&&n._d[s]&&delete n._d[s]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return 0;var n=e.attributes,r=t.attributes;if(!ie&&n.length!=r.length)return 0;var i,s,o=0,u=0;for(var a=0;i=n[a++];){if(i.nodeName=="style"){i.specified&&o++;if(domUtils.isSameStyle(e,t))continue;return 0}if(ie){if(!i.specified)continue;o++,s=r.getNamedItem(i.nodeName)}else s=t.attributes[i.nodeName];if(!s.specified||i.nodeValue!=s.nodeValue)return 0}if(ie){for(a=0;s=r[a++];)s.specified&&u++;if(o!=u)return 0}return 1},isSameStyle:function(e,t){var n=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),r=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){n=e.style,r=t.style;if(n.length!=r.length)return 0;for(var i in n){if(/^(\d+|csstext)$/i.test(i))continue;if(n[i]!=r[i])return 0}return 1}if(!n||!r)return n==r?1:0;n=n.split(";"),r=r.split(";");if(n.length!=r.length)return 0;for(var s=0,o;o=n[s++];)if(utils.indexOf(r,o)==-1)return 0;return 1},isBlockElm:function(e){return e.nodeType==1&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&e.nodeType==1&&e.tagName.toLowerCase()=="body"},breakParent:function(e,t){var n,r=e,i=e,s,o;do{r=r.parentNode,s?(n=r.cloneNode(!1),n.appendChild(s),s=n,n=r.cloneNode(!1),n.appendChild(o),o=n):(s=r.cloneNode(!1),o=s.cloneNode(!1));while(n=i.previousSibling)s.insertBefore(n,s.firstChild);while(n=i.nextSibling)o.appendChild(n);i=r}while(t!==r);return n=t.parentNode,n.insertBefore(s,t),n.insertBefore(o,t),n.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(e.nodeType!=1||!dtd.$removeEmpty[e.tagName])return 0;e=e.firstChild;while(e){if(domUtils.isBookmarkNode(e))return 0;if(e.nodeType==1&&!domUtils.isEmptyInlineElement(e)||e.nodeType==3&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){var n;while((n=e[t])&&n.nodeType==3&&domUtils.isWhitespace(n))e.removeChild(n)}t("firstChild"),t("lastChild")},mergChild:function(e,t,n){var r=domUtils.getElementsByTagName(e,e.tagName.toLowerCase());for(var i=0,s;s=r[i++];){if(!s.parentNode||domUtils.isBookmarkNode(s))continue;if(s.tagName.toLowerCase()=="span"){if(e===s.parentNode){domUtils.trimWhiteTextNode(e);if(e.childNodes.length==1){e.style.cssText=s.style.cssText+";"+e.style.cssText,domUtils.remove(s,!0);continue}}s.style.cssText=e.style.cssText+";"+s.style.cssText;if(n){var o=n.style;if(o){o=o.split(";");for(var u=0,a;a=o[u++];)s.style[utils.cssStyleToDomStyle(a.split(":")[0])]=a.split(":")[1]}}domUtils.isSameStyle(s,e)&&domUtils.remove(s,!0);continue}domUtils.isSameElement(e,s)&&domUtils.remove(s,!0)}if(t=="span"){var f=domUtils.getElementsByTagName(e,"a");for(var i=0,l;l=f[i++];)l.style.cssText=";"+e.style.cssText,l.style.textDecoration="underline"}},getElementsByTagName:function(e,t){var n=e.getElementsByTagName(t),r=[];for(var i=0,s;s=n[i++];)r.push(s);return r},mergToParent:function(e){var t=e.parentNode;while(t&&dtd.$removeEmpty[t.tagName]){if(t.tagName==e.tagName||t.tagName=="A"){domUtils.trimWhiteTextNode(t);if(t.tagName=="SPAN"&&!domUtils.isSameStyle(t,e)||t.tagName=="A"&&e.tagName=="SPAN"){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,t.tagName=="A"&&(t.style.textDecoration="underline")}if(t.tagName!="A"){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergSibling:function(e,t,n){function r(e,t,n){var r;if((r=n[e])&&!domUtils.isBookmarkNode(r)&&r.nodeType==1&&domUtils.isSameElement(n,r)){while(r.firstChild)t=="firstChild"?n.insertBefore(r.lastChild,n.firstChild):n.appendChild(r.firstChild);domUtils.remove(r)}}!t&&r("previousSibling","firstChild",e),!n&&r("nextSibling","lastChild",e)},unselectable:ie||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t=0,n;n=e.all[t++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){for(var n=0,r;r=t[n++];){r=attrFix[r]||r;switch(r){case"className":e[r]="";break;case"style":e.style.cssText="",!browser.ie&&e.removeAttributeNode(e.getAttributeNode("style"))}e.removeAttribute(r)}},creElm:function(e,t,n){return this.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t){var r=t[n];switch(n){case"class":e.className=r;break;case"style":e.style.cssText=e.style.cssText+";"+r;break;case"innerHTML":e[n]=r;break;case"value":e.value=r;break;default:e.setAttribute(attrFix[n]||n,r)}}return e},getComputedStyle:function(e,t){function n(e,t){return e=="font-size"&&/pt$/.test(t)&&(t=Math.round(parseFloat(t)/.75)+"px"),t}e.nodeType==3&&(e=e.parentNode);if(browser.ie&&browser.version<9&&t=="font-size"&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var r=e.ownerDocument.createElement("span");r.style.cssText="padding:0;border:0;font-family:simsun;",r.innerHTML=".",e.appendChild(r);var i=r.offsetHeight;return e.removeChild(r),r=null,i+"px"}try{var s=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(o){return null}return n(t,utils.fixColor(t,s))},removeClasses:function(e,t){t=utils.isArray(t)?t:[t],e.className=(" "+e.className+" ").replace(new RegExp("(?:\\s+(?:"+t.join("|")+"))+\\s+","g")," ")},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeStyle:function(e,t){e.style[utils.cssStyleToDomStyle(t)]="",e.style.cssText||domUtils.removeAttributes(e,["style"])},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},getStyle:function(e,t){var n=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,n)},setStyle:function(e,t,n){e.style[utils.cssStyleToDomStyle(t)]=n},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&domUtils.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t=0,n,r=e.getElementsByTagName("*");n=r[t++];)n.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,r=e.firstChild;t=t||function(){return 1};while(r)t(r)&&n++,r=r.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})==0},clearSelectedArr:function(e){var t;while(t=e.pop())domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var r=function(){var e=t.document,n=e.compatMode=="CSS1Compat";return{width:(n?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(n?e.documentElement.clientHeight:e.body.clientHeight)||0}},i=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},s=r().height,o=s*-1+n;o+=e.offsetHeight||0;var u=domUtils.getXY(e);o+=u.y;var a=i(t).y;(o>a||o<a-s)&&t.scrollTo(0,o+(o<0?-20:20))},isBr:function(e){return e.nodeType==1&&e.tagName=="BR"},isFillChar:function(e){return e.nodeType==3&&!e.nodeValue.replace(new RegExp(domUtils.fillChar),"").length},isStartInblock:function(e){var t=e.cloneRange(),n=0,r=t.startContainer,i;while(r&&domUtils.isFillChar(r))i=r,r=r.previousSibling;i&&(t.setStartBefore(i),r=t.startContainer),r.nodeType==1&&domUtils.isEmptyNode(r)&&t.startOffset==1&&t.setStart(r,0).collapse(!0);while(!t.startOffset){r=t.startContainer;if(domUtils.isBlockElm(r)||domUtils.isBody(r)){n=1;break}var s=t.startContainer.previousSibling,o;if(!s)t.setStartBefore(t.startContainer);else{while(s&&domUtils.isFillChar(s))o=s,s=s.previousSibling;o?t.setStartBefore(o):t.setStartBefore(t.startContainer)}}return n&&!domUtils.isBody(t.startContainer)?1:0},isEmptyBlock:function(e){var t=new RegExp("[ 	\r\n"+domUtils.fillChar+"]","g");if(e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)try{if(e.getElementsByTagName(n).length)return 0}catch(r){}return 1},setViewportOffset:function(e,t){var n=parseInt(e.style.left)|0,r=parseInt(e.style.top)|0,i=e.getBoundingClientRect(),s=t.left-i.left,o=t.top-i.top;s&&(e.style.left=n+s+"px"),o&&(e.style.top=r+o+"px")},fillNode:function(e,t){var n=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){while(e.firstChild)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):e.attributes.length==0},isCustomeNode:function(e){return e.nodeType==1&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return e.nodeType==1&&e.tagName.toLowerCase()==t}},fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){function r(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function i(e,t,n,i){return t.nodeType==1&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])&&(n=domUtils.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(i.startContainer=t,i.startOffset=n,i.endContainer||i.collapse(!0)):(i.endContainer=t,i.endOffset=n,i.startContainer||i.collapse(!1)),r(i),i}function s(e,t){var n=e.startContainer,r=e.endContainer,i=e.startOffset,s=e.endOffset,o=e.document,u=o.createDocumentFragment(),a,f;n.nodeType==1&&(n=n.childNodes[i]||(a=n.appendChild(o.createTextNode("")))),r.nodeType==1&&(r=r.childNodes[s]||(f=r.appendChild(o.createTextNode(""))));if(n===r&&n.nodeType==3)return u.appendChild(o.createTextNode(n.substringData(i,s-i))),t&&(n.deleteData(i,s-i),e.collapse(!0)),u;var l,c,h=u,p=domUtils.findParents(n,!0),d=domUtils.findParents(r,!0);for(var v=0;p[v]==d[v];)v++;for(var m=v,g;g=p[m];m++){l=g.nextSibling,g==n?a||(e.startContainer.nodeType==3?(h.appendChild(o.createTextNode(n.nodeValue.slice(i))),t&&n.deleteData(i,n.nodeValue.length-i)):h.appendChild(t?n:n.cloneNode(!0))):(c=g.cloneNode(!1),h.appendChild(c));while(l){if(l===r||l===d[m])break;g=l.nextSibling,h.appendChild(t?l:l.cloneNode(!0)),l=g}h=c}h=u,p[v]||(h.appendChild(p[v-1].cloneNode(!1)),h=h.firstChild);for(var m=v,y;y=d[m];m++){l=y.previousSibling,y==r?!f&&e.endContainer.nodeType==3&&(h.appendChild(o.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(c=y.cloneNode(!1),h.appendChild(c));if(m!=v||!p[v])while(l){if(l===n)break;y=l.previousSibling,h.insertBefore(t?l:l.cloneNode(!0),h.firstChild),l=y}h=c}return t&&e.setStartBefore(d[v]?p[v]?d[v]:p[v-1]:d[v-1]).collapse(!0),a&&domUtils.remove(a),f&&domUtils.remove(f),u}function u(e,t){try{if(n&&domUtils.inDoc(n,e))if(!n.nodeValue.replace(fillCharReg,"").length){var r=n.parentNode;domUtils.remove(n);while(r&&domUtils.isEmptyInlineElement(r)&&!r.contains(t))n=r.parentNode,domUtils.remove(r),r=n}else n.nodeValue=n.nodeValue.replace(fillCharReg,"")}catch(i){}}function a(e,t){var n;e=e[t];while(e&&domUtils.isFillChar(e))n=e[t],domUtils.remove(e),e=n}var e=0,t=domUtils.fillChar,n,o=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};o.prototype={cloneContents:function(){return this.collapsed?null:s(this,0)},deleteContents:function(){var e;return this.collapsed||s(this,1),browser.webkit&&(e=this.startContainer,e.nodeType==3&&!e.nodeValue.length&&(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:s(this,2)},setStart:function(e,t){return i(!0,e,t,this)},setEnd:function(e,t){return i(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length
)},cloneRange:function(){var e=this,t=new o(e.document);return t.setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){var t=this,n,r=t.collapsed;while(t.startContainer.nodeType==1&&(n=t.startContainer.childNodes[t.startOffset])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setStart(n,0);if(r)return t.collapse(!0);if(!e)while(t.endContainer.nodeType==1&&t.endOffset>0&&(n=t.endContainer.childNodes[t.endOffset-1])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setEnd(n,n.childNodes.length);return t},getCommonAncestor:function(e,t){var n=this.startContainer,r=this.endContainer;return n===r?e&&n.nodeType==1&&this.startOffset==this.endOffset-1?n.childNodes[this.startOffset]:t&&n.nodeType==3?n.parentNode:n:domUtils.getCommonAncestor(n,r)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,r=this.collapsed,i=this.endContainer;if(t.nodeType==3){if(n==0)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var s=domUtils.split(t,n);t===i?this.setEnd(s,this.endOffset-n):t.parentNode===i&&(this.endOffset+=1),this.setStartBefore(s)}if(r)return this.collapse(!0)}return e||(n=this.endOffset,i=this.endContainer,i.nodeType==3&&(n==0?this.setEndBefore(i):n>=i.nodeValue.length?this.setEndAfter(i):(domUtils.split(i,n),this.setEndAfter(i)))),this},txtToElmBoundary:function(){function e(e,t){var n=e[t+"Container"],r=e[t+"Offset"];n.nodeType==3&&(r?r>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}return this.collapsed||(e(this,"start"),e(this,"end")),this},insertNode:function(e){var t=e,n=1;e.nodeType==11&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var r=this.startContainer,i=this.startOffset,s=r.childNodes[i];return s?r.insertBefore(e,s):r.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(t,n){var r,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("\ufeff")),i.id="_baidu_bookmark_start_"+(n?"":e++),this.collapsed||(r=i.cloneNode(!0),r.id="_baidu_bookmark_end_"+(n?"":e++)),this.insertNode(i),r&&(this.collapse(!1).insertNode(r),this.setEndBefore(r)),this.setStartAfter(i),{start:t?i.id:i,end:r?t?r.id:r:null,id:t}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,n=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),n?(this.setEndBefore(n),domUtils.remove(n)):this.collapse(!0),this},enlarge:function(e,t){var n=domUtils.isBody,r,i,s=this.document.createTextNode("");if(e){i=this.startContainer,i.nodeType==1?i.childNodes[this.startOffset]?r=i=i.childNodes[this.startOffset]:(i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.previousSibling)&&!domUtils.isBlockElm(r))i=r;this.setStartBefore(i);break}r=i,i=i.parentNode}i=this.endContainer,i.nodeType==1?((r=i.childNodes[this.endOffset])?i.insertBefore(s,r):i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.nextSibling)&&!domUtils.isBlockElm(r))i=r;this.setEndAfter(i);break}r=i,i=i.parentNode}s.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(s)}if(!this.collapsed){while(this.startOffset==0){if(t&&t(this.startContainer))break;if(n(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(t&&t(this.endContainer))break;if(n(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return e.nodeType==1&&domUtils.isBlockElm(e)}).adjustmentBoundary();var r=this.createBookmark(),i=r.end,s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},o=domUtils.getNextDomNode(r.start,!1,s),u,a,f=this.cloneRange();while(o&&domUtils.getPosition(o,i)&domUtils.POSITION_PRECEDING)if(o.nodeType==3||dtd[e][o.tagName]){f.setStartBefore(o),u=o;while(u&&(u.nodeType==3||dtd[e][u.tagName])&&u!==i)a=u,u=domUtils.getNextDomNode(u,u.nodeType==1,null,function(t){return dtd[e][t.tagName]});var l=f.setEndAfter(a).extractContents(),c;if(n&&n.length>0){var h,p;p=h=n[0].cloneNode(!1);for(var d=1,v;v=n[d++];)h.appendChild(v.cloneNode(!1)),h=h.firstChild;c=h}else c=f.document.createElement(e);t&&domUtils.setAttributes(c,t),c.appendChild(l),f.insertNode(n?p:c);var m;e=="span"&&t.style&&/text\-decoration/.test(t.style)&&(m=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(m,t),domUtils.remove(c,!0),c=m):(domUtils.mergSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergChild(c,e,t),o=domUtils.getNextDomNode(c,!1,s),domUtils.mergToParent(c);if(u===i)break}else o=domUtils.getNextDomNode(o,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();var t=this.startContainer,n=this.endContainer;for(;;){if(t.nodeType==1){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if(t.tagName.toLowerCase()=="body"){t=null;break}}t=t.parentNode}for(;;){if(n.nodeType==1){if(utils.indexOf(e,n.tagName.toLowerCase())>-1)break;if(n.tagName.toLowerCase()=="body"){n=null;break}}n=n.parentNode}var r=this.createBookmark(),i,s;t&&(s=this.cloneRange().setEndBefore(r.start).setStartBefore(t),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),n&&(s=this.cloneRange().setStartAfter(r.end).setEndAfter(n),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(r.end,n.nextSibling));var o=domUtils.getNextDomNode(r.start,!1,function(e){return e.nodeType==1}),u;while(o&&o!==r.end)u=domUtils.getNextDomNode(o,!0,function(e){return e.nodeType==1}),utils.indexOf(e,o.tagName.toLowerCase())>-1&&domUtils.remove(o,!0),o=u;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(t.startContainer.nodeType==1&&t.startContainer===t.endContainer&&t.endOffset-t.startOffset==1){var n=t.startContainer.childNodes[t.startOffset];n&&n.nodeType==1&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(e=n)}}return e},select:browser.ie?function(e,r){var i;this.collapsed||this.shrinkBoundary();var s=this.getClosedNode();if(s&&!r){try{i=this.document.body.createControlRange(),i.addElement(s),i.select()}catch(o){}return this}var f=this.createBookmark(),l=f.start,c;i=this.document.body.createTextRange(),i.moveToElementText(l),i.moveStart("character",1);if(!this.collapsed){var h=this.document.body.createTextRange();c=f.end,h.moveToElementText(c),i.setEndPoint("EndToEnd",h)}else if(!e&&this.startContainer.nodeType!=3){var p=this.document.createTextNode(t),d=this.document.createElement("span");d.appendChild(this.document.createTextNode(t)),l.parentNode.insertBefore(d,l),l.parentNode.insertBefore(p,l),u(this.document,p),n=p,a(d,"previousSibling"),a(l,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}this.moveToBookmark(f),d&&domUtils.remove(d);try{i.select()}catch(o){}return this}:function(e){var r=domUtils.getWindow(this.document),i=r.getSelection(),s;browser.gecko||r.focus();if(i){i.removeAllRanges();if(this.collapsed){if(e&&browser.opera&&!domUtils.isBody(this.startContainer)&&this.startContainer.nodeType==1){var o=this.document.createTextNode("");this.insertNode(o).setStart(o,0).collapse(!0)}e||(s=this.document.createTextNode(t),this.insertNode(s),u(this.document,s),a(s,"previousSibling"),a(s,"nextSibling"),n=s,this.setStart(s,browser.webkit?1:0).collapse(!0))}var f=this.document.createRange();f.setStart(this.startContainer,this.startOffset),f.setEnd(this.endContainer,this.endOffset),i.addRange(f)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var n=this.document.createElement("span");n.innerHTML="&nbsp;";var r=this.cloneRange();return r.insertNode(n),domUtils.scrollToView(n,e,t),domUtils.remove(n),this}}})(),function(){function e(e,t){var n=domUtils.getNodeIndex;e=e.duplicate(),e.collapse(t);var r=e.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};var i=r.children,s,o=e.duplicate(),u=0,a=i.length-1,f=-1,l;while(u<=a){f=Math.floor((u+a)/2),s=i[f],o.moveToElementText(s);var c=o.compareEndPoints("StartToStart",e);if(c>0)a=f-1;else{if(!(c<0))return{container:r,offset:n(s)};u=f+1}}if(f==-1){o.moveToElementText(r),o.setEndPoint("StartToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!l)return s=i[i.length-1],{container:s,offset:s.nodeValue.length};var h=i.length;while(l>0)l-=i[--h].nodeValue.length;return{container:i[h],offset:-l}}o.collapse(c>0),o.setEndPoint(c>0?"StartToStart":"EndToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length;if(!l)return dtd.$empty[s.tagName]||dtd.$nonChild[s.tagName]?{container:r,offset:n(s)+(c>0?0:1)}:{container:s,offset:c>0?0:s.childNodes.length};while(l>0)try{var p=s;s=s[c>0?"previousSibling":"nextSibling"],l-=s.nodeValue.length}catch(d){return{container:r,offset:n(p)}}return{container:s,offset:c>0?-l:s.nodeValue.length+l}}function t(t,n){if(t.item)n.selectNode(t.item(0));else{var r=e(t,!0);n.setStart(r.container,r.offset),t.compareEndPoints("StartToEnd",t)!=0&&(r=e(t,!1),n.setEnd(r.container,r.offset))}return n}function n(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var r=t.item?t.item(0):t.parentElement();return(r.ownerDocument||r)===e.document?t:null}var r=dom.Selection=function(e){var t=this,r;t.document=e,ie&&(r=domUtils.getWindow(e).frameElement,domUtils.on(r,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),domUtils.on(r,"activate",function(){try{!n(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),r=e=null};r.prototype={getNative:function(){var e=this.document;try{return e?ie?e.selection:domUtils.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return browser.ie&&n(this)||!browser.ie&&this.getNative().rangeCount?!0:!1}catch(e){return!1}},getRange:function(){function n(t){var n=e.document.body.firstChild,r=t.collapsed;while(n&&n.firstChild)t.setStart(n,0),n=n.firstChild;t.startContainer||t.setStart(e.document.body,0),r&&t.collapse(!0)}var e=this;if(e._cachedRange!=null)return this._cachedRange;var r=new baidu.editor.dom.Range(e.document);if(ie){var i=e.getIERange();i?t(i,r):n(r)}else{var s=e.getNative();if(s&&s.rangeCount){var o=s.getRangeAt(0),u=s.getRangeAt(s.rangeCount-1);r.setStart(o.startContainer,o.startOffset).setEnd(u.endContainer,u.endOffset),r.collapsed&&domUtils.isBody(r.startContainer)&&!r.startOffset&&n(r)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;n(r)}}return this._bakRange=r},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e=ie?this.getIERange():this.getRange(),t,n,r,i;if(ie){if(!e)return this.document.body.firstChild;if(e.item)return e.item(0);t=e.duplicate(),t.text.length>0&&t.moveStart("character",1),t.collapse(1),n=t.parentElement(),i=r=e.parentElement();while(r=r.parentNode)if(r==n){n=i;break}}else{e.shrinkBoundary(),n=e.startContainer,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,e.startOffset)]);if(n.nodeType==3)return n.parentNode}return n},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie?e.createRange():e.getRangeAt(0),browser.ie?t.text:t.toString()):""}}}(),function(){function n(e){var t=e.getElementsByTagName("img"),n;for(var r=0,i;i=t[r++];)if(n=i.getAttribute("orgSrc"))i.src=n,i.removeAttribute("orgSrc");var s=e.getElementsByTagName("a");for(var r=0,o;o=s[r++];r++)o.getAttribute("data_ue_src")&&o.setAttribute("href",o.getAttribute("data_ue_src"))}function r(e,t){var n,r,i;try{t.textarea=document.getElementById("ueditor_textarea_content")}catch(s){}if(t.textarea)if(utils.isString(t.textarea)){for(var o=0,u,a=domUtils.getElementsByTagName(e,"textarea");u=a[o++];)if(u.id=="ueditor_textarea_"+t.options.textarea){n=u;break}}else n=t.textarea;n||e.appendChild(n=domUtils.creElm(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),i=new RegExp("[\r	\n]","g"),t.options.initialContent&&t.options.initialContent.replace(/<[^>]*>/gi,"")==t.getContentTxt().replace(i,"")?r="":r=t.getContent(null,null,!0),n.value=t.options.allHtmlEnabled?t.getAllHtml():r}var e=0,t,i=UE.Editor=function(t){var n=this;n.uid=e++,EventBase.call(n),n.commands={},n.options=utils.extend(t||{},UEDITOR_CONFIG,!0),n.setOpt({isShow:!0,initialContent:"\u6b22\u8fce\u4f7f\u7528ueditor!",autoClearinitialContent:!1,iframeCssUrl:"",textarea:"editorValue",focus:!1,minFrameHeight:320,autoClearEmptyNode:!0,readonly:!1,zIndex:999,enterTag:"p",pageBreakTag:"_baidu_page_break_tag_",customDomain:!1,lang:"zh-cn",langPath:n.options.UEDITOR_HOME_URL+"lang/",allHtmlEnabled:!1});for(var r in UE.plugins)UE.plugins[r].call(n);n.langIsReady=!0,n.fireEvent("langReady"),UE.instants["ueditorInstant"+n.uid]=n};i.prototype={ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var n={};utils.isString(e)?n[e]=t:n=e,utils.extend(this.options,n,!0)},destroy:function(){var e=this;e.fireEvent("destroy"),e.container.innerHTML="",domUtils.remove(e.container);for(var t in e)e.hasOwnProperty(t)&&delete this[t]},render:function(e){var t=this,n=t.options;e.constructor===String&&(e=document.getElementById(e));if(e){var r=n.initialStyle?n.initialStyle:'body{margin:0;background:fff;padding:2px 4px;font:14px/20px arial,"\u5b8b\u4f53";cursor:text;white-space: pre-wrap;}',i=ie&&browser.version<9,s=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml'"+(i?"":" class='view'")+"><head>"+(n.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(n.iframeCssUrl)+"'/>":"")+"<style type='text/css'>"+r+"p{margin:1px 0;padding:0;cursor:text;word-wrap:break-word;vertical-align:baseline \\0}"+"p img{vertical-align:bottom;*vertical-align:-3px}"+"img{border:0}"+"ol,ul{margin-top:0;margin-bottom:0;margin-left:0;padding-left:2em}"+"ol{*margin-left:2px}#initContent{color:#ccc}"+".selectTdClass{background-color:#3399FF !important;}"+"table.noBorderTable td{border:1px dashed #ddd !important}"+"table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}"+".view{padding:0;word-wrap:break-word;cursor:text;height:100%;}\n"+"</style></head><body"+(i?" class='view'":"")+"></body>";if(n.customDomain&&document.domain!=location.hostname)s+="<script>window.parent.UE.instants['ueditorInstant"+t.uid+"']._setup(document);</script></html>",e.appendChild(domUtils.creElm(document,"iframe",{id:"baidu_editor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:'javascript:void(function(){document.open();document.domain="'+document.domain+'";'+'document.write("'+s+'");document.close();}())'}));else{e.innerHTML='<iframe id="baidu_editor_'+this.uid+'"'+'width="100%" height="100%" scroll="no" frameborder="0" ></iframe>';var o=e.firstChild.contentWindow.document;!browser.webkit&&o.open(),o.write(s+"</html>"),o.close(),window.setTimeout(function(){t._setup(o)},50)}e.style.overflow="hidden"}},_setup:function(e){var t=this,n=t.options;ie?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):(e.body.contentEditable=!0,e.body.spellcheck=!1),t.document=e,t.window=e.defaultView||e.parentWindow,t.iframe=t.window.frameElement,t.body=e.body,t.setHeight(n.minFrameHeight),t.selection=new dom.Selection(e);var i;browser.gecko&&(i=this.selection.getNative())&&i.removeAllRanges(),this._initEvents();if(n.initialContent)if(n.autoClearinitialContent){var s=t.execCommand;t.execCommand=function(){t.fireEvent("firstBeforeExecCommand"),s.apply(t,arguments)},this.setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,!0);for(var o=this.iframe.parentNode;!domUtils.isBody(o);o=o.parentNode)if(o.tagName=="FORM"){domUtils.on(o,"submit",function(){r(this,t)});break}domUtils.isEmptyNode(t.body)&&(t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),n.focus&&setTimeout(function(){t.focus(),!t.options.autoClearinitialContent&&t._selectionChange()}),t.container||(t.container=this.iframe.parentNode),t.isReady=1,t.fireEvent("ready");try{domUtils.on(t.window,["blur","focus"],function(e){if(e.type=="blur"){t.options.onBlurfun&&t.options.onBlurfun(),t._bakRange=t.selection.getRange();try{t.selection.getNative().removeAllRanges()}catch(e){}}else{t.options.onFocusfun&&t.options.onFocusfun();try{t._bakRange&&t._bakRange.select()}catch(e){}}})}catch(u){}browser.gecko&&browser.version<=10902&&(t.body.contentEditable=!1,setTimeout(function(){t.body.contentEditable=!0},100),setInterval(function(){t.body.style.height=t.iframe.offsetHeight-20+"px"},100)),!n.isShow&&t.setHide(),n.readonly&&t.setDisabled()},sync:function(e){var t=this,n=e?document.getElementById(e):domUtils.findParent(t.iframe.parentNode,function(e){return e.tagName=="FORM"},!0);n&&r(n,t)},setHeight:function(e){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),this.document.body.style.height=e-20+"px"},getContent:function(e,t,n){var r=this;e&&utils.isFunction(e)&&(t=e,e="");if(t?!t():!this.hasContents())return"";r.fireEvent("beforegetcontent",e);var i=new RegExp(domUtils.fillChar,"g"),s=r.body.innerHTML.replace(i,"").replace(/>[\t\r\n]*?</g,"><");r.fireEvent("aftergetcontent",e);if(r.serialize){var o=r.serialize.parseHTML(s);o=r.serialize.transformOutput(o),s=r.serialize.toHTML(o)}return ie&&n?s=s.replace(/<p>\s*?<\/p>/g,"<p>&nbsp;</p>"):s=s.replace(/(&nbsp;)+/g,function(e){for(var t=0,n=[],r=e.split(";").length-1;t<r;t++)n.push(t%2==0?" ":"&nbsp;");return n.join("")}),s},getAllHtml:function(){var e=this,t={html:""},n="";return e.fireEvent("getAllHtml",t),"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+e.document.getElementsByTagName("head")[0].innerHTML+t.html+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return dtd.$block[n]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(e,t){var r=this,i=utils.extend({a:1,A:1},dtd.$inline,!0),s;e=e.replace(/^[ \t\r\n]*?</,"<").replace(/>[ \t\r\n]*?$/,">").replace(/>[\t\r\n]*?</g,"><").replace(/[\s\/]?(\w+)?>[ \t\r\n]*?<\/?(\w+)/gi,function(e,t,n){return t?s=n:t=s,!i[t]&&!i[n]?e.replace(/>[ \t\r\n]*?</,"><"):e}),r.fireEvent("beforesetcontent");var o=this.serialize;if(o){var u=o.parseHTML(e);u=o.transformInput(u),u=o.filter(u),e=o.toHTML(u)}this.body.innerHTML=e.replace(new RegExp("[\r"+domUtils.fillChar+"]*","g"),""),browser.ie&&browser.version<7&&n(this.document.body);if(r.options.enterTag=="p"){var a=this.body.firstChild,f;if(!a||a.nodeType==1&&(dtd.$cdata[a.tagName]||domUtils.isCustomeNode(a))&&a===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var l=r.document.createElement("p");while(a){while(a&&(a.nodeType==3||a.nodeType==1&&dtd.p[a.tagName]&&!dtd.$cdata[a.tagName]))f=a.nextSibling,l.appendChild(a),a=f;if(l.firstChild){if(!a){r.body.appendChild(l);break}r.body.insertBefore(l,a),l=r.document.createElement("p")}a=a.nextSibling}}}r.adjustTable&&r.adjustTable(r.body),r.fireEvent("aftersetcontent"),r.fireEvent("contentchange"),!t&&r._selectionChange(),r._bakRange=r._bakIERange=null;var c;browser.gecko&&(c=this.selection.getNative())&&c.removeAllRanges()},focus:function(e){try{var t=this,n=t.selection.getRange();e?n.setStartAtLast(t.body.lastChild).setCursor(!1,!0):n.select(!0)}catch(r){}},_initEvents:function(){var e=this,t=e.document,n=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(n,["focus","blur"],e._proxyDomEvent),domUtils.on(t,["mouseup","keydown"],function(t){if(t.type=="keydown"&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))return;if(t.button==2)return;e._selectionChange(250,t)});var r=0,i=browser.ie?e.body:e.document,s;domUtils.on(i,"dragstart",function(){r=1}),domUtils.on(i,browser.webkit?"dragover":"drop",function(){return browser.webkit?function(){clearTimeout(s),s=setTimeout(function(){if(!r){var t=e.selection,n=t.getRange();if(n){var i=n.getCommonAncestor();if(i&&e.serialize){var s=e.serialize,o=s.filter(s.transformInput(s.parseHTML(s.word(i.innerHTML))));i.innerHTML=s.toHTML(o)}}}r=0},200)}:function(e){r||(e.preventDefault?e.preventDefault():e.returnValue=!1),r=0}}())},_proxyDomEvent:function(e){return this.fireEvent(e.type.replace(/^on/,""),e)},_selectionChange:function(e,n){var r=this,i=!1,s,o;if(browser.ie&&browser.version<9&&n&&n.type=="mouseup"){var u=this.selection.getRange();u.collapsed||(i=!0,s=n.clientX,o=n.clientY)}clearTimeout(t),t=setTimeout(function(){if(!r.selection.getNative())return;var e;if(i&&r.selection.getNative().type=="None"){e=r.document.body.createTextRange();try{e.moveToPoint(s,o)}catch(t){e=null}}var u;e&&(u=r.selection.getIERange,r.selection.getIERange=function(){return e}),r.selection.cache(),u&&(r.selection.getIERange=u),r.selection._cachedRange&&r.selection._cachedStartElement&&(r.fireEvent("beforeselectionchange"),r.fireEvent("selectionchange",!!n),r.fireEvent("afterselectionchange"),r.selection.clear())},e||50)},_callCmdFn:function(e,t){var n=t[0].toLowerCase(),r,i;r=this.commands[n]||UE.commands[n],i=r&&r[e];if((!r||!i)&&e=="queryCommandState")return 0;if(i)return i.apply(this,t)},execCommand:function(e){e=e.toLowerCase();var t=this,n,r=t.commands[e]||UE.commands[e];if(!r||!r.execCommand)return;return!r.notNeedUndo&&!t.__hasEnterExecCommand?(t.__hasEnterExecCommand=!0,t.queryCommandState(e)!=-1&&(t.fireEvent("beforeexeccommand",e),n=this._callCmdFn("execCommand",arguments),t.fireEvent("afterexeccommand",e)),t.__hasEnterExecCommand=!1):n=this._callCmdFn("execCommand",arguments),t._selectionChange(),n},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t=0,n;n=e[t++];)if(this.document.getElementsByTagName(n).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;e=["div"];for(t=0;n=e[t++];){var r=domUtils.getElementsByTagName(this.document,n);for(var i=0,s;s=r[i++];)if(domUtils.isCustomeNode(s))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e=this,t;if(e.body.contentEditable=="false"){e.body.contentEditable=!0,t=e.selection.getRange();try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.fireEvent("selectionchange")}},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],t.body.contentEditable=="true"&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.queryCommandState=function(n){return utils.indexOf(e,n)!=-1?t.bkqueryCommandState.apply(t,arguments):-1},t.fireEvent("selectionchange"))},setDefaultContent:function(){function e(){var t=this;if(t.document.getElementById("initContent")){t.document.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";var n=t.selection.getRange();t.removeListener("firstBeforeExecCommand",e),t.removeListener("focus",e),setTimeout(function(){n.setStart(t.document.body.firstChild,0).collapse(!0).select(!0),t._selectionChange()})}}return function(t){var r=this;r.document.body.innerHTML='<p id="initContent">'+t+"</p>",browser.ie&&browser.version<7&&n(r.document.body),r.addListener("firstBeforeExecCommand",e),r.addListener("focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if(e.container.style.display=="none"){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.container.style.display=""}},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},getLang:function(e){var t=UE.I18N[this.options.lang];e=(e||"").split(".");for(var n=0,r;r=e[n++];){t=t[r];if(!t)break}return t}},utils.inherits(i,EventBase)}();var baidu=baidu||{};baidu.editor=baidu.editor||{},baidu.editor.ui={},function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,n="$EDITORUI",r=window[n]={},i="ID"+n,s=0,o=baidu.editor.ui.uiUtils={uid:function(e){return e?e[i]||(e[i]=++s):++s},hook:function(e,t){var n;return e&&e._callbacks?n=e:(n=function(){var t;e&&(t=e.apply(this,arguments));var r=n._callbacks,i=r.length;while(i--){var s=r[i].apply(this,arguments);t===undefined&&(t=s)}return t},n._callbacks=[]),n._callbacks.push(t),n},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return e.ie&&e.quirks?document.body:document.documentElement},getClientRect:function(e){var n;try{n=e.getBoundingClientRect()}catch(r){n={left:0,top:0,height:0,width:0}}var i={left:Math.round(n.left),top:Math.round(n.top),height:Math.round(n.bottom-n.top),width:Math.round(n.right-n.left)},s;while((s=e.ownerDocument)!==document&&(e=t.getWindow(s).frameElement))n=e.getBoundingClientRect(),i.left+=n.left,i.top+=n.top;return i.bottom=i.top+i.height,i.right=i.left+i.width,i},getViewportRect:function(){var e=o.getViewportElement(),t=(window.innerWidth||e.clientWidth)|0,n=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:n,width:t,bottom:n,right:t}},setViewportOffset:function(e,n){var r,i=o.getFixedLayer();e.parentNode===i?(e.style.left=n.left+"px",e.style.top=n.top+"px"):t.setViewportOffset(e,n)},getEventOffset:function(e){var t=e.target||e.srcElement,n=o.getClientRect(t),r=o.getViewportOffsetByEvent(e);return{left:r.left-n.left,top:r.top-n.top}},getViewportOffsetByEvent:function(e){var n=e.target||e.srcElement,r=t.getWindow(n).frameElement,i={left:e.clientX,top:e.clientY};if(r&&n.ownerDocument!==document){var s=o.getClientRect(r);i.left+=s.left,i.top+=s.top}return i},setGlobal:function(e,t){return r[e]=t,n+'["'+e+'"]'},unsetGlobal:function(e){delete r[e]},copyAttributes:function(t,n){var r=n.attributes,i=r.length;while(i--){var s=r[i];s.nodeName!="style"&&s.nodeName!="class"&&(!e.ie||s.specified)&&t.setAttribute(s.nodeName,s.nodeValue)}n.className&&(t.className+=" "+n.className),n.style.cssText&&(t.style.cssText+=";"+n.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):e.compareDocumentPosition(t)&16)}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.EventBase,r=baidu.editor.ui.UIBase=function(){};r.prototype={className:"",uiName:"",initOptions:function(e){var n=this;for(var r in e)n[r]=e[r];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){var n=this.renderHtml(),r=t.createElementByHtml(n),i=this.getDom();i!=null?(i.parentNode.replaceChild(r,i),t.copyAttributes(r,i)):(typeof e=="string"&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),e.appendChild(r))},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(r,n)}(),function(){function i(e){this.initOptions(e),this.initEditorUI()}var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.dom.domUtils;i.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this,this._dialogs={},this.initUIBase();var e=this.editor,t=this;e.addListener("ready",function(){e.options.elementPathEnabled&&(e.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+e.getLang("elementPathTip")+":</div>"),e.options.wordCount&&(e.ui.getDom("wordcount").innerHTML=e.getLang("wordCountTip"),e.ui.enableWordCount(),e.addListener("keyup",function(e,n){var r=n.keyCode||n.which;r==32&&t._wordCount()})),!e.options.elementPathEnabled&&!e.options.wordCount&&(e.ui.getDom("elementpath").style.display="none",e.ui.getDom("wordcount").style.display="none");if(!e.selection.isFocus())return;e.fireEvent("selectionchange",!1,!0)}),e.addListener("mousedown",function(e,t){var n=t.target||t.srcElement}),e.addListener("selectionchange",function(){e.options.elementPathEnabled&&t[(e.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),e.options.wordCount&&t[(e.queryCommandState("wordcount")==-1?"dis":"en")+"ableWordCount"]()})},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td></tr></table></div></div>'},_wordCount:function(){var e=this.getDom("wordcount");if(!this.editor.options.wordCount){e.style.display="none";return}e.innerHTML=this.editor.queryCommandValue("wordcount")},disableWordCount:function(){var e=this.getDom("wordcount");e.innerHTML="",e.style.display="none",this.wordcount=!1},enableWordCount:function(){var e=this.getDom("wordcount");e.style.display="",this.wordcount=!0,this._wordCount()},_updateElementPath:function(){var e=this.getDom("elementpath"),t;if(this.elementPathEnabled&&(t=this.editor.queryCommandValue("elementpath"))){var n=[];for(var r=0,i;i=t[r];r++)n[r]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+r+'&quot;);">'+i+"</span>");e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else e.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom=="1"?e.style.zoom="100%":e.style
.zoom="1"}},e.inherits(i,baidu.editor.ui.UIBase),baidu.editor.ui.Editor=function(t){var n=new baidu.editor.Editor(t);n.options.editor=n;var r=n.render;return n.render=function(t){e.domReady(function(){function e(){n.setOpt({labelMap:n.options.labelMap||UE.I18N[n.options.lang].labelMap}),new i(n.options);if(t){t.constructor===String&&(t=document.getElementById(t)),t&&t.getAttribute("name")&&(n.options.textarea=t.getAttribute("name"));if(t&&/script|textarea/ig.test(t.tagName)){var e=document.createElement("div");t.parentNode.insertBefore(e,t);var s=t.value||t.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(s)?n.options.initialContent:s.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),t.id&&(e.id=t.id),t.className&&(e.className=t.className),t.style.cssText&&(e.style.cssText=t.style.cssText),/textarea/i.test(t.tagName)?(n.textarea=t,n.textarea.style.display="none"):t.parentNode.removeChild(t),t=e,t.innerHTML=""}}n.ui.render(t);var o=n.ui.getDom("iframeholder");n.container=n.ui.getDom(),n.container.style.zIndex=n.options.zIndex,r.call(n,o)}n.langIsReady?e():n.addListener("langReady",e)})},n}}(),UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){var n=e.selection.getStartElementPath();return utils.findNode(n,t)},n=this;for(var r in e)(function(e,r){n.commands[e]={execCommand:function(e){var i=new dom.Range(n.document),s="";if(n.currentSelectedArr&&n.currentSelectedArr.length>0){for(var o=0,u;u=n.currentSelectedArr[o++];)u.style.display!="none"&&(i.selectNodeContents(u).select(),!s&&(s=t(this,r)),(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]));i.selectNodeContents(n.currentSelectedArr[0]).select()}else{i=n.selection.getRange(),s=t(this,r);if(i.collapsed){if(s){var a=n.document.createTextNode("");i.insertNode(a).removeInlineStyle(r),i.setStartBefore(a),domUtils.remove(a)}else{var f=i.document.createElement(r[0]);if(e=="superscript"||e=="subscript")a=n.document.createTextNode(""),i.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(!0);i.insertNode(f).setStart(f,0)}i.collapse(!0)}else(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]);i.select()}return!0},queryCommandState:function(){return this.highlight?-1:t(this,r)?1:0}}})(r,e[r])},UE.plugins.wordcount=function(){var e=this;e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var t=e.options,n=t.maximumWords,r=t.wordCountMsg,i=t.wordOverFlowMsg;if(!t.wordCount)return;e.commands.wordcount={queryCommandValue:function(t,s){var o,u,a;return s?(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),u.length):(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),o=u.length,n-o<0?(e.fireEvent("wordcountoverflow"),i):r.replace("{#leave}",n-o>=0?n-o:0).replace("{#count}",o))}}},UE.plugins.undo=function(){function s(e){var t=this;t.collapsed=e.collapsed,t.startAddr=o(e.startContainer,e.startOffset),t.endAddr=e.collapsed?t.startAddr:o(e.endContainer,e.endOffset)}function o(e,t){for(var n=0,r=[t],i,s=domUtils.findParents(e,!0,function(e){return!domUtils.isBody(e)},!0);i=s[n++];){if(n==1&&i.nodeType==3){var o=i;while(o=o.previousSibling){if(o.nodeType!=3)break;t+=o.nodeValue.replace(fillCharReg,"").length}r[0]=t}r.push(domUtils.getNodeIndex(i,!0))}return r.reverse()}function u(e,t){if(e.length!=t.length)return 0;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return 0;return 1}function a(e,t,n){i=e.document.body;for(var r=0,i,s=n.length-1;r<s;r++)i=i.childNodes[n[r]];e[t+"Container"]=i,e[t+"Offset"]=n[n.length-1]}function f(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){var e=this.getScene(),t=this.list[this.index];t.content.replace(i,"")!=e.content.replace(i,"")&&this.save();if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var t=this.list[this.index];e.document.body.innerHTML=t.bookcontent.replace(r,"");if(browser.ie)for(var n=0,i,s=e.document.getElementsByTagName("p");i=s[n++];)i.innerHTML==""&&domUtils.fillNode(e.document,i);var o=new dom.Range(e.document);try{browser.opera||browser.safari?t.senceRange.transformRange(o):o.moveToBookmark({start:"_baidu_bookmark_start_",end:"_baidu_bookmark_end_",id:!0}),browser.ie&&browser.version==9&&o.collapsed&&domUtils.isBlockElm(o.startContainer)&&domUtils.isEmptyNode(o.startContainer)&&domUtils.fillNode(o.document,o.startContainer),o.select(!browser.gecko),!browser.opera&&!browser.safari&&setTimeout(function(){o.scrollToView(e.autoHeightEnabled,e.autoHeightEnabled?domUtils.getXY(e.iframe).y:0)},200)}catch(u){}this.update();if(e.currentSelectedArr){e.currentSelectedArr=[];var a=e.document.getElementsByTagName("td");for(var n=0,f;f=a[n++];)f.className==e.options.selectedTdClass&&e.currentSelectedArr.push(f)}this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var t=e.selection.getRange(),n=e.body.innerHTML.replace(r,"");t.shrinkBoundary(),browser.ie&&(n=n.replace(/>&nbsp;</g,"><").replace(/\s*</g,"").replace(/>\s*/g,">"));if(browser.opera||browser.safari)return{senceRange:new s(t),content:n,bookcontent:n};var i=t.createBookmark(!0,!0),o=e.body.innerHTML.replace(r,"");return i&&t.moveToBookmark(i).select(!0),{bookcontent:o,content:n}},this.save=function(){var e=this.getScene(),n=this.list[this.index];if(n&&n.content==e.content&&(browser.opera||browser.safari?n.senceRange.compare(e.senceRange):n.bookcontent==e.bookcontent))return;this.list=this.list.slice(0,this.index+1),this.list.push(e),this.list.length>t&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=this.list[this.index+1]?!0:!1,this.hasUndo=this.list[this.index-1]||this.list.length==1?!0:!1},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){h=0,p=null,e.fireEvent("contentchange")}}function l(){this.undoManger.save()}var e=this,t=e.options.maxUndoCount||20,n=e.options.maxInputCount||20,r=new RegExp(domUtils.fillChar+"|</hr>","gi"),i=/\b(?:href|src|name)="[^"]*?"/gi;s.prototype={compare:function(t){return e.collapsed!==t.collapsed?0:!u(e.startAddr,t.startAddr)||!u(e.endAddr,t.endAddr)?0:1},transformRange:function(e){var t=this;e.collapsed=t.collapsed,a(e,"start",t.startAddr),e.collapsed?e.collapse(!0):a(e,"end",t.endAddr)}},e.undoManger=new f,e.addListener("beforeexeccommand",l),e.addListener("afterexeccommand",l),e.addListener("reset",function(t,n){n||e.undoManger.reset()}),e.commands.redo=e.commands.undo={execCommand:function(t){e.undoManger[t]()},queryCommandState:function(t){return e.undoManger["has"+(t.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c={16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},h=0,p;e.addListener("keydown",function(t,r){var i=r.keyCode||r.which;if(i==229)return;if(!browser.webkit&&!c[i]&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey){if(e.undoManger.list.length==0||(i==8||i==46)&&p!=i){e.undoManger.save(!0),p=i;return}e.undoManger.list.length==2&&e.undoManger.index==0&&h==0&&(e.undoManger.list.splice(1,1),e.undoManger.update()),p=i,h++,h>=n&&e.selection.getRange().collapsed&&e.undoManger.save()}})},UE.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,n=e.selection.getRange();n.selectNodeContents(t),domUtils.isEmptyBlock(t)&&(browser.opera&&t.firstChild&&t.firstChild.nodeType==1&&n.setStartAtFirst(t.firstChild),n.collapse(!0)),n.select(!0),this.selectAll=!0},notNeedUndo:1},e.addListener("ready",function(){domUtils.on(e.document,"click",function(t){e.selectAll=!1})})},UE.plugins.keystrokes=function(){var e=this,t=0,n=domUtils.keys,r={B:"strong",I:"em",FONT:"span"},i=[0,10,12,16,18,24,32,48],s={OL:["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman"],UL:["circle","disc","square"]};e.addListener("keydown",function(n,r){var i=r.keyCode||r.which;if(this.selectAll){this.selectAll=!1;if(i==8||i==46){e.undoManger&&e.undoManger.save(),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",(new dom.Range(e.document)).setStart(e.body.firstChild,0).setCursor(!1,!0),e.undoManger&&e.undoManger.save(),browser.ie&&e._selectionChange(),domUtils.preventDefault(r);return}}if(i==8){var o=e.selection.getRange(),u,a,f;if(o.collapsed){a=o.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);if(domUtils.isEmptyNode(a)&&a===e.body.firstChild){a.tagName!="P"&&(p=e.document.createElement("p"),e.body.insertBefore(p,a),domUtils.fillNode(e.document,p),o.setStart(p,0).setCursor(!1,!0),domUtils.remove(a)),domUtils.preventDefault(r);return}}o.collapsed&&o.startContainer.nodeType==3&&o.startContainer.nodeValue.replace(new RegExp(domUtils.fillChar,"g"),"").length==0&&o.setStartBefore(o.startContainer).collapse(!0);if(a=o.getClosedNode()){e.undoManger&&e.undoManger.save(),o.setStartBefore(a),domUtils.remove(a),o.setCursor(),e.undoManger&&e.undoManger.save(),domUtils.preventDefault(r);return}if(!browser.ie){a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a&&!f||!a&&f||a!==f){r.preventDefault();return}}e.undoManger&&(o.collapsed||(e.undoManger.save(),t=1))}if(i==9){o=e.selection.getRange(),e.undoManger&&e.undoManger.save();for(var l=0,c="",h=e.options.tabSize||4,d=e.options.tabNode||"&nbsp;";l<h;l++)c+=d;var v=e.document.createElement("span");v.innerHTML=c;if(o.collapsed){var m=domUtils.findParentByTagName(o.startContainer,"li",!0);if(m&&domUtils.isStartInblock(o)){w=o.createBookmark();var g=m.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type"));b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),g.insertBefore(y,m),y.appendChild(m),o.moveToBookmark(w).select()}else o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0)}else{a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParentByTagName(o.startContainer,["ol","ul"],!0),f=domUtils.findParentByTagName(o.endContainer,["ol","ul"],!0);if(a&&f&&a===f){var w=o.createBookmark();a=domUtils.findParentByTagName(o.startContainer,"li",!0),f=domUtils.findParentByTagName(o.endContainer,"li",!0);if(a===a.parentNode.firstChild){var E=e.document.createElement(a.parentNode.tagName);a.parentNode.parentNode.insertBefore(E,a.parentNode),E.appendChild(a.parentNode)}else{g=a.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type")),b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),a.parentNode.insertBefore(y,a);var S;while(a!==f)S=a.nextSibling,y.appendChild(a),a=S;y.appendChild(f)}o.moveToBookmark(w).select()}else{if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParent(o.startContainer,T),f=domUtils.findParent(o.endContainer,T);if(a&&f&&a===f)o.deleteContents(),o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var x=o.createBookmark(),T=function(e){return domUtils.isBlockElm(e)};o.enlarge(!0);var N=o.createBookmark(),C=domUtils.getNextDomNode(N.start,!1,T);while(C&&!(domUtils.getPosition(C,N.end)&domUtils.POSITION_FOLLOWING))C.insertBefore(v.cloneNode(!0).firstChild,C.firstChild),C=domUtils.getNextDomNode(C,!1,T);o.moveToBookmark(N).moveToBookmark(x).select()}}}e.undoManger&&e.undoManger.save(),r.preventDefault?r.preventDefault():r.returnValue=!1}if(browser.gecko&&i==46){o=e.selection.getRange();if(o.collapsed){a=o.startContainer;if(domUtils.isEmptyBlock(a)){var k=a.parentNode;while(domUtils.getChildCount(k)==1&&!domUtils.isBody(k))a=k,k=k.parentNode;a===k.lastChild&&r.preventDefault();return}}}}),e.addListener("keyup",function(s,o){var u=o.keyCode||o.which;if(!browser.gecko&&!n[u]&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){v=e.selection.getRange();if(v.collapsed){var a=v.startContainer,f=0;while(!domUtils.isBlockElm(a)){if(a.nodeType==1&&utils.indexOf(["FONT","B","I"],a.tagName)!=-1){var l=e.document.createElement(r[a.tagName]);a.tagName=="FONT"&&(l.style.cssText=(a.getAttribute("size")?"font-size:"+(i[a.getAttribute("size")]||12)+"px":"")+";"+(a.getAttribute("color")?"color:"+a.getAttribute("color"):"")+";"+(a.getAttribute("face")?"font-family:"+a.getAttribute("face"):"")+";"+a.style.cssText);while(a.firstChild)l.appendChild(a.firstChild);a.parentNode.insertBefore(l,a),domUtils.remove(a),f||v.setEnd(l,l.childNodes.length).collapse(!0),a=l,f=1}a=a.parentNode}f&&v.select()}}if(u==8){if(browser.gecko)for(var c=0,h,p=domUtils.getElementsByTagName(this.body,"li");h=p[c++];)if(domUtils.isEmptyNode(h)&&!h.previousSibling){var d=h.parentNode;domUtils.remove(h),domUtils.isEmptyNode(d)&&domUtils.remove(d)}var v,a,m,g=this.currentSelectedArr;if(g&&g.length>0){for(var c=0,y;y=g[c++];)y.innerHTML=browser.ie?browser.version<9?"&#65279":"":"<br/>";v=new dom.Range(this.document),v.setStart(g[0],0).setCursor(),t&&(e.undoManger.save(),t=0),browser.webkit&&o.preventDefault();return}v=e.selection.getRange(),a=v.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);var b=0;while(a.nodeType==1&&domUtils.isEmptyNode(a)&&dtd.$removeEmpty[a.tagName])b=1,m=a.parentNode,domUtils.remove(a),a=m;if(b&&a.nodeType==1&&domUtils.isEmptyNode(a)){if(browser.ie){var w=v.document.createElement("span");a.appendChild(w),v.setStart(a,0).setCursor(),h=domUtils.findParentByTagName(a,"li",!0);if(h){var E=h.nextSibling;while(E){if(domUtils.isEmptyBlock(E)){h=E,E=E.nextSibling,domUtils.remove(h);continue}break}}}else a.innerHTML="<br/>",v.setStart(a,0).setCursor(!1,!0);setTimeout(function(){browser.ie&&domUtils.remove(w),t&&(e.undoManger.save(),t=0)},0)}else t&&(e.undoManger.save(),t=0)}})},UE.plugins.serialize=function(){function n(e){return/pt/.test(e)?e.replace(/([\d.]+)pt/g,function(e){return Math.round(parseFloat(e)*96/72)+"px"}):e}function v(e,t){var n=[0,10,12,16,18,24,32,48],s,o=utils.indexOf;switch(e.tag){case"script":e.tag="div",e.attributes._ue_div_script=1,e.attributes._ue_script_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"style":e.tag="div",e.attributes._ue_div_style=1,e.attributes._ue_style_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"img":if(e.attributes.src&&/^data:/.test(e.attributes.src))return{type:"fragment",children:[]};if(e.attributes.src&&/^(?:file)/.test(e.attributes.src)){if(!/(gif|bmp|png|jpg|jpeg)$/.test(e.attributes.src))return{type:"fragment",children:[]};e.attributes.word_img=e.attributes.src,e.attributes.src=r.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";var u=parseInt(e.attributes.width)<128||parseInt(e.attributes.height)<43;e.attributes.style="background:url("+(u?r.options.UEDITOR_HOME_URL+"themes/default/images/word.gif":r.options.langPath+r.options.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd",t&&(t.flag=1)}browser.ie&&browser.version<7&&(e.attributes.orgSrc=e.attributes.src),e.attributes.data_ue_src=e.attributes.data_ue_src||e.attributes.src;break;case"li":var a=e.children[0];if(!a||a.type!="element"||a.tag!="p"&&dtd.p[a.tag]){var f={type:"element",tag:"p",attributes:{},parent:e};f.children=a?e.children:[browser.ie?{type:"text",data:domUtils.fillChar,parent:f}:{type:"element",tag:"br",attributes:{},closed:!0,children:[],parent:f}],e.children=[f]}break;case"table":case"td":m(e);break;case"a":e.attributes.anchorname&&(e.tag="img",e.attributes={"class":"anchorclass",anchorname:e.attributes.name},e.closed=1),e.attributes.href&&(e.attributes.data_ue_src=e.attributes.href);break;case"b":e.tag=e.name="strong";break;case"i":e.tag=e.name="em";break;case"u":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:underline;";break;case"s":case"del":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:line-through;",e.children.length==1&&(a=e.children[0],a.tag==e.tag&&(e.attributes.style+=";"+a.attributes.style,e.children=a.children));break;case"span":var l=e.attributes.style;l&&(!e.attributes.style||browser.webkit&&l=="white-space:nowrap;")&&delete e.attributes.style;if(browser.gecko&&browser.version<=10902&&e.parent){var c=e.parent;c.tag=="span"&&c.attributes&&c.attributes.style&&(e.attributes.style=c.attributes.style+";"+e.attributes.style)}utils.isEmptyObject(e.attributes)&&i&&(e.type="fragment");break;case"font":e.tag=e.name="span",s=e.attributes,e.attributes={style:(s.size?"font-size:"+(n[s.size]||12)+"px":"")+";"+(s.color?"color:"+s.color:"")+";"+(s.face?"font-family:"+s.face:"")+";"+(s.style||"")};while(e.parent.tag==e.tag&&e.parent.children.length==1)e.attributes.style&&(e.parent.attributes.style?e.parent.attributes.style+=";"+e.attributes.style:e.parent.attributes.style=e.attributes.style),e.parent.children=e.children,e=e.parent;break;case"p":e.attributes.align&&(e.attributes.style=(e.attributes.style||"")+";text-align:"+e.attributes.align+";",delete e.attributes.align)}return e}function m(t){if(e&&t.attributes.style){var n=t.attributes.style;t.attributes.style=n.replace(/;\s*/g,";"),t.attributes.style=t.attributes.style.replace(/^\s*|\s*$/,"")}}function g(t){switch(t.tag){case"div":t.attributes._ue_div_script&&(t.tag="script",t.children=[{type:"cdata",data:t.attributes._ue_script_data?decodeURIComponent(t.attributes._ue_script_data):"",parent:t}],delete t.attributes._ue_div_script,delete t.attributes._ue_script_data,delete t.attributes._ue_custom_node_),t.attributes._ue_div_style&&(t.tag="style",t.children=[{type:"cdata",data:t.attributes._ue_style_data?decodeURIComponent(t.attributes._ue_style_data):"",parent:t}],delete t.attributes._ue_div_style,delete t.attributes._ue_style_data,delete t.attributes._ue_custom_node_);break;case"table":!t.attributes.style&&delete t.attributes.style,e&&t.attributes.style&&m(t),t.attributes["class"]=="noBorderTable"&&delete t.attributes["class"];break;case"td":case"th":if(/display\s*:\s*none/i.test(t.attributes.style))return{type:"fragment",children:[]};if(e&&!t.children.length){var n={type:"text",data:domUtils.fillChar,parent:t};t.children[0]=n}e&&t.attributes.style&&m(t),t.attributes["class"]=="selectTdClass"&&delete t.attributes["class"];break;case"img":t.attributes.anchorname?(t.tag="a",t.attributes={name:t.attributes.anchorname,anchorname:1},t.closed=null):t.attributes.data_ue_src&&(t.attributes.src=t.attributes.data_ue_src,delete t.attributes.data_ue_src);break;case"a":t.attributes.data_ue_src&&(t.attributes.href=t.attributes.data_ue_src,delete t.attributes.data_ue_src)}return t}function y(e,t,n){if(!e.children||!e.children.length)return e;var r=e.children;for(var i=0;i<r.length;i++){var s=t(r[i],n);if(s.type=="fragment"){var o=[i,1];o.push.apply(o,s.children),r.splice.apply(r,o),r.length||(e={type:"fragment",children:[]}),i--}else r[i]=s}return e}function b(e){this.rules=e}var e=browser.ie,t=browser.version,r=this,i=r.options.autoClearEmptyNode,s=dtd.$empty,o=function(){function f(s,u){var a,f=0,l,c;n.exec("");while(a=n.exec(s)){var h=a.index;if(h>f){var p=s.slice(f,h);c?c.push(p):u.onText(p)}f=n.lastIndex;if(l=a[1]){l=l.toLowerCase(),c&&l==c._tag_name&&(u.onCDATA(c.join("")),c=null);if(!c){u.onTagClose(l);continue}}if(c){c.push(a[0]);continue}if(l=a[3]){if(/="/.test(l))continue;l=l.toLowerCase();var d=a[4],v,m={},g=d&&d.slice(-1)=="/";if(d){r.exec("");while(v=r.exec(d)){var y=v[1].toLowerCase(),b=v[2]||v[3]||v[4]||"";!b&&i[y]&&(b=y),y=="style"&&e&&t<=6&&(b=b.replace(/(?!;)\s*([\w-]+):/g,function(e,t){return t.toLowerCase()+":"})),b&&(m[y]=b.replace(/:\s*/g,":"))}}u.onTagOpen(l,m,g),!c&&o[l]&&(c=[],c._tag_name=l);continue}(l=a[2])&&u.onComment(l)}s.length>f&&u.onText(s.slice(f,s.length))}var n=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,r=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,i={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},o={script:1,style:1},u={li:{$:"ul",ul:1,ol:1},dd:{$:"dl",dl:1},dt:{$:"dl",dl:1},option:{$:"select",select:1},td:{$:"tr",tr:1},th:{$:"tr",tr:1},tr:{$:"tbody",tbody:1,thead:1,tfoot:1,table:1},tbody:{$:"table",table:1,colgroup:1},thead:{$:"table",table:1},tfoot:{$:"table",table:1},col:{$:"colgroup",colgroup:1}},a={table:"td",tbody:"td",thead:"td",tfoot:"td",tr:"td",colgroup:"col",ul:"li",ol:"li",dl:"dd",select:"option"};return function(e,t){function i(e){e.parent=r,r.children.push(e)}function o(e,n){var i=e;if(u[i.tag]){while(u[r.tag]&&u[r.tag][i.tag])r=r.parent;r.tag==i.tag&&(r=r.parent);while(u[i.tag]){if(u[i.tag][r.tag])break;i=i.parent={type:"element",tag:u[i.tag].$,attributes:{},children:[i]}}}if(t)while(dtd[i.tag]&&!(r.tag=="span"?utils.extend(dtd.strong,{a:1,A:1}):dtd[r.tag]||dtd.div)[i.tag]){if(l(r))continue;if(!r.parent)break;r=r.parent}return i.parent=r,r.children.push(i),n&&(r=e),e.attributes.style&&(e.attributes.style=e.attributes.style.toLowerCase()),e}function l(e){var t;return!e.children.length&&(t=a[e.tag])?(o({type:"element",tag:t,attributes:{},children:[]},!0),!0):!1}var n={type:"fragment",parent:null,children:[]},r=n;f(e,{onText:function(e){while(!(dtd[r.tag]||dtd.div)["#"]){if(l(r))continue;r=r.parent}i({type:"text",data:e})},onComment:function(e){i({type:"comment",data:e})},onCDATA:function(e){while(!(dtd[r.tag]||dtd.div)["#"]){if(l(r))continue;r=r.parent}i({type:"cdata",data:e})},onTagOpen:function(e,t,n){n=n||s[e],o({type:"element",tag:e,attributes:t,closed:n,children:[]},!n)},onTagClose:function(e){var t=r;while(t&&e!=t.tag)t=t.parent;if(t){for(var n=r;n!==t.parent;n=n.parent)l(n);r=t.parent}else!dtd.$removeEmpty[e]&&!dtd.$removeEmptyBlock[e]&&e!="embed"&&(t={type:"element",tag:e,attributes:{},children:[]},o(t,!0),l(t),r=t.parent)}});while(r!==n)l(r),r=r.parent;return n}}(),u=function(){function t(t){return e[t]}var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(e){return e+="",e?e.replace(/[<>"']/g,t):""}}(),a=function(){function e(e,t){var n=e.children,r=[];for(var i=0,s;s=n[i];i++)r.push(a(s,t));return r.join("")}function t(e){var t=[];for(var r in e){var i=e[r];r=="style"&&(i=n(i),/rgba?\s*\([^)]*\)/.test(i)&&(i=i.replace(/rgba?\s*\(([^)]*)\)/g,function(e){return utils.fixColor("color",e)})),e[r]=utils.optCss(i.replace(/windowtext/g,"#000")).replace(/white-space[^;]+;/g,"")),t.push(r+'="'+u(e[r])+'"')}return t.join(" ")}function r(e,t){return t?e.data.replace(/&nbsp;/g," "):u(e.data).replace(/ /g,"&nbsp;")}function f(n,r){if(n.type=="element"&&!n.children.length&&dtd.$removeEmpty[n.tag]&&n.tag!="a"&&utils.isEmptyObject(n.attributes)&&i)return f;var u=n.tag;if(r&&u=="td")f||(f=""),f+=e(n,r)+"&nbsp;&nbsp;&nbsp;";else{var a=t(n.attributes),f="<"+(r&&o[u]?o[u]:u)+(a?" "+a:"")+(s[u]?" />":">");s[u]||(u=="p"&&!n.children.length&&(f+=browser.ie?"&nbsp;":"<br/>"),f+=e(n,r),f+="</"+(r&&o[u]?o[u]:u)+">")}return f}var o={div:"p",li:"p",tr:"p",br:"br",p:"p"};return function(t,n){return t.type=="fragment"?e(t,n):t.type=="element"?f(t,n):t.type=="text"||t.type=="cdata"?r(t,dtd.$notTransContent[t.parent.tag]):t.type=="comment"?"<!--"+t.data+"-->":""}}(),f=function(){function e(e){var t=new RegExp(/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig);return t.test(e)}function t(e){return e=e.replace(/([\d.]+)([\w]+)?/g,function(e,t,n){return(Math.round(parseFloat(t))||1)+(n||"px")}),e}function r(e){return e=e.replace(/<!--\s*EndFragment\s*-->[\s\S]*$/,"").replace(/^(\r\n|\n|\r)|(\r\n|\n|\r)$/ig,"").replace(/^\s*(&nbsp;)+/ig,"").replace(/(&nbsp;|<br[^>]*>)+\s*$/ig,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera)return"";try{var t=e.match(/width:([ \d.]*p[tx])/i)[1],r=e.match(/height:([ \d.]*p[tx])/i)[1],i=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+n(t)+'" height="'+n(r)+'" src="'+i+'" />'}catch(s){return""}}).replace(/v:\w+=["']?[^'"]+["']?/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/(lang)\s*=\s*([\'\"]?)[\w-]+\2/ig,"").replace(/<font[^>]*>\s*<\/font>/gi,"").replace(/class\s*=\s*["']?(?:(?:MsoTableGrid)|(?:MsoListParagraph)|(?:MsoNormal(Table)?))\s*["']?/gi,""),e=e.replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,n,r,i){var s=[],o=0,u=i.replace(/^\s+|\s+$/,"").replace(/&quot;/gi,"'").split(/;\s*/g);for(var o=0;o<u.length;o++){var a=u[o],f,l,c=a.split(":");if(c.length==2){f=c[0].toLowerCase(),l=c[1].toLowerCase();switch(f){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(n)||(s[o]=f.replace(/^mso-|-alt$/g,"")+":"+t(l));continue;case"horiz-align":s[o]="text-align:"+l;continue;case"vert-align":s[o]="vertical-align:"+l;continue;case"font-color":case"mso-foreground":s[o]="color:"+l;continue;case"mso-background":case"mso-highlight":s[o]="background:"+l;continue;case"mso-default-height":s[o]="min-height:"+t(l);continue;case"mso-default-width":s[o]="min-width:"+t(l);continue;case"mso-padding-between-alt":s[o]="border-collapse:separate;border-spacing:"+t(l);continue;case"text-line-through":if(l=="single"||l=="double")s[o]="text-decoration:line-through";continue;case"mso-zero-height":l=="yes"&&(s[o]="display:none");continue;case"margin":if(!/[1-9]/.test(c[1]))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(f))continue;if(/text\-indent|padding|margin/.test(f)&&/\-[\d.]+/.test(l))continue;s[o]=f+":"+c[1]}}return o>0?n+' style="'+s.join(";")+'"':n}),e=e.replace(/([ ]+)<\/span>/ig,function(e,t){return(new Array(t.length+1)).join("&nbsp;")+"</span>"}),e}return function(t){return c=null,h="",p="",d="",e(t)&&(t=r(t)),t.replace(/>[ \t\r\n]*</g,"><")}}(),l={text:"#text",comment:"#comment",cdata:"#cdata-section",fragment:"#document-fragment"},c,h="",p="",d;b.prototype={rules:null,filter:function(e,t,n){function s(e,t){e.name=e.type=="element"?e.tag:l[e.type];if(t==null)return y(e,s,e);if(i&&i[e.name])return n&&(n.flag=1),{type:"fragment",children:[]};if(r&&e.type=="element")if(t.type=="fragment"?r[e.name]:r[e.name]&&r[t.name][e.name]){var o;if(o=r[e.name].$){var u=e.attributes,a={};for(var f in o)u[f]&&(a[f]=u[f]);e.attributes=a}}else n&&(n.flag=1),e.type="fragment",e.name=t.name;return(i||r)&&y(e,s,e),e}t=t||this.rules;var r=t&&t.whiteList,i=t&&t.blackList;return s(e,null)},transformInput:function(e,t){function n(e){return e=v(e,t),e=y(e,n,e),r.options.pageBreakTag&&e.type=="text"&&e.data.replace(/\s/g,"")==r.options.pageBreakTag&&(e.type="element",e.name=e.tag="hr",delete e.data,e.attributes={"class":"pagebreak",noshade:"noshade",size:"5",unselectable:"on",style:"moz-user-select:none;-khtml-user-select: none;"},e.children=[]),e.type=="text"&&!dtd.$notTransContent[e.parent.tag]&&(e.data=e.data.replace(/[\r\t\n]*/g,"")),e}return n(e)},transformOutput:function(e){function t(e){e.tag=="hr"&&e.attributes["class"]=="pagebreak"&&(delete e.tag,e.type="text",e.data=r.options.pageBreakTag,delete e.children),e=g(e);if(e.tag=="ol"||e.tag=="ul")c=1;e=y(e,t,e);if(e.tag=="ol"||e.tag=="ul")c=0;return e}return t(e)},toHTML:a,parseHTML:o,word:f},r.serialize=new b(r.options.serialize||{}),UE.serialize=new b({})},function(){function e(e){var t=this.document;if(t.getElementById("baidu_pastebin"))return;var n=this.selection.getRange(),r=n.createBookmark(),i=t.createElement("div");i.id="baidu_pastebin",browser.webkit&&i.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar)),t.body.appendChild(i),r.start.style.display="",i.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(r.start).y+"px",n.selectNodeContents(i).select(!0),setTimeout(function(){if(browser.webkit)for(var s=0,o=t.querySelectorAll("#baidu_pastebin"),u;u=o[s++];){if(!domUtils.isEmptyNode(u)){i=u;break}domUtils.remove(u)}try{i.parentNode.removeChild(i)}catch(a){}n.moveToBookmark(r).select(!0),e(i)},0)}UE.plugins.paste=function(){function s(e){var s;if(e.firstChild){var o=domUtils.getElementsByTagName(e,"span");for(var u=0,a;a=o[u++];)(a.id=="_baidu_cut_start"||a.id=="_baidu_cut_end")&&domUtils.remove(a);if(browser.webkit){var f=e.querySelectorAll("div br");for(var u=0,l;l=f[u++];){var c=l.parentNode;c.tagName=="DIV"&&c.childNodes.length==1&&(c.innerHTML="<p><br/></p>",domUtils.remove(c))}var h=e.querySelectorAll("#baidu_pastebin");for(var u=0,p;p=h[u++];){var d=t.document.createElement("p");p.parentNode.insertBefore(d,p);while(p.firstChild)d.appendChild(p.firstChild);domUtils.remove(p)}var v=e.querySelectorAll("meta");for(var u=0,m;m=v[u++];)domUtils.remove(m);var f=e.querySelectorAll("br");for(u=0;m=f[u++];)/^apple-/.test(m)&&domUtils.remove(m)}if(browser.gecko){var g=e.querySelectorAll("[_moz_dirty]");for(u=0;m=g[u++];)m.removeAttribute("_moz_dirty")}if(!browser.ie){var y=e.querySelectorAll("span.apple-style-span");for(var u=0,m;m=y[u++];)domUtils.remove(m,!0)}s=e.innerHTML;var b=t.serialize;if(b)try{var w=b.transformInput(b.parseHTML(b.word(s)),n);w=b.filter(w,r?{whiteList:{p:{br:1,BR:1,$:{}},br:{$:{}},div:{br:1,BR:1,$:{}},li:{$:{}},tr:{td:1,$:{}},td:{$:{}}},blackList:{style:1,script:1,object:1}}:null,r?null:i);if(browser.webkit){var E=w.children.length,S;while((S=w.children[E-1])&&S.tag=="br")w.children.splice(E-1,1),E=w.children.length}s=b.toHTML(w,r)}catch(x){}s={html:s},t.fireEvent("beforepaste",s),t.execCommand("insertHtml",s.html,!0),t.fireEvent("afterpaste")}}var t=this,n={flag:""},r=t.options.pasteplain===!0,i={flag:""};t.commands.pasteplain={queryCommandState:function(){return r},execCommand:function(){r=!r|0},notNeedUndo:1},t.addListener("ready",function(){domUtils.on(t.body,"cut",function(){var e=t.selection.getRange();!e.collapsed&&t.undoManger&&t.undoManger.save()}),domUtils.on(t.body,browser.ie||browser.opera?"keydown":"paste",function(n){if(!(!browser.ie&&!browser.opera||!!n.ctrlKey&&n.keyCode=="86"))return;e.call(t,function(e){s(e)})})})}}(),UE.plugins.fiximgclick=function(){var e=this;browser.webkit&&e.addListener("click",function(t,n){if(n.target.tagName=="IMG"){var r=new dom.Range(e.document);r.selectNode(n.target).select()}})},UE.plugins.enterkey=function(){var e,t=this,n=t.options.enterTag;t.addListener("keyup",function(n,r){var i=r.keyCode||r.which;if(i==13){var s=t.selection.getRange(),o=s.startContainer,u;if(!browser.ie){if(/h\d/i.test(e)){if(browser.gecko){var a=domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote"],!0);a||(t.document.execCommand("formatBlock",!1,"<p>"),u=1)}else if(o.nodeType==1){var f=t.document.createTextNode(""),l;s.insertNode(f),l=domUtils.findParentByTagName(f,"div",!0);if(l){var c=t.document.createElement("p");while(l.firstChild)c.appendChild(l.firstChild);l.parentNode.insertBefore(c,l),domUtils.remove(l),s.setStartBefore(f).setCursor(),u=1}domUtils.remove(f)}t.undoManger&&u&&t.undoManger.save()}browser.opera&&s.select()}setTimeout(function(){t.selection.getRange().scrollToView(t.autoHeightEnabled,t.autoHeightEnabled?domUtils.getXY(t.iframe).y:0)},50)}}),t.addListener("keydown",function(r,i){var s=i.keyCode||i.which;if(s==13){t.undoManger&&t.undoManger.save(),e="";var o=t.selection.getRange();if(!o.collapsed){var u=o.startContainer,a=o.endContainer,f=domUtils.findParentByTagName(u,"td",!0),l=domUtils.findParentByTagName(a,"td",!0);if(f&&l&&f!==l||!f&&l||f&&!l){i.preventDefault?i.preventDefault():i.returnValue=!1;return}}t.currentSelectedArr&&domUtils
.clearSelectedArr(t.currentSelectedArr);if(n=="p")browser.ie||(u=domUtils.findParentByTagName(o.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote"],!0),!u&&!browser.opera?(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(o=t.selection.getRange(),u=domUtils.findParentByTagName(o.startContainer,"p",!0),u&&domUtils.removeDirtyAttr(u))):(e=u.tagName,u.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(u)));else{i.preventDefault?i.preventDefault():i.returnValue=!1;if(!o.collapsed){o.deleteContents(),u=o.startContainer;if(u.nodeType==1&&(u=u.childNodes[o.startOffset])){while(u.nodeType==1){if(dtd.$empty[u.tagName])return o.setStartBefore(u).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!u.firstChild){var c=o.document.createElement("br");return u.appendChild(c),o.setStart(u,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}u=u.firstChild}u===o.startContainer.childNodes[o.startOffset]?(c=o.document.createElement("br"),o.insertNode(c).setCursor()):o.setStart(u,0).setCursor()}else c=o.document.createElement("br"),o.insertNode(c).setStartAfter(c).setCursor()}else{c=o.document.createElement("br"),o.insertNode(c);var h=c.parentNode;h.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),o.setStartBefore(c)):o.setStartAfter(c),o.setCursor()}}}})},UE.commands["delete"]={execCommand:function(){var e=this.selection.getRange(),t=0,n=0,r=this;if(this.selectAll){r.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).setCursor(!1,!0),r.selectAll=!1;return}if(r.currentSelectedArr&&r.currentSelectedArr.length>0){for(var i=0,s;s=r.currentSelectedArr[i++];)s.style.display!="none"&&(s.innerHTML=browser.ie?domUtils.fillChar:"<br/>");e.setStart(r.currentSelectedArr[0],0).setCursor();return}if(e.collapsed)return;e.txtToElmBoundary();while(!e.startOffset&&!domUtils.isBody(e.startContainer)&&!dtd.$tableContent[e.startContainer.tagName])t=1,e.setStartBefore(e.startContainer);while(e.endContainer.nodeType!=3&&!domUtils.isBody(e.endContainer)&&!dtd.$tableContent[e.endContainer.tagName]){var o,u=e.endContainer,a=e.endOffset;o=u.childNodes[a];if(!o||domUtils.isBr(o)&&u.lastChild===o){e.setEndAfter(u);continue}break}if(t){var f=r.document.createElement("span");f.innerHTML="start",f.id="_baidu_cut_start",e.insertNode(f).setStartBefore(f)}if(n){var l=r.document.createElement("span");l.innerHTML="end",l.id="_baidu_cut_end",e.cloneRange().collapse(!1).insertNode(l),e.setEndAfter(l)}e.deleteContents(),domUtils.isBody(e.startContainer)&&domUtils.isEmptyBlock(r.body)?(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).collapse(!0)):!browser.ie&&domUtils.isEmptyBlock(e.startContainer)&&(e.startContainer.innerHTML="<br/>"),e.select(!0)},queryCommandState:function(){return this.currentSelectedArr&&this.currentSelectedArr.length>0?0:this.highlight||this.selection.getRange().collapsed?-1:0}},UE.commands.inserthtml={execCommand:function(e,t,n){var r=this,i,s,o=r.currentSelectedArr;i=r.selection.getRange(),s=i.document.createElement("div"),s.style.display="inline";var u=r.serialize;if(!n&&u){var a=u.parseHTML(t);a=u.transformInput(a),a=u.filter(a),t=u.toHTML(a)}s.innerHTML=utils.trim(t);try{r.adjustTable&&r.adjustTable(s)}catch(f){}if(o&&o.length){for(var l=0,c;c=o[l++];)c.className="";o[0].innerHTML="",i.setStart(o[0],0).collapse(!0),r.currentSelectedArr=[]}if(!i.collapsed){i.deleteContents();if(i.startContainer.nodeType==1){var h=i.startContainer.childNodes[i.startOffset],p;if(h&&domUtils.isBlockElm(h)&&(p=h.previousSibling)&&domUtils.isBlockElm(p)){i.setEnd(p,p.childNodes.length).collapse();while(h.firstChild)p.appendChild(h.firstChild);domUtils.remove(h)}}}var h,d,p,v,m=0,g=s.firstChild;while(h=s.firstChild){i.insertNode(h);if(!m&&h.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(h)){d=domUtils.findParent(h,function(e){return domUtils.isBlockElm(e)});if(d&&d.tagName.toLowerCase()!="body"&&(!dtd[d.tagName][h.nodeName]||h.parentNode!==d)){if(!dtd[d.tagName][h.nodeName])p=d;else{v=h.parentNode;while(v!==d)p=v,v=v.parentNode}domUtils.breakParent(h,p||v);var p=h.previousSibling;domUtils.trimWhiteTextNode(p),p.childNodes.length||domUtils.remove(p),!browser.ie&&(y=h.nextSibling)&&domUtils.isBlockElm(y)&&y.lastChild&&!domUtils.isBr(y.lastChild)&&y.appendChild(r.document.createElement("br")),m=1}}var y=h.nextSibling;if(!s.firstChild&&y&&domUtils.isBlockElm(y)){i.setStart(y,0).collapse(!0);break}i.setEndAfter(h).collapse()}return h=i.startContainer,domUtils.isBlockElm(h)&&domUtils.isEmptyNode(h)&&(h.innerHTML=browser.ie?"":"<br/>"),i.select(!0),setTimeout(function(){i=r.selection.getRange(),i.scrollToView(r.autoHeightEnabled,r.autoHeightEnabled?domUtils.getXY(r.iframe).y:0)},200),g}},UE.plugins.autoheight=function(){function a(t){edge?e.document.body.style.overflowY="auto":(clearTimeout(o),o=setTimeout(function(){e.queryCommandState("source")!=1&&(n||(n=e.document.createElement("span"),n.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;",n.innerHTML="."),r=n.cloneNode(!0),e.body.appendChild(r),s=Math.max(domUtils.getXY(r).y+r.offsetHeight,e.options.minFrameHeight),u>0&&s>u?(e.body.style.overflowY="",e.setHeight(u),i=u,e.autoHeightEnabled=!1):(e.document.body.style.overflowY="hidden",s!=i&&(e.setHeight(s),i=s),e.autoHeightEnabled=!0),domUtils.remove(r))},50))}var e=this;e.autoHeightEnabled=e.options.autoHeightEnabled!==!1;if(!e.autoHeightEnabled)return;var t,n,r,i=0,s,o,u=e.options.autoHeightMax||0;e.adjustHeight=a,e.addListener("destroy",function(){e.removeListener("contentchange",a),e.removeListener("keyup",a),e.removeListener("mouseup",a)}),e.enableAutoHeight=function(){if(!e.autoHeightEnabled)return;var n=e.document;e.autoHeightEnabled=!0,t=n.body.style.overflowY,n.body.style.overflowY="hidden",e.addListener("contentchange",a),e.addListener("keyup",a),e.addListener("mouseup",a),setTimeout(function(){a()},browser.gecko?100:0),e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.disableAutoHeight=function(){e.body.style.overflowY=t||"",e.removeListener("contentchange",a),e.removeListener("keyup",a),e.removeListener("mouseup",a),e.autoHeightEnabled=!1,e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.addListener("ready",function(){e.enableAutoHeight();var t;domUtils.on(browser.ie?e.body:e.document,browser.webkit?"dragover":"drop",function(){clearTimeout(t),t=setTimeout(function(){a()},100)})})},UE.I18N["zh-cn"]={labelMap:{},insertorderedlist:{},insertunorderedlist:{},paragraph:{},fontfamily:{},customstyle:{},elementPathTip:"\u5143\u7d20\u8def\u5f84",wordCountTip:"\u5b57\u6570\u7edf\u8ba1",wordCountMsg:"\u5f53\u524d\u5df2\u8f93\u5165{#count}\u4e2a\u5b57\u7b26, \u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165{#leave}\u4e2a\u5b57\u7b26\u3002 ",wordOverFlowMsg:'<span style="color:red;">\u60a8\u5df2\u7ecf\u8d85\u8fc7\u6700\u5927\u5b57\u7b26!</span>',ok:"\u786e\u8ba4",cancel:"\u53d6\u6d88",closeDialog:"\u5173\u95ed\u5bf9\u8bdd\u6846",confirmClear:"\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6587\u6863\u4e48\uff1f",anthorMsg:"\u94fe\u63a5",clearColor:"\u6e05\u7a7a\u989c\u8272",standardColor:"\u6807\u51c6\u989c\u8272",themeColor:"\u4e3b\u9898\u989c\u8272",property:"\u5c5e\u6027","default":"\u9ed8\u8ba4",modify:"\u4fee\u6539",justifyleft:"\u5de6\u5bf9\u9f50",justifyright:"\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justify:"\u9ed8\u8ba4",clear:"\u6e05\u9664",anchorMsg:"\u951a\u70b9","delete":"\u5220\u9664",clickToUpload:"\u70b9\u51fb\u4e0a\u4f20",unset:"\u5c1a\u672a\u8bbe\u7f6e\u8bed\u8a00\u6587\u4ef6",t_row:"\u884c",t_col:"\u5217",more:"\u66f4\u591a"},$.extend(namespace("Wenda.Editor"),function(){function r(t){function a(e,t){var n=e.replace(/\s+/g,"");/^[\u4E00-\u9FA5]+$/.test(n)||(/(q|Q).{0,5}\d{5}/.test(n)||/[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+/.test(n)||/(\u624b\u673a|\u7535\u8bdd).{0,5}\d{10}/.test(n))&&t&&t()}function f(){window.FormData?($(".add-img-html5").show(),$(".add-img").hide(),Wenda.FileUpload.makeHtml5(o)):($(".add-img-html5").hide(),$(".add-img").show(),Wenda.FileUpload.makeFlash(o))}function l(){s.sync();var e=new RegExp("[\r	\n]","g"),t=s.getContentTxt().replace(e,"");return t}function c(){s.sync();var e=s.getContent();return e}function h(e){s.setContent(e,!0)}function p(){var e=c();return!e||e==o.hintText.replace("<br/>","")?($(r).triggerHandler("checkempty"),!0):!1}function d(){var e=l();return e.length>o.max?!0:!1}function v(){var e=p(),t=d();return e||t?!1:Wenda.FileUpload.checkLoadingImg(s)?!0:!1}function m(){$(i.body).focus()}function g(){s.destroy(),~(window.FormData||"").toString().indexOf("native code")&&o.input.off("change")}var r={},i=null,s=null,o=$.extend(!0,{},n,t||{});if(!o.container.length)return!1;var u=$.extend(!0,{},o.editor_opt,{initialContent:o.hintText,onFocusfun:function(){$(r).triggerHandler("focus")},onBlurfun:function(){$(r).triggerHandler("blur")}}),s=new UE.ui.Editor(u);return s.ready(function(){i=s.iframe.contentWindow.document,$(i).on("keydown",function(e){o.container.find(".js-form-error").hide(),e.ctrlKey&&e.keyCode==13&&(e.stopPropagation(),e.preventDefault(),$(r).triggerHandler("ctrlenter"))}),$(r).triggerHandler("ready")}),s.render(o.id),o.fileUpload&&f(),r.is_limit=d,r.is_empty=p,r.getContentTxt=l,r.getContent=c,r.setContent=h,r.focus=m,r.verify=v,r.shineError=m,r.editor=s,r.opt=o,r.destroy=g,e[r.opt.id]=r,r}function i(t){return e[t]}var e={},t,n={id:"editor",container:null,hintText:"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u56de\u7b54\uff0c\u51c6\u786e\u3001\u8be6\u5b9e\u7684\u56de\u7b54\u624d\u80fd\u771f\u6b63\u5e2e\u52a9\u5230\u7f51\u53cb\u54e6~",unloadText:"\u60a8\u5df2\u7ecf\u5bf9\u51c6\u5907\u63d0\u4ea4\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u4fee\u6539.",input:$("#upload"),max:1e4,fileUpload:!0,fileUploadSucc:function(){},fileUploadOpt:{},editor_opt:{}};return{create:r,get:i}}());var QRCode;(function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var i=[],s=this.data.charCodeAt(t);s>65536?(i[0]=240|(s&1835008)>>>18,i[1]=128|(s&258048)>>>12,i[2]=128|(s&4032)>>>6,i[3]=128|s&63):s>2048?(i[0]=224|(s&61440)>>>12,i[1]=128|(s&4032)>>>6,i[2]=128|s&63):s>128?(i[0]=192|(s&1984)>>>6,i[1]=128|s&63):i[0]=s,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function a(e,t){if(e.length==undefined)throw new Error(e.length+"/"+t);var n=0;while(n<e.length&&e[n]==0)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function f(e,t){this.totalCount=e,this.dataCount=t}function l(){this.buffer=[],this.length=0}function h(){return typeof CanvasRenderingContext2D!="undefined"}function p(){var e=!1,t=navigator.userAgent;return/android/i.test(t)&&(e=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(e=parseFloat(aMat[1]))),e}function g(e,t){var n=1,i=y(e);for(var s=0,o=c.length;s<=o;s++){var u=0;switch(t){case r.L:u=c[s][0];break;case r.M:u=c[s][1];break;case r.Q:u=c[s][2];break;case r.H:u=c[s][3]}if(i<=u)break;n++}if(n>c.length)throw new Error("Too long data");return n}function y(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++){if(e+n<=-1||this.moduleCount<=e+n)continue;for(var r=-1;r<=7;r++){if(t+r<=-1||this.moduleCount<=t+r)continue;0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[e+n][t+r]=!0:this.modules[e+n][t+r]=!1}}},getBestMaskPattern:function(){var e=0,t=0;for(var n=0;n<8;n++){this.makeImpl(!0,n);var r=s.getLostPoint(this);if(n==0||e>r)e=r,t=n}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var s=0;s<this.modules.length;s++){var o=s*i;for(var u=0;u<this.modules[s].length;u++){var a=u*i,f=this.modules[s][u];f&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+i,o),r.lineTo(a+i,o+i),r.lineTo(a,o+i),r.endFill())}}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++){if(this.modules[e][6]!=null)continue;this.modules[e][6]=e%2==0}for(var t=8;t<this.moduleCount-8;t++){if(this.modules[6][t]!=null)continue;this.modules[6][t]=t%2==0}},setupPositionAdjustPattern:function(){var e=s.getPatternPosition(this.typeNumber);for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(this.modules[r][i]!=null)continue;for(var o=-2;o<=2;o++)for(var u=-2;u<=2;u++)o==-2||o==2||u==-2||u==2||o==0&&u==0?this.modules[r+o][i+u]=!0:this.modules[r+o][i+u]=!1}},setupTypeNumber:function(e){var t=s.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){var n=this.errorCorrectLevel<<3|t,r=s.getBCHTypeInfo(n);for(var i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){var n=-1,r=this.moduleCount-1,i=7,o=0;for(var u=this.moduleCount-1;u>0;u-=2){u==6&&u--;for(;;){for(var a=0;a<2;a++)if(this.modules[r][u-a]==null){var f=!1;o<e.length&&(f=(e[o]>>>i&1)==1);var l=s.getMask(t,r,u-a);l&&(f=!f),this.modules[r][u-a]=f,i--,i==-1&&(o++,i=7)}r+=n;if(r<0||this.moduleCount<=r){r-=n,n=-n;break}}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){var i=f.getRSBlocks(e,n),o=new l;for(var u=0;u<r.length;u++){var a=r[u];o.put(a.mode,4),o.put(a.getLength(),s.getLengthInBits(a.mode,e)),a.write(o)}var c=0;for(var u=0;u<i.length;u++)c+=i[u].dataCount;if(o.getLengthInBits()>c*8)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+c*8+")");o.getLengthInBits()+4<=c*8&&o.put(0,4);while(o.getLengthInBits()%8!=0)o.putBit(!1);for(;;){if(o.getLengthInBits()>=c*8)break;o.put(t.PAD0,8);if(o.getLengthInBits()>=c*8)break;o.put(t.PAD1,8)}return t.createBytes(o,i)},t.createBytes=function(e,t){var n=0,r=0,i=0,o=new Array(t.length),u=new Array(t.length);for(var f=0;f<t.length;f++){var l=t[f].dataCount,c=t[f].totalCount-l;r=Math.max(r,l),i=Math.max(i,c),o[f]=new Array(l);for(var h=0;h<o[f].length;h++)o[f][h]=255&e.buffer[h+n];n+=l;var p=s.getErrorCorrectPolynomial(c),d=new a(o[f],p.getLength()-1),v=d.mod(p);u[f]=new Array(p.getLength()-1);for(var h=0;h<u[f].length;h++){var m=h+v.getLength()-u[f].length;u[f][h]=m>=0?v.get(m):0}}var g=0;for(var h=0;h<t.length;h++)g+=t[h].totalCount;var y=new Array(g),b=0;for(var h=0;h<r;h++)for(var f=0;f<t.length;f++)h<o[f].length&&(y[b++]=o[f][h]);for(var h=0;h<i;h++)for(var f=0;f<t.length;f++)h<u[f].length&&(y[b++]=u[f][h]);return y};var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(s.getBCHDigit(t)-s.getBCHDigit(s.G15)>=0)t^=s.G15<<s.getBCHDigit(t)-s.getBCHDigit(s.G15);return(e<<10|t)^s.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(s.getBCHDigit(t)-s.getBCHDigit(s.G18)>=0)t^=s.G18<<s.getBCHDigit(t)-s.getBCHDigit(s.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(e!=0)t++,e>>>=1;return t},getPatternPosition:function(e){return s.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i.PATTERN000:return(t+n)%2==0;case i.PATTERN001:return t%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(t+n)%3==0;case i.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return t*n%2+t*n%3==0;case i.PATTERN110:return(t*n%2+t*n%3)%2==0;case i.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){var t=new a([1],0);for(var n=0;n<e;n++)t=t.multiply(new a([1,o.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){var t=e.getModuleCount(),n=0;for(var r=0;r<t;r++)for(var i=0;i<t;i++){var s=0,o=e.isDark(r,i);for(var u=-1;u<=1;u++){if(r+u<0||t<=r+u)continue;for(var a=-1;a<=1;a++){if(i+a<0||t<=i+a)continue;if(u==0&&a==0)continue;o==e.isDark(r+u,i+a)&&s++}}s>5&&(n+=3+s-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var f=0;e.isDark(r,i)&&f++,e.isDark(r+1,i)&&f++,e.isDark(r,i+1)&&f++,e.isDark(r+1,i+1)&&f++;if(f==0||f==4)n+=3}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(var i=0;i<t;i++)for(var r=0;r<t;r++)e.isDark(r,i)&&l++;var c=Math.abs(100*l/t/t-50)/5;return n+=c*10,n}},o={glog:function(e){if(e<1)throw new Error("glog("+e+")");return o.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return o.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var u=0;u<8;u++)o.EXP_TABLE[u]=1<<u;for(var u=8;u<256;u++)o.EXP_TABLE[u]=o.EXP_TABLE[u-4]^o.EXP_TABLE[u-5]^o.EXP_TABLE[u-6]^o.EXP_TABLE[u-8];for(var u=0;u<255;u++)o.LOG_TABLE[o.EXP_TABLE[u]]=u;a.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){var t=new Array(this.getLength()+e.getLength()-1);for(var n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=o.gexp(o.glog(this.get(n))+o.glog(e.get(r)));return new a(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;var t=o.glog(this.get(0))-o.glog(e.get(0)),n=new Array(this.getLength());for(var r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=o.gexp(o.glog(e.get(r))+t);return(new a(n,0)).mod(e)}},f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f.getRSBlocks=function(e,t){var n=f.getRsBlockTable(e,t);if(n==undefined)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);var r=n.length/3,i=[];for(var s=0;s<r;s++){var o=n[s*3+0],u=n[s*3+1],a=n[s*3+2];for(var l=0;l<o;l++)i.push(new f(u,a))}return i},f.getRsBlockTable=function(e,t){switch(t){case r.L:return f.RS_BLOCK_TABLE[(e-1)*4+0];case r.M:return f.RS_BLOCK_TABLE[(e-1)*4+1];case r.Q:return f.RS_BLOCK_TABLE[(e-1)*4+2];case r.H:return f.RS_BLOCK_TABLE[(e-1)*4+3];default:return undefined}},l.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var c=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],d=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function o(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}var t=this._htOption,n=this._el,r=e.getModuleCount(),i=Math.floor(t.width/r),s=Math.floor(t.height/r);this.clear();var u=o("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:t.colorLight});u.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(u),u.appendChild(o("rect",{fill:t.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<r;a++)for(var f=0;f<r;f++)if(e.isDark(a,f)){var l=o("use",{x:String(a),y:String(f)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),u.appendChild(l)}},e.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)},e}(),v=document.documentElement.tagName.toLowerCase()==="svg",m=v?d:h()?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function r(e,t){var n=this;n._fFail=t,n._fSuccess=e;if(n._bSupportDataURI===null){var r=document.createElement("img"),i=function(){n._bSupportDataURI=!1,n._fFail&&_fFail.call(n)},s=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};r.onabort=i,r.onerror=i,r.onload=s,r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var t=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,r,i,s,o,u,a,f,l){if("nodeName"in e&&/img/i.test(e.nodeName))for(var c=arguments.length-1;c>=1;c--)arguments[c]=arguments[c]*t;else typeof f=="undefined"&&(arguments[1]*=t,arguments[2]*=t,arguments[3]*=t,arguments[4]*=t);n.apply(this,arguments)}}var i=function(e,t){this._bIsPainted=!1,this._android=p(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(e){var t=this._elImage,n=this._oContext,r=this._htOption,i=e.getModuleCount(),s=r.width/i,o=r.height/i,u=Math.round(s),a=Math.round(o);t.style.display="none",this.clear();for(var f=0;f<i;f++)for(var l=0;l<i;l++){var c=e.isDark(f,l),h=l*s,p=f*o;n.strokeStyle=c?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=c?r.colorDark:r.colorLight,n.fillRect(h,p,s,o),n.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,u,a),n.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,u,a)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&r.call(this,e)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(e){return e?Math.floor(e*1e3)/1e3:e},i}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){var t=this._htOption,n=this._el,r=e.getModuleCount(),i=Math.floor(t.width/r),s=Math.floor(t.height/r),o=['<table style="border:0;border-collapse:collapse;">'];for(var u=0;u<r;u++){o.push("<tr>");for(var a=0;a<r;a++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+s+"px;background-color:"+(e.isDark(u,a)?t.colorDark:t.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),n.innerHTML=o.join("");var f=n.childNodes[0],l=(t.width-f.offsetWidth)/2,c=(t.height-f.offsetHeight)/2;l>0&&c>0&&(f.style.margin=c+"px "+l+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();QRCode=function(e,t){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},typeof t=="string"&&(t={text:t});if(t)for(var n in t)this._htOption[n]=t[n];typeof e=="string"&&(e=document.getElementById(e)),this._android=p(),this._el=e,this._oQRCode=null,this._oDrawing=new m(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(e){this._oQRCode=new t(g(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=r})(),Object.mix(namespace("Wenda.Detail.Panel"),function(){var e=Wenda.Panel,t={accept:function(t,n,r,i,s,o,u){t=t||"Ta";var a={fixed:!0,skin:"panel-02 pannel-accept-a",content:"<h3>\u60a8\u91c7\u7eb3\u4e86<b>"+t+"</b>\u7684\u56de\u7b54</h3>"+"<p>"+u+"</p>"+'<div><span class="btn btn-2"><button id="'+o+'">'+s+'</button></span><a id="thanks_btn" href="javascript:;" style="color:#3fb20e">\u4e0d\uff0c\u8c22\u8c22</a></div>',header:"<h3>\u91c7\u7eb3\u6210\u529f</h3>"},f={fixed:!0,skin:"panel-02 pannel-send-gift",content:'<h3>\u4eb2\uff0c\u60a8\u7684\u80af\u5b9a\u662fTa\u7ee7\u7eed\u52aa\u529b\u7684\u6700\u5f3a\u52a8\u529b\u54e6\uff01</h3><div class="gift-list"><ul class="clearfix" id="gift_list"><li><a href="javascript:;" gifttype="1" class="pic" word="\u725b\u4ec1\uff0c\u60a8\u7684\u56de\u7b54\u771f\u662f\u592a\u68d2\u4e86\uff0c\u4f5c\u4e3a\u7c89\u4e1d\u6211\u9876\u60a8~"><img src="http://p1.qhmsg.com/t010ee53a1c3d8297d8.png"></a><p>\u9876\u725b\u4ec1</p></li><li><a href="javascript:;" gifttype="2" class="pic on" word="\u597d\u5e05\u7684\u56de\u7b54\uff0c\u697c\u4e3b\u9001\u4e0a\u9999\u543b\u4e00\u679a\uff0c\u4ee5\u8868\u8bda\u631a\u8c22\u610f\uff01"><img src="http://p4.qhmsg.com/t0169190f5618ad4c78.png"></a><p>\u9001\u9999\u543b</p></li><li><a href="javascript:;" gifttype="3"  class="pic" word="\u4eb2\uff0c\u611f\u8c22\u60a8\u5e2e\u4e86\u6211\u5927\u5fd9\uff0c\u4e3a\u60a8\u4e0b\u4e00\u573a\u9c9c\u82b1\u96e8\uff01"><img src="http://p3.qhmsg.com/t017e3aee6dd181489f.png"></a><p>\u9c9c\u82b1\u96e8</p></li></ul></div><div class="ipt" ><span style="color:#888">\u8d60\u8a00\uff1a</span><span id="gift_word">\u597d\u5e05\u7684\u56de\u7b54\uff0c\u697c\u4e3b\u9001\u4e0a\u9999\u543b\u4e00\u679a\uff0c\u4ee5\u8868\u8bda\u631a\u8c22\u610f\uff01</span></div>',header:"<h3>\u9001TA\u793c\u7269</h3>",footer:'<span class="btn btn-2"><button id="thanks_submit_btn">\u63d0\u4ea4</button></span>'},l=e.show(a,450);return l.onremove=function(){location.reload()},W(".pannel-accept-a").query(".close").click(function(){l.remove()}),W("#thanks_btn").click(function(){l.close().remove()}),W("#gift_btn").click(function(){l.close();var t=e.show(f,450);t.onremove=function(){location.reload()},W("#gift_list").delegate(".pic","click",function(){var e=W(this);W("#gift_list").query(".pic").removeClass("on"),e.addClass("on"),W("#gift_word").html(e.attr("word"))}),W("#thanks_submit_btn").click(function(){var e=W("#gift_list").query(".on").attr("gifttype");if(!e)return Wenda.Panel.alert("\u8bf7\u9009\u62e9\u793c\u7269\uff01"),!1;Wenda.Net.connect("sendgift",{gifttype:e,ask_id:n,ans_id:r},function(){t.close(),setTimeout(function(){t.remove()},1e3),Wenda.Panel.steam({msg:"\u60a8\u7684\u793c\u7269\u5df2\u7ecf\u9001\u51fa",width:250
,stayMs:3e3})})})}),W("#register_btn").click(function(){QHPass.signUp(function(){l.close().remove(),location.reload(!0)})}),l}};return t}()),Dom.ready(function(){function e(e){var t=Wenda.Ask.Panel.cateSelect("\u8f6c\u79fb\u5230\u5206\u7c7b:",!1,function(t){var n=t.value,r=n.pop();Wenda.Net.connect("changecata",{ask_id:e,dcid:r},function(){Wenda.Panel.steam({msg:"\u8f6c\u79fb\u6210\u529f",width:300},function(){location.reload()})})},"remove")}function t(){if($("#shenhe").length>0){Wenda.Log.send("detail-q-status",$("#shenhe").attr("data-status")),Wenda.Timer.countdown(5,function(e){$("#countdowntime").html(e)},function(){location="/"});return}}function n(e){e.preventDefault();var t=Wenda.Info.askId;Wenda.Net.connect("addHide",{ask_id:t},function(){Wenda.Panel.steam({msg:"\u8ffd\u52a0\u533f\u540d\u6210\u529f",width:300},function(){location.reload()})})}function r(){var e=$(".mod-recom-q"),t=e.data("tag-id")||"",n=e.data("cid")||"",r=e.data("tag")||"",i="<\u7f51\u7ad9>\u3010\u8be6\u60c5\u9875\u53f3\u4fa7\u63a8\u8350\u95ee\u9898\u3011";if(!n&&!t)return!1;Wenda.Info.qid?i+="<\u5df2\u767b\u5f55>":i+="<\u672a\u767b\u5f55>",Wenda.Info.isResolved?i+="<\u5df2\u89e3\u51b3>":i+="<\u672a\u89e3\u51b3>",t?i+="<\u6807\u7b7e>":n&&(i+="<\u5206\u7c7b>"),Wenda.Net.connect("asideQlist",{cid:n,tid:t,tag:r,ask_id:Wenda.Info.askId},function(t){var n=[];t.data.forEach(function(e){var t=Number(e.is_hide==1)?"\u533f\u540d\u7f51\u53cb":e.name,r='<li><div class="q-content"><span class="wen">\u95ee\uff1a</span><a title="'+e.title+'" href="/q/'+e.ask_id+'" target="_blank" class="js-q" text="'+i+'\u70b9\u51fb" data-pre-cid="1000201">'+e.title.subByte(38,"...")+"</a>"+'<span class="time">'+e.create_time+"</span>"+"</div>"+"</li>";n.push(r)}),e.find(".q-l").html(n.join("")),e.show(),Wenda.Log.send("",i+"\u6210\u529f\u5c55\u73b0")},{471:function(e){Wenda.Log.send("",i+e.errmsg)}})}function i(e,t){function s(e){window.location="/q/"+e.data.ask_id}var n=e=="aside_ask_btn"?"aside_ask_con":"bottom_ask_con",r=$("#"+n),i=r.val().trim();if(i=="")r.focus();else if(t){var o="/home/ask?q="+encodeURIComponent(i)+"&ref=datail"+(n=="aside_ask_con"?1:2);setTimeout(function(){location.href=o},500)}else{var u=$(".panel-ask-layer #layer_ask_cid").val();$(".panel-ask-layer").length?Wenda.Asklayer.showOnlineDarens(u,i):Wenda.Asklayer.createAsklayerPanel(function(){Wenda.Asklayer.showOnlineDarens(u,i)},s)}}function s(){function e(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight,r=document.documentElement.scrollHeight,i=$("#bottom_ask");if(t+n>r-50){$("#bottom_ask:hidden").length>0&&Wenda.Log.send("js-detail","detail-ba-show"),$("#bottom_ask").show();var s=$("#js-mod-fixed-float"),o=$(".g-mod-fixed");s.length>0&&(s.data("bottom")||s.data("bottom",s.css("bottom").replace("px","")),s.css("bottom",parseInt(s.data("bottom"))+parseInt(i.height()))),o.length>0&&(o.data("bottom")||o.data("bottom",o.css("bottom").replace("px","")),o.css("bottom",parseInt(o.data("bottom"))+parseInt(i.height())))}}!Browser.ie6&&!Wenda.Info.asknum&&!Wenda.Info.ansnum&&Wenda.Info.isResolved&&($(window).on("scroll",e),$(".bottom-close").click(function(){$(window).unbind("scroll",e),$("#bottom_ask").hide()}))}function o(){Wenda.Menu.popup({id:"usercard",nav:$(".js-usercard"),aPanel:$(".card-steam"),delay:500,showFunc:function(e,t,n){n.aPanel&&n.aPanel.hide();var r=e.offset(),i=e.attr("index");return n.aPanel=$('.card-steam[index="'+i+'"]'),n.aPanel.css({left:r.left+"px",top:r.top+26+"px"}),n.aPanel.show(),!0}});var e=$("#usercard_box"),t='<div class="g-point g-point-top"><ins class="bg"></ins><ins class="border"></ins></div><div class="box"><div class="clearfix"><div class="info"><a text="\u8d44\u6599\u5361\u5934\u50cf\u70b9\u51fb\u91cf" target="_blank" href="/u/{$qid}" class="pic"><img src="{$logo}" /></a><i class="i-online" style="display:{$isOnline};">\u5728\u7ebf</i></div><div class="text {$warp}"><p class="name"><a text="\u8d44\u6599\u5361\u7528\u6237\u540d\u70b9\u51fb\u91cf" target="_blank" href="/u/{$qid}">{$name}</a>{$icon}</p><p>\u91c7\u7eb3\u7387\uff1a<em>{$sucessNum}%</em>&nbsp;&nbsp;\u7b49\u7ea7\uff1a<em>{$level}</em></p><p text="\u8d44\u6599\u5361\u95ee\u9898\u5e93\u5206\u7c7b\u70b9\u51fb\u91cf">\u64c5\u957f\u9886\u57df\uff1a{$cate}</p><p>\u5df2\u5e2e\u52a9\uff1a{$helpNum}\u4eba</p></div></div><div class="toolbar"><a href="#msg" data-toqid="{$qid}" data-username="{$username}" class="button button-2 js-send-message" style="margin-right:20px" text="\u79c1\u4fe1\u6d88\u606f_\u7528\u6237\u540d\u7247_\u79c1\u4fe1TA\u70b9\u51fb">\u79c1\u4fe1TA</a><a href="/home/ask?qid={$qid}" class="button button-2" data-cid-pre="1000201" text="\u8d44\u6599\u5361\u5b9a\u5411\u63d0\u95ee\u70b9\u51fb\u91cf">\u5411TA\u63d0\u95ee</a></div></div>',n={name:"getUserCard",opts:{url:"/home/getuserinfo",method:"get"}},r=function(r,i){var s=$('.card-steam[index="'+r+'"]',e);s.length==0&&(s=$('<div class="user-vcard card-steam card-ordinary" index="'+r+'"><p class="loading"><img src="http://p2.qhmsg.com/t010cb2cd69f5bc97ec.gif" />\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...</p></div>').appendTo(e).hover(function(){Wenda.Timer.undelay("ordinaryCard")},function(){$(this).hide()})),s.find(".loading").length>0&&Wenda.Net.connect(n.name,{qid:r},function(e){e=e.data;var n=[],i=[],o=[];$.each(e.g_at_names||[],function(e,t){i.push('<a target="_blank" href="/c/'+e+'">'+t.name+"</a>"),o.push(t.name)}),e.is_qiye>0&&n.push('<i class="i-qy" title="\u5b98\u65b9\u8ba4\u8bc1"></i>'),e.is_daren>0&&n.push('<i class="i-daren" title="\u8fbe\u4eba"></i>'),e.role>0&&n.push('<i class="i-admin" title="\u7ba1\u7406\u5458"></i>'),e.has_education==1&&n.push('<i class="i-education" title="\u5b66\u5386"></i>'),s.html(t.tmpl({qid:r,logo:e.quc_info.imageUrl,name:e.quc_info.userName.subByte(16,"\u2026"),username:e.quc_info.userName,sucessNum:e.adoption,helpNum:e.rev_count,level:e.level_info.current_level,isOnline:e.is_online>0?"block":"none",icon:n.join(""),cate:i.length>0?i.join("\u3001"):"\u6682\u672a\u8bbe\u7f6e",warp:o.length>0&&("\u64c5\u957f\u9886\u57df\uff1a"+o.join("\u3001")).byteLen()>29?"warp":""})),Wenda.Log.send("\u79c1\u4fe1\u6d88\u606f_\u7528\u6237\u540d\u7247_\u540d\u7247\u5c55\u793a\u91cf")}),i(s)};Wenda.Net.add(n.name,n.opts),Wenda.Menu.popup({id:"ordinaryCard",nav:$(".js-ordinary-card"),aPanel:$(".card-steam"),delay:500,showFunc:function(e,t,n){n.aPanel&&n.aPanel.hide();var i=e.offset(),s=e.attr("index");return r(s,function(e){n.aPanel=e,n.aPanel.css({left:i.left+"px",top:i.top+26+"px"}),n.aPanel.show()}),!0}})}function u(){var e=$("#back_top"),t=location.href.queryUrl("cqid");$("#feedback_detail").click(function(e){e.preventDefault(),Wenda.Global.Panel.userFeedBack()}),e.click(function(e){return document.body.scrollIntoView(),e.preventDefault(),!1}),$(window).on("scroll",function(t){var n=document.documentElement.scrollTop||document.body.scrollTop;n>=300&&e.css("visibility")=="hidden"&&e.css("visibility","visible"),n<300&&e.css("visibility")=="visible"&&e.css("visibility","hidden");var r=0;$("#editform").length&&$("#editform").height()&&(r=parseInt($("#editform").offset().top+$("#editform").height()))});if(t){var n=$(".mod-other-ans li[qid="+t+"]");n.length&&setTimeout(function(){$("html,body").animate({scrollTop:n.offset().top-40},600,function(){n.css("background","#FEFFF0")})},500)}}function a(e){var t=e.attr("data").evalExp(),n=$(".js-panels").find("#"+t.nodeName).html(),r=e.closest(".console").find(".js-form-area"),i=r.find("."+t.nodeName),s;r.find(">div").each(function(e,n){$(n).hasClass(t.nodeName)||$(n).hide()}),e.closest(".console").find(".active").removeClass("active"),i.length>0?i.filter(":visible").length>0?(i.hide(),e.removeClass("active")):(i.show(),e.addClass("active")):(s=n.replace(/[\n\r\t]*/g,"").tmpl(t),r.append($(s).show()),e.addClass("active"))}function f(e){var t=$(this),n=t.parents(".mod-share").attr("data-con")||document.title,r="http://p2.qhmsg.com/t01dfe622dc593cfb65.png",i=[],s="",o={},u,a,f;t.hasClass("weixin")?(u=t.siblings(".weixin-box").show().find(".qrcode"),u.attr("data-make")!="1"&&(a=new QRCode(u[0],{width:83,height:83,colorDark:"#008000"}),setTimeout(function(){a.makeCode("http://m."+Wenda.Info.wenda_domain+"/q/"+Wenda.Info.askId+"?ref=wenda_detail_share_weixin")},0),u.attr("data-make",1))):t.hasClass("close")?(e.preventDefault(),t.parents(".weixin-box").hide()):(i=[{sina:"\u8fd9\u4e2a\u95ee\u9898\u6709\u610f\u601d\u54c8\uff0c\u8c01\u6765\u56de\u7b54\u4e0b\uff1f\u2192_\u2192\u3010{$title}\u3011\uff08\u5206\u4eab\u81ea@"+Wenda.Info.wenda_name+" \uff09",qzone:"\u8fd9\u4e2a\u95ee\u9898\u6709\u610f\u601d\u54c8\uff0c\u8c01\u6765\u56de\u7b54\u4e0b\uff1f\u2192_\u2192"},{sina:"\u3010{$title}\u3011\uff08\u5206\u4eab\u81ea@"+Wenda.Info.wenda_name+" \uff09",qzone:"\u3010{$title}\u3011\uff08\u6765\u81ea"+Wenda.Info.wenda_name+"\uff09"}],f=t.parents(".mod-resolved-ans").attr("ans_id"),f&&(o.ans_id=f,o.ask_id=Wenda.Info.askId,o.pic=r),t.hasClass("sina")&&(s="sina",o.title=i[~~Wenda.Info.isResolved][s].tmpl({title:n}),o.autoPic=!1),t.hasClass("qzone")&&(s="qzone",o.title=n,o.content=i[~~Wenda.Info.isResolved][s].tmpl({title:n}),o.pic=r),o.url="http://"+location.host+"/q/"+Wenda.Info.askId+"?ref=wenda_detail_share_"+s,Wenda.share.publish.apply(this,[s,o]))}function l(){var e=$("#mod-onebox-vote"),t=$("#mod-onebox-map");Wenda.Timer.delay("onebox",1e3,function(){$.ajax({url:"http://open.onebox."+Wenda.Info.root_domain+"/ui/?osrc=answer_vote&query="+encodeURIComponent(t.attr("data-title")),type:"get",dataType:"jsonp"}).done(function(n){n&&n[0]&&n[0].data&&$.getScript("http://s2.qhmsg.com/!827a72ed/_360so_ob_loader.js",function(){switch(n[0].type){case"map_new":n[0].data.indexOf("mohe-map_bus")!=-1&&!$.fn.live&&($.fn.live=$.noop),$(".box",t).html(n[0].data.replace(/<h3[^>]*>.*?<\/h3>/gi,"").replace(/"cont"/gi,'"cont clearfix"').replace(/gclearfix/gi,"clearfix")),t.show(),setTimeout(function(){t.css({zoom:1})},0),Wenda.Log.send("detail-map-onebox","<\u7f51\u9875>\u3010\u8be6\u60c5\u9875\u51fa\u73b0\u5730\u56feonebox\u3011\u5c55\u73b0");break;case"answer_vote":Wenda.Info.isResolved=="1"&&e.html(n[0].data).show()}})})})}function c(){var e=location.href.queryUrl("ref");(e=="desktopicon"||e=="360safepop")&&!Wenda.User.hasLogin()&&Wenda.Log.send("js-detail","\u8be6\u60c5\u9875\u53ec\u56de\u672a\u767b\u5f55\u7528\u6237")}function h(){$.ajax({url:"http://t."+Wenda.Info.root_domain+"/openapi/istotantan",type:"get",dataType:"jsonp",jsonp:"callback",data:{q:$("#js-ask-title").val(),token:"gLJ1kQ8Wxx9k"}}).done(function(e){e.status=="ok"&&(e.data.toTantan==1?$(".detail-tantan").show():$(".detail-tantan").hide())}).fail(function(e){})}function p(){function t(e){var t=$("#js-detail .js-entans-monitor"),n=t.length;return n&&t.each(function(t,r){var i=$(this).attr("text");if(i)try{var s=i.evalExp();typeof s=="object"&&$.ObjectH.map(s,function(t,r){n>1&&(r=="ename"||r=="qid")&&(t=e[r]?e[r]+String.fromCharCode(1)+t:t),e[r]=t})}catch(o){e.con=i}}),e}var e=monitor.data.getTrack;monitor.data.getTrack=function(){var n=e();return n=t(n),n},window.monitorTrackDisabled&&monitor.getTrack()}function d(e){var t=$(this).attr("data-id");if(t!=="link-to-so")return e.preventDefault(),!1}function v(){$(".js-wenda-src-moniter").each(function(e,t){Wenda.Log.send(t.value)})}function m(e){function c(e){Wenda.Detail.Panel.accept(s,n,r,i,f,u,a),$("#user_info").attr("qid")?Wenda.Log.send("detail_adopt","\u767b\u5f55\u91c7\u7eb3\u6ee1\u610f\u7b54\u6848"):Wenda.Log.send("detail_adopt","\u4e0d\u767b\u5f55\u91c7\u7eb3\u6ee1\u610f\u7b54\u6848"),Wenda.ReferEnum.sendLog("accept",Wenda.ReferEnum.getAcceptCode())}var t=$(e).closest(".js-form"),n=Wenda.Info.askId,r=t.attr("ans_id"),i=t.attr("qid"),s=t.find(".ask-author").html(),o=Wenda.Asklayer.getMID.IE()||Wenda.Asklayer.getMID.SE(),u="",a="",f="",l={};l.ask_id=n,l.ans_id=r,l.mid=o,$("#user_info").attr("qid")?(u="gift_btn",f="\u9001TA\u4e00\u4efd\u793c\u7269",a='\u83b7\u5f97 <span class="strong">2</span> \u91d1\u5e01\uff0c<span class="strong">2</span> \u7ecf\u9a8c\u503c'):(u="register_btn",f="\u53bb\u767b\u5f55",a='<span style="font-weight:bold;">\u767b\u5f55\u540e\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u63d0\u95ee\u548c\u91c7\u7eb3\u54e6~</span>'),Wenda.Net.connect("chosebest",l,c)}function g(){p(),c(),t(),s(),o(),u(),l(),r(),v(),Wenda.Info.realViews<=1&&(Wenda.Log.send("","<\u7f51\u9875>\u3010\u63d0\u95ee\u6210\u529f\u9875\u6210\u529f\u5339\u914d\u81f3\u8c08\u8c08\u3011\u5c55\u73b0"),h()),Cookie.get("zhishi_mall_access")?$(".access").hide():$(".access").show(),$(".mod-detail").on("click",".js-append-form",function(e){e.preventDefault();var t=$(this);a(t)}).on("click",".js-choce-best",function(e){e.preventDefault();var t=$(this);m(t)}).on("mouseenter",".js-choce-best",function(e){var t=$(this).parent();$(".js-append-form",t).hide(),$(".js-entrance-tip",t).addClass("entrance-tip-show")}).on("mouseleave",".js-choce-best",function(e){var t=$(this).parent();$(".js-append-form",t).show(),$(".js-entrance-tip",t).removeClass("entrance-tip-show")}).on("click",".js-change-cate",function(t){e(Wenda.Info.askId)}).on("click",".js-access-close",function(e){$(this).parent().hide(),Cookie.set("zhishi_mall_access",1,{expires:2592e6,path:"/"}),Wenda.Log.send("","\u5546\u57ce\u63a8\u5e7f\u5165\u53e3\u5173\u95ed\u6309\u94ae\u70b9\u51fb\u91cf")}).on("click",".mod-share a",f).on("click",".js-add-hide",n).on("click",".resolved-cnt a",d),$("#ask-relate").length&&Wenda.Log.send("ask-relate","ask-relate-show"),Browser.ie6&&Wenda.Menu.hover("#hd-crumb .ico-caret","ico-caret-on"),$(".js-ask-student").click(function(e){e.preventDefault(),$(".js-ask-area").toggle().siblings().hide()}),$(".js-ask-area .js-ask-btn").click(function(e){e.preventDefault();var t=$(this),n=t.data("qid"),r=Wenda.Info.askId,i=t.data("code");Wenda.User.checkLogin(function(e){if(t.hasClass("off"))return;Wenda.Ajax.get("askStudent",{askid:r,toqid:n,inviteCode:i},function(e){t.addClass("off").text("\u5df2\u9080\u8bf7")})})}),$("#aside_ask_btn").click(function(e){e.preventDefault();var t=W(this).attr("id");i(t,!1)}),$("#bottom_ask_btn").click(function(e){e.preventDefault();var t=W(this).attr("id");i(t,!0)}),$(".js-recom-q-change").click(function(e){e.preventDefault(),r()}),$(".js-login").click(function(){Wenda.User.checkLogin(function(){window.location.reload()})}),$("#e_idea_wenda_detail_rightBox").length>0&&Wenda.Log.send("\u8be6\u60c5\u9875\u53f3\u4fa7\u5e7f\u544aPV"),$("#e_idea_wenda_detail_left_wrap").length>0&&Wenda.Log.send("\u8be6\u60c5\u9875\u5de6\u4fa7\u5e7f\u544aPV");var g=$(".js-team"),y=g.length;y>0&&g.each(function(){var e=$(this).data("type"),t=e=="best"?"[\u4e50\u5e2e\u56e2][web\u95ee\u9898\u8be6\u60c5\u9875][\u91c7\u7eb3/\u63a8\u8350\u56de\u7b54\u5c0f\u5c3e\u5df4\u5c55\u793a]":"[\u4e50\u5e2e\u56e2][web\u95ee\u9898\u8be6\u60c5\u9875][\u666e\u901a\u56de\u7b54\u5c0f\u5c3e\u5df4\u5c55\u793a]";Wenda.Log.send(t)}),($(".mod-wechat-qrcode").length||$(".mod-wechat-qrcode-mini").length)&&Wenda.Log.send("[\u8be6\u60c5\u9875][\u4e8c\u7ef4\u7801-\u5c55\u793a]")}(function(e){e.on("click",".close-tip",function(){e.remove()})})($("#js-mod-fixed-float")),Wenda.share.onbefore=function(e,t){return t.ans_id&&t.ans_id>0&&(t.appUrl=e.url,e.url="/other/shareloading"),!0},g(),Wenda.Log.sendClose(),function(e){e.each(function(){var e=$(this).data("text");e&&Wenda.Log.send("",e)})}($(".js-show-data"))}),$(function(){function a(e,t){var n=e.query(".js-form-error");n.query(".err-cnt").html(t),t==""?n.hide():(n.show(),setTimeout(function(){n.fadeOut()},1e4))}function f(){u&&($(u).on("focus",function(){$("#editorbox").addClass("mod-editor-focus")}).on("blur",function(){$("#editorbox").removeClass("mod-editor-focus")}).on("ctrlenter",function(){W("#submit").fire("click")}).on("checklimit",function(){a(n,"\u4eb2\uff0c\u60a8\u7684\u56de\u7b54\u8d85\u8fc7\u4e86\u957f\u57ce\u7684\u957f\u5ea6\uff0c\u8bf7\u7cbe\u7b80\u60a8\u7684\u56de\u7b54\u54e6\uff01")}),Wenda.Info.askType==""&&$(u).on("checkempty",function(){a(n,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u56de\u7b54\uff0c\u63d0\u95ee\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u89e3\u7b54\u54e6\uff01"),$(u).focus()}))}function l(){if(Wenda.Net.status("editform"))return!1;v();var e=Cookie.get("light")=="true"?!0:!1,t=W(this).parentNode("form");if(typeof t.length=="undefined")return!1;var n=t.attr("type"),r=!1;n=="0"||n=="4"?r=d(t):r=p(t);if(!r)return!1;Wenda.User.checkLoginWithName(function(){h(t),m(t)},e)}function c(e){e.query(".js-added-submit").parentNode().show(),e.query(".js-submiting").hide()}function h(e){e.query(".js-added-submit").parentNode().hide(),e.query(".js-submiting").show(),a(e,"")}function p(e){var n=e.attr("type"),r=e.query('textarea[name="content"]');return r.val().length<3?(n=="1"?a(e,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u95ee\u9898\uff0c\u56de\u7b54\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u95ee\u9898\u54e6\uff01"):n=="2"?a(e,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u8ffd\u95ee\uff0c\u56de\u7b54\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u95ee\u9898\u54e6\uff01"):n=="3"&&a(e,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u56de\u7b54\uff0c\u63d0\u95ee\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u89e3\u7b54\u54e6\uff01"),r.focus().shine4Error(),!1):t.verify($(e[0]))?!0:!1}function d(e){if(Wenda.Info.hasInsertMap!=1){if(Wenda.Info.askType==2&&$(e[0]).attr("type")==0){var n=$("input[name=fill_blank]"),i=u.getContentTxt()=="\u5728\u8fd9\u91cc\u5bf9\u7b54\u6848\u8fdb\u884c\u5c55\u5f00\u8bf4\u660e\uff0c\u4f1a\u6709\u610f\u5916\u60ca\u559c\u54e6~",s=i?"":u.getContentTxt(),o=n.val();return s.length+o.length>4?!0:(a(e,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u56de\u7b54\uff0c\u63d0\u95ee\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u89e3\u7b54\u54e6\uff01"),n.val()?(u.focus(),!1):(n.focus(),!1))}if(!u.verify())return!1}else u.getContentTxt();return t.verify(r)?!0:!1}function v(){Wenda.Mid.getMID.IE()&&($("#ans_mid").val(wdextcmd.GetMid()),Wenda.Info.ansMid=wdextcmd.GetMid()),Wenda.Mid.getMID.SE()&&($("#ans_mid").val(external.GetMID(external.GetSID(window))),Wenda.Info.ansMid=external.GetMID(external.GetSID(window)))}function m(e){function u(t){c(e);var n=e.attr("type");if(n=="0")Wenda.Info.answerId=t.data.ans_id,b(t.data.user_info),Wenda.Log.send("editform","answer-submit-success");else if(n=="4")b(t.data.user_info),Wenda.Log.send("editform","hasbest-answer-submit-success");else{g(e,t.data.user_info);var r=["added-ask-success","added-trace-success","added-answer-success"];Wenda.Log.send("js-detail",r[n-1])}if($('.js-weiboAuthCheck[type="checkbox"]').is(":checked")){var i={ask_title:$(".js-ask-title").text(),ask_id:Wenda.Info.askId,ans_id:t.data.ans_id,type:"answer"};Wenda.Auth.getWeiboAuth(i)}Wenda.ReferEnum.sendLog("answer",Wenda.ReferEnum.getReplyCode())}var n={107:u,110:function(){t.need($(e[0]),!0)},"default":function(t){var n="\u7f51\u7edc\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5";t&&t.errmsg&&(n=t.errmsg),a(e,n)},"finally":function(n){c(e);var r=n.errno;r!=0&&r!=107&&r!=-110&&t.check($(e[0]))}};if(Wenda.Info.askType==""||$(e[0]).attr("type")!=0)Wenda.Net.connect("sendByFormWithToken",$(e[0]),u,n);else if(Wenda.Info.askType==2){Wenda.Log.send("fillblank","< \u7f51\u9875> \u3010\u8be6\u60c5\u9875 \u586b\u7a7a\u7c7b\u578b\u95ee\u9898 \u63d0\u4ea4\u56de\u7b54\u3011\u70b9\u51fb");var r=$(e[0]).serialize().replace(/\+/g,"%20").queryUrl(),i=r.content.replace(/\"/g,"'")||"",s=r.fill_blank.replace(/</g,"&lt;").replace(/>/g,"&gt;")||"",o='{"fill_blank":"'+s+'","fill_supply":"'+i+'"}';r.content=o,Wenda.Net.connect("answer",r,u,n)}}function g(e,t){var n=e.query('textarea[name="content"]'),r=n.val().stripTags(),i=e.parentNode(".js-form"),s=t&&t.coin_frequency_info,o=e.attr("type"),u={1:"\u8865\u5145\uff1a",2:"\u8ffd\u95ee\uff1a",3:"\u8865\u5145\uff1a"},a='<li class="item"><span class="{$cn}">{$d}</span><span class="add-c">{$c}</span></li>',f=o=="3"?"ico-a":"ico-q";r=a.tmpl({cn:f,d:u[o],c:r}),i.query(".js-added-area").show().query("ul").appendChild(W(r)),i.query(".entrance .add-ans, .entrance .add-ask").fire("click"),n.val(""),o==2&&s.score_add_ask&&Wenda.Panel.steam({msg:"\u7ecf\u9a8c\u503c+"+s.score_add_ask,width:400}),o==3&&(s.coin_add_append_answer||s.score_add_append_answer)&&Wenda.Panel.steam({msg:"\u7ecf\u9a8c\u503c+"+s.score_add_append_answer+"\uff0c\u91d1\u5e01+"+s.coin_add_append_answer,width:400})}function y(e,t){var n={ask_id:e};$.ajax({type:"GET",url:"/home/getAnswerQrcode?",data:n}).done(function(e){t(e)})}function b(e){var t=e.coin_frequency_info,n="",r=/\/q\/\d+/.exec(window.location.pathname)[0];W("#crumb_box").hide(),W("#bd").hide(),W("#answer_succ_box").show(),W("#succ_qlist_box").query(".ft").hide(),Wenda.Mid.setMidNotice("answer"),w(),setTimeout(function(){S()},1e3),e.ans_rank&&W("#rank-text").html("\u4eca\u65e5\u56de\u7b54\u95ee\u9898\u6570\u6392\u540d\uff1a<span>"+e.ans_rank.rank+"</span>\uff0c\u518d\u56de\u7b54<span>1</span>\u9898\u60a8\u53ef\u4ee5\u8d85\u8d8a\u524d\u9762<span>"+e.ans_rank.more_over+"</span>\u4f4d\u7f51\u53cb"),t&&t.coin_add_ans?(n='<div class="qrcode"></div><div class="succbox-rt">\u56de\u7b54\u6210\u529f\uff0c\u5df2\u83b7\u5f97 <span style="color:#F60;">\u7ecf\u9a8c\u503c+'+t.score_add_ans+"\uff0c\u91d1\u5e01+"+t.coin_add_ans+"</span>",t.coin_continuity_ans&&(n=n+'<span style="color:#F60;">\uff0c\u6301\u7eed\u56de\u7b54\u91d1\u5e01+'+t.coin_continuity_ans+"</span>"),W(".suc-info").length&&(n='<div class="qrcode"></div><div class="succbox-rt"><p>\u606d\u559c\u8d5a\u5f97<span class="org">+'+t.coin_add_ans+"\u91d1\u5e01"+"&nbsp;+"+t.score_add_ans+"\u7ecf\u9a8c"+"</span>"+"\uff0c\u518d\u63a5\u518d\u5389\u54e6~</p>")):n='<div class="qrcode"></div><div class="succbox-rt">\u56de\u7b54\u6210\u529f\uff0c\u611f\u8c22\u60a8\u5bf9\u95ee\u7b54\u7684\u8d21\u732e',n+='<div class="succ-tips js-qrcode-tips">\u626b\u63cf\u5de6\u4fa7\u4e8c\u7ef4\u7801\uff0c\u5173\u6ce8\u201c360\u95ee\u7b54\u201d\u5fae\u4fe1\u516c\u4f17\u8d26\u53f7<br>\u7b2c\u4e00\u65f6\u95f4\u83b7\u53d6\u88ab\u91c7\u7eb3\u4fe1\u606f</div>',n+="</div>",W("#succ_text").html(n);var i=W("#succ_text").attr("data-askid");qrcodeWrap=W(".qrcode"),y(i,function(e){/http/.test(e)&&/qrCode?/.test(e)?(qrcodeWrap.html('<img src="'+e+'"/><span class="codelogo"></span>'),$(".js-qrcode-tips").show()):qrcodeWrap.addClass("bg-succ-hand")}),W("#succ_url").attr("href",r),W("#succ_change_btn").click(S),x("\u56de\u7b54\u6210\u529f")}function w(){Wenda.Mid.getMID.IE()&&wdextcmd.CallQandAExpert("/askid="+Wenda.Info.askId);if(Wenda.Mid.getMID.SE())try{}catch(e){return!1}}function E(e,t){function a(e){Wenda.Log.send("js-detail","\u7cbe\u534e\u7b54\u6848\u63d0\u4ea4\u6210\u529f"),Wenda.Info.answerId=e.data.ans_id;var t=e.data.user_info;i.close(),b(t)}var n=$(".mod-essence-editor .submit"),r=Wenda.Captcha,i=t,s,o={107:a,110:function(){r.need(n,!0)},"default":function(e){Wenda.Panel.alert(e.errmsg)},"finally":function(e){var t=e.errno;t!=0&&t!=107&&t!=-110&&r.check(n),$(".mod-essence-editor #submit").html("\u63d0\u4ea4\u7b54\u6848").removeClass("submitting").addClass("submit-btn")}},u={ask_id:Wenda.Info.askId,captcha:n.find(".js-captcha-input").val(),is_hide:Number($(".mod-essence-editor .js-is_hide").prop("checked")),content:JSON.stringify(e),anstype:1};Wenda.Net.connect("answer",u,a,o)}function S(e){var t=W("#succ_qlist_box"),n=W("#succ_qlist"),r=Wenda.Info.askCid,i=Wenda.Info.askTag,s=Wenda.Info.askId,o={cid:r,tid:i,ask_id:s};typeof e!="undefined"&&(o.t=1),Ajax.post("/other/moreAsk",o,function(e){e=e.evalExp();var r=e.errno|0,i=e.data;if(r==0){var s="",o='<li><div class="title"><span><a text="\u7f51\u7ad9\u56de\u7b54\u6210\u529f\u9875\u5934\u50cf\u70b9\u51fb" style="{$cursor}" target="{$target}" href="{$href}" class="pic"><img src="{$user_info.imageUrl}" alt="" width="24" height="24"/></a></span><span>\u95ee\uff1a</span>{$coins}<span class="s0"><a title="{$title}" data-id="answer_succ_box" text="\u7f51\u7ad9\u56de\u7b54\u6210\u529f\u540e\u70b9\u51fb\u76f8\u5173\u95ee\u9898\u5217\u8868" target="_blank" href="/q/{$ask_id}?cid-pre=1000202" data-cid-pre="1000202">{$title}</a></span></div><div class="answer"><span class="s1">{$answer_cnt}\u56de\u7b54</span></div></li>';for(var u=0,a=i.length;u<a;u++){var f=i[u],l=parseInt(f.coins,10),c=f.is_hide==1?"javascript:void(0)":"/u/"+f.qid,h=f.is_hide==1?"":"_blank",p=f.is_hide==1?"cursor:default":"";l>0?l='<span class="wealth">'+l+"</span>":l="",f.coins=l,f.href=c,f.target=h,f.cursor=p,s+=o.tmpl(f)}s==""?t.hide():(n.html(s),t.query(".hd").html("<span>\u518d\u6765\u4e00\u9898\uff0c\u51b2\u51fb\u5927\u5956</span>"),t.query(".hd").css("backgroundPosition","256px -479px"),t.show(),W("#succ_qlist_box").query(".ft").show())}else t.hide()})}function x(e){if(!Wenda.Info.isResolved)var t=document.referrer}var e=Wenda.Panel,t=Wenda.Captcha,n=W("#editform"),r=$("#editform"),i,s='body{background-color:#fefdfd;margin-left:15px;font:14px "\u5fae\u8f6f\u96c5\u9ed1",arial,sans-serif;}';Wenda.Info.askType==""?i="\u6211\u6765\u5e2eTA\u56de\u7b54":Wenda.Info.askType==2&&(i="\u5728\u8fd9\u91cc\u5bf9\u7b54\u6848\u8fdb\u884c\u5c55\u5f00\u8bf4\u660e\uff0c\u4f1a\u6709\u610f\u5916\u60ca\u559c\u54e6~",$(".mod-q-ans").length&&Wenda.Log.send("fillblank","< \u7f51\u9875> \u3010\u8be6\u60c5\u9875 \u586b\u7a7a\u7c7b\u578b \u5f85\u89e3\u51b3\u72b6\u6001\u3011\u5c55\u73b0"));var o={id:"common_editor",container:r,hintText:i,input:$("#common_upload"),editor_opt:{initialStyle:s,minFrameHeight:158},fileUploadSucc:function(){Wenda.Log.send("editform","answer-uploadImg")}},u=Wenda.Editor.create(o);(function(){W(".mod-detail").delegate(".js-added-submit","click",l);var t={selector:{checkbox:".js-weiboAuthCheck",vlist:".js-vAuthlist"},getTags:!0,ask_title:$(".js-ask-title").text()};Wenda.Auth.showWeiboDaren(t),$("#advance").on("essence-submit",function(e,t,n){E(t,n)}),f(),x("\u5c55\u73b0")})()}),Dom.ready(function(){function e(e,t){Wenda.Net.connect("sendByForm",$(".mod-q .js-add-reward form"),function(){var t=W(".mod-q").query(".ask-author"),n=W(".mod-q .mod-user-label .wealth"),r=Number(W(".js-add-reward").query("input:checked").val());n.length?n.html(r+Number(n.html())):t.insertAdjacentHTML("beforebegin",'<span class="wealth">'+r+'</span><span class="line">|</span>'),e.html(Number(e.html())-r),Wenda.Panel.steam(),W(".mod-q .add-reward").fire("click")})}function t(e,t){var n=Number(e.html()),r=t.query('[name="coin"]');if(n<5){var i='<div style="zoom:1;"><p>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u53ea\u6709 <span class="wealth" id="add_coin_num">'+n+"</span> \u91d1\u5e01\uff0c\u4e0d\u8db3\u4ee5\u8ffd\u52a0\u60ac\u8d4f\u3002</p>"+"</div>"+"<div>"+'<span style="color: #999;">\u5feb\u52aa\u529b\u56de\u7b54\u95ee\u9898\uff0c\u83b7\u5f97\u66f4\u591a\u91d1\u5e01\u3002<a style="color:#2E8F02;" href="/c" target="_blank">\u6211\u8981\u56de\u7b54&raquo;</a></span>'+"</div>";return t.html(i),!1}return r.forEach(function(e){e=W(e),n<Number(e.val())&&e.attr("disabled","true").nextSibling("label").css("color","#c8c8c8")}),!0}(function(){W(".mod-detail").delegate(".mod-q .add-reward","click",function(e){e.preventDefault(),setTimeout(function(){var e=W(".mod-q .js-my-coin"),n=W(".mod-q .js-add-reward");t(e,n)},50)}).delegate(".mod-q .js-add-reward-yes","click",function(t){var n=W(".mod-q .js-my-coin"),r=W(".mod-q .js-add-reward");t.preventDefault(),e(n,r)})})()}),Dom.ready(function(){function e(e){function l(e){Wenda.Detail.Panel.accept(s,n,r,i,f,u,a),$("#user_info").attr("qid")?Wenda.Log.send("detail_adopt","\u767b\u5f55\u91c7\u7eb3\u6ee1\u610f\u7b54\u6848"):Wenda.Log.send("detail_adopt","\u4e0d\u767b\u5f55\u91c7\u7eb3\u6ee1\u610f\u7b54\u6848")}var t=$(this).closest(".js-form"),n=Wenda.Info.askId,r=t.attr("ans_id"),i=t.attr("qid"),s=t.find(".ask-author").html(),o=Wenda.Asklayer.getMID.IE()||Wenda.Asklayer.getMID.SE(),u="",a="",f="";t.find("input[name=mid]").val(o),$("#user_info").attr("qid")?(u="gift_btn",f="\u9001TA\u4e00\u4efd\u793c\u7269",a='\u83b7\u5f97 <span class="strong">2</span> \u91d1\u5e01\uff0c<span class="strong">2</span> \u7ecf\u9a8c\u503c'):(u="register_btn",f="\u53bb\u767b\u5f55",a='<span style="font-weight:bold;">\u767b\u5f55\u540e\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u63d0\u95ee\u548c\u91c7\u7eb3\u54e6~</span>'),Wenda.Net.connect("sendByFormWithToken",$(this).closest("form"),l)}$(".mod-detail").delegate(".js-set-confirm .js-yes","click",e).delegate(".js-set-confirm .js-no","click",function(e){$(this).closest(".js-set-confirm").remove()})}),Dom.ready(function(){function e(){var e=W("#ask_added_menu").query(".mod-ask-expert");e.html()==""&&Wenda.Net.connect("getexpertlist",{},function(t){e.html(t)})}W("#js-detail").delegate(".js-ask-expert","click",function(e){e.preventDefault();var t=Wenda.Info.askId,n=W(this).attr("data-qid");Wenda.Net.connect("seekhelp",{ask_id:t,qid:n},function(){var e=Wenda.Detail.askAddedTab,t=e.getItem(3);Wenda.Panel.steam(),e.hide(3)})}).delegate(".js-get-expert","click",function(t){t.preventDefault(),e()})}),Dom.ready(function(){function e(e,n,r,i){var s=W("#helpful_tip");s.length||(W(document.body).appendChild('<div id="helpful_tip" class="pop-remark-tips-yes" style="display:none;"></div>'),s=W("#helpful_tip")),r=="0"?s[0].className="pop-remark-tips-no":s[0].className="pop-remark-tips-yes";var o=W(e).getRect();s.html(n),s.css({height:"0px",opacity:0});var u=s.show().getRect(),a=i=="top"?o.height:u.height;s.css({left:o.left+o.width/2-u.width/2+"px",top:o.top-a+"px"}),t(s,o.top-a-20,20)}function t(e,t,n){e.animate({opacity:1,top:t,height:n},500,function(){e.fadeOut(500,"",QW.Easing.easeInStrong)},QW.Easing.easeInStrong)}W(".js-laud").hover(function(e){var t=W(this),n=t.attr("data-op"),r=Number(t.parentNode().attr("data-clicked")),i=n=="1"?"\u6709\u5e2e\u52a9":"\u65e0\u5e2e\u52a9";r&&(i="\u5df2\u8bc4\u4ef7",t.parentNode().query("a,span").css({cursor:"default"})),t.query("span").html(i)},function(){var e=W(this);e.query("span").html(e.attr("data-num"))}),W(".js-laud").on("click",function(t){var n=W(this),r=n.attr("data-op");if(n.parentNode().attr("data-clicked")=="1")return!1;var i=n.parentNode().attr("data-ans_id"),s=Wenda.Info.askId;Wenda.Net.connect("useful",{ask_id:s,ans_id:i,op:r},function(){var t=parseInt(n.attr("data-num"),10)+1;n.attr("data-num",t),n.parentNode().attr("data-clicked","1"),e(n,"+1\u611f\u8c22\u60a8\u7684\u8bc4\u4ef7",r);var i="useful-"+r;Wenda.Info.qid&&(i={dc:"useful-"+r,qid:Wenda.Info.qid}),Wenda.Log.send("mod-remarks",i)},{"default":function(t){e(n,t.errmsg,r)},"finally":function(e){var t=n.query("span").html();isNaN(t)||n.query("span").html(n.attr("data-num"))}})}),W(".console .action").delegate(".js-approve","click",function(t){var n=W(this),r=n.parentNode(".js-form").attr("ans_id"),i=Number(Wenda.Info.qid)==Number(W("#ask-author").attr("index"))?!0:!1,s=Wenda.Info.askId,o=function(){return Number(Wenda.Info.isResolved)?i?"reslove-asker-approve":"reslove-other-approve":i?"unreslove-asker-approve":"unreslove-other-approve"}();if(n.hasClass("approved"))return!1;Wenda.Net.connect("useful",{ask_id:s,ans_id:r,op:"1"},function(){var t=parseInt(n.attr("data-num"),10)+1;n.attr("data-num",t),n.addClass("approved"),n.query("i").html("\u5df2\u8d5e\u8fc7"),e(n,"+1",1),Wenda.Log.send("mod-remarks",o)},{"finally":function(e){var t=n.query("span").html();isNaN(t)||n.query("span").html(n.attr("data-num"))}})})}),$(function(){var e=Wenda.Info.askId;$(".js-form").hover(function(){$(this).find(".js-operate").css("visibility","visible")},function(){$(this).find(".js-operate").css("visibility","hidden")}),$(".js-weibo_daren").on("click",function(){var t=$(".js-hand");t.length>0&&t.hide();var n=$(this),r=n.data("type"),i={ask_title:$(".js-ask-title").text(),ask_id:e,getTags:!0,type:"ask"};r=="answer"&&(i.ans_id=n.parents(".js-form").attr("ans_id"),i.type=r),Wenda.Auth.getWeiboAuth(i)}),$(".js-report, .js-report2").click(function(){var t=$(this).parents(".js-form").attr("ans_id"),n=$(this).attr("data-type"),r=$(this).attr("qid")||"";Wenda.Global.Panel.report(e,t,n,r),!r&&$(".js-report-user").hide()}),$(".js-self-del").click(function(){Wenda.Panel.confirm("auditing","\u786e\u8ba4\u5220\u9664\u5417\uff1f","\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",Wenda.Info.wenda_name,function(){Wenda.Net.connect("deleteask",{ask_id:e},function(){Wenda.Panel.steam({msg:"\u64cd\u4f5c\u6210\u529f",width:300}),setTimeout(function(){location.reload()},3e3)})},function(){})})}),Dom.ready(function(){function t(e){var t={1:{url:"http://p7.qhmsg.com/t0182bfc9f44b85511d.png",word:"\u60a8\u7684\u56de\u7b54\u592a\u68d2\u4e86\uff0c\u9876\u4f60\uff01",name:"\u9876\u725b\u4ec1",className:"gift-niu"},2:{url:"http://p4.qhmsg.com/t0169190f5618ad4c78.png",word:"\u597d\u5e05\u7684\u56de\u7b54\uff0c\u4eb2\uff0c\u592a\u611f\u8c22\u60a8\u5566\uff01",name:"\u9001\u9999\u543b",className:"gift-kiss"},3:{url
:"http://p3.qhmsg.com/t017e3aee6dd181489f.png",word:"\u60a8\u5e2e\u4e86\u6211\u5927\u5fd9\uff0c\u9001\u60a8\u9c9c\u82b1\u8868\u793a\u611f\u8c22\uff01",name:"\u9c9c\u82b1\u96e8",className:"gift-flower"}},n=t[e.data.gift_type],r=e.data.create_time,i=e.data.hostName=="\u533f\u540d\u7f51\u53cb"?"\u63d0\u95ee\u8005":"<a target='_blank' href='/u/"+e.data.ask_qid+"'>"+e.data.hostName+"</a>",s=i+"&nbsp;&nbsp;\u9001\u7ed9\u56de\u7b54\u8005\u4e00\u4efd\u793c\u7269&nbsp;&nbsp;"+n.name+"&nbsp;&nbsp;\u8d60\u8a00\uff1a"+n.word;n&&W(".mod-resolved-ans .js-gift").addClass(n.className).html(s).show()}var e=Wenda.Info.askId;Wenda.Info.isResolved&&Wenda.Net.connect("getgiftinfo",{ask_id:e},t)}),Dom.ready(function(){function t(e,n){$.ajax({url:"/chip/getlistbyip?page="+e,dataType:"JSON"}).done(function(r){var i="";if(r.errno==0){if(n==0&&r.list.length==0)return;n==0&&r.list.length>0&&r.list.length<5&&$(".js-city-change").hide(),r.list.length?($.each(r.list,function(){i+='<li class="clearfix"><a href="/q/'+this.ask_id+'" target="_blank" class="title" text="\u3010\u8be6\u60c5\u9875-\u540c\u57ce\u95ee\u9898\u3011-\u70b9\u51fb" title="'+this.title+'">'+'<span class="city">\u3010'+r.tag+"\u3011</span>"+this.title+"</a>"+'<span class="time">'+this.create_time+"</span>"+"</li>",$(".js-related-city").show(),$(".js-city-list").html(i)}),$(".js-more-rel-city").find("a").attr("href","/c/?id_type=1&tid="+r.tid),r.list.length<5&&$(".js-city-change").data("maxpage",e)):e==0?($(".js-city-list").html("<br/><p>\u6682\u65f6\u8fd8\u6ca1\u6709\u9700\u8981\u5e2e\u52a9\u7684\u4eba\u54e6~</p>"),$(".js-city-change").hide(),$(".js-more-rel-city").hide()):($(".js-city-change").data("maxpage",e-1),e==1?$(".js-city-change").hide():(t(0,1),$(".js-city-change").data("page",0)))}})}var e=W(".js-sh-ipt").val().trim()||W("#js-ask-title").val();e&&e.length>30&&(e=e.slice(0,30)+". . ."),W(".js-rel-kw").html(e.encode4Html()),Ajax.get("/engine/getRelateQuery",{title:e,t:+(new Date)},function(e){var t=e.evalExp().data;t=t.slice(0,8);var n=t.length;if(n<=0)return;var r=[];t.forEach(function(e){r.push('<li><a href="/search/?q='+encodeURIComponent(e)+'" target="_blank">'+e.subByte(20,"...")+"</a></li>")}),W("#js-rel-list").show(),W(".js-list-item").html(r.join(" ")),W(".js-sh-ipt").val()?Wenda.Log.send("js-rel-list","rel-show-byquery"):Wenda.Log.send("js-rel-list","rel-show-bytitle")}),Wenda.Info.isResolved&&t(0,0),$(document.body).delegate(".js-city-change","click",function(e){var n=$(this).data("page"),r=$(this).data("maxpage")>=0?$(this).data("maxpage"):9;n=n==r?0:n+1,$(this).data("page",n),t(n,1)})});var oSafeNoticePanel=null,oSafeSurePanel=null,oSafeDonePanel=null;$.ObjectH.mix(namespace("Wenda.Mid"),function(){function r(){var e=$.Deferred();n.IE()&&e.resolve();if(n.SE())try{e.resolve()}catch(t){alert(t)}return e.promise()}function i(){var e=$.Deferred();return t=="ask"&&Cookie.get("__WD_FIRST_SELFASK")==1&&(Cookie.set("__WD_FIRST_SELFASK","",{path:"/",expires:-1}),Wenda.Info.askMid&&e.resolve()),t=="answer"&&e.resolve(),e.promise()}function s(){var e=$.Deferred();return $.get("/safeOther/checkRecentLogin?time="+(new Date).getTime(),function(n){(n.errno==0&&!n.data.login||n.errno==-1&&t=="ask")&&e.resolve()}),e.promise()}function o(){var e=$.Deferred();return $.post("/safeOther/ismidnoticeopen",{mid:t=="ask"?Wenda.Info.askMid:Wenda.Info.ansMid},function(t){t.errno==0&&(t.data==""||t.data.open==0&&t.data.pop==1)&&e.resolve()}),e.promise()}function u(){l(),t=="ask"?($(".panel-osafe-notice").find(".info").text("\u5f53\u60a8\u7684\u63d0\u95ee\u6709\u65b0\u56de\u7b54\u7b49\u6d88\u606f\u65f6\uff0c\u60a8\u662f\u5426\u613f\u610f\u901a\u8fc7\u5173\u8054360\u5b89\u5168\u536b\u58eb\u76f8\u5173\u6a21\u5757\uff0c\u8ba9\u60a8\u7b2c\u4e00\u65f6\u95f4\u4ece360\u5b89\u5168\u536b\u58eb\u63a5\u6536\u6d88\u606f\u63d0\u9192\uff1f").end().find(".btn-ok").text("\u597d\u7684\uff0c\u6709\u65b0\u56de\u7b54\u8bf7\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u6211"),$(".panel-osafe-done").find(".info").text("\u64cd\u4f5c\u6210\u529f\uff0c\u6709\u65b0\u56de\u7b54\u65f6\u5c06\u4f1a\u901a\u8fc7\u5c4f\u5e55\u53f3\u4e0b\u89d2\u7684\u5f39\u7a97\u901a\u77e5\u60a8\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff01"),Wenda.Log.send("setMidNotice","\u7f51\u9875\u63d0\u95ee\u6210\u529f\u540eMID\u63d0\u9192\u6d6e\u5c42\u5c55\u73b0")):($(".panel-osafe-notice").find(".info").text("\u5f53\u60a8\u7684\u56de\u7b54\u6709\u65b0\u8ffd\u95ee\u6d88\u606f\u65f6\uff0c\u60a8\u662f\u5426\u613f\u610f\u901a\u8fc7\u5173\u8054360\u5b89\u5168\u536b\u58eb\u76f8\u5173\u6a21\u5757\uff0c\u8ba9\u60a8\u7b2c\u4e00\u65f6\u95f4\u4ece360\u5b89\u5168\u536b\u58eb\u63a5\u6536\u6d88\u606f\u63d0\u9192\uff1f").end().find(".btn-ok").text("\u597d\u7684\uff0c\u6709\u65b0\u8ffd\u95ee\u8bf7\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u6211").attr("text","\u7f51\u9875\u56de\u7b54\u6210\u529f\u540eMID\u63d0\u9192\u201c\u597d\u7684\uff0c\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u6211\u201d\u70b9\u51fb").end().find(".btn-no").attr("text","\u7f51\u9875\u56de\u7b54\u6210\u529f\u540eMID\u63d0\u9192\u6682\u4e0d\u5f00\u542f\u70b9\u51fb"),$(".panel-osafe-done").find(".info").text("\u64cd\u4f5c\u6210\u529f\uff0c\u6709\u65b0\u8ffd\u95ee\u65f6\u5c06\u4f1a\u901a\u8fc7\u5c4f\u5e55\u53f3\u4e0b\u89d2\u7684\u5f39\u7a97\u901a\u77e5\u60a8\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff01"),Wenda.Log.send("setMidNotice","\u7f51\u9875\u56de\u7b54\u6210\u529f\u540eMID\u63d0\u9192\u6d6e\u5c42\u5c55\u73b0")),oSafeNoticePanel.showModal()}function a(e){t=e,$.when(r(),i()).then(s).then(o).then(u)}function f(e){Cookie.set(e.cookiename,e.cookieval,{expires:e.exp,path:"/"})}function l(){var e='<div class="mod-security-notice"><h1 class="hd">\u5f00\u542f360\u5b89\u5168\u536b\u58eb\u6d88\u606f\u901a\u77e5\u529f\u80fd</h1><div class="content"><div class="pic"></div><p class="info">\u5f53\u60a8\u7684\u63d0\u95ee\u6709\u65b0\u56de\u7b54\u7b49\u6d88\u606f\u65f6\uff0c\u60a8\u662f\u5426\u613f\u610f\u901a\u8fc7\u5173\u8054360\u5b89\u5168\u536b\u58eb\u76f8\u5173\u6a21\u5757\uff0c\u8ba9\u60a8\u7b2c\u4e00\u65f6\u95f4\u4ece360\u5b89\u5168\u536b\u58eb\u63a5\u6536\u6d88\u606f\u63d0\u9192\uff1f</p><div class="btn"><a text="\u7f51\u9875\u63d0\u95ee\u6210\u529f\u540eMID\u63d0\u9192\u201c\u597d\u7684\uff0c\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u6211\u201d\u70b9\u51fb" class="btn-ok js-ok-open">\u597d\u7684\uff0c\u6709\u65b0\u56de\u7b54\u8bf7\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u6211</a></div><a text="\u7f51\u9875\u63d0\u95ee\u6210\u529f\u540eMID\u63d0\u9192\u6682\u4e0d\u5f00\u542f\u70b9\u51fb" class="btn-no js-no-open">\u6682\u4e0d\u5f00\u542f</a></div></div>';oSafeNoticePanel=Wenda.Panel.create({width:580,height:368,fixed:!0,content:e,backdropOpacity:.4,skin:"panel-osafe-notice"});var t='<div class="mod-makesure-notice"><h1 class="hd">\u786e\u8ba4\u5f00\u542f</h1><div class="content"><div class="center"><a target="_blank" href="/other/midwhitepaper" title="\u4e3a\u4ec0\u4e48\u8981\u5173\u8054\u536b\u58eb\u529f\u80fd\u6a21\u5757"><div class="anzai-pic"></div></a><p class="info">\u63d0\u9192\u670d\u52a1\u9700\u8981\u5173\u8054\u5b89\u5168\u536b\u58eb\u529f\u80fd\u6a21\u5757\uff0c\u662f\u5426\u5141\u8bb8\uff1f</p></div><div class="btn"><a class="btn-sure js-sure-open">\u5141\u8bb8</a><a class="btn-cancel js-cancel-sure">\u4e0d\u5141\u8bb8</a></div></div></div>';oSafeSurePanel=Wenda.Panel.create({width:408,height:209,fixed:!0,content:t,backdropOpacity:.4,skin:"panel-osafe-sure"});var n='<div class="mod-security-notice"><h1 class="hd">\u5f00\u542f360\u5b89\u5168\u536b\u58eb\u6d88\u606f\u901a\u77e5\u529f\u80fd</h1><div class="content"><div class="done-pic"></div><p class="info center">\u64cd\u4f5c\u6210\u529f\uff0c\u6709\u65b0\u56de\u7b54\u65f6\u5c06\u4f1a\u901a\u8fc7\u5c4f\u5e55\u53f3\u4e0b\u89d2\u7684\u5f39\u7a97\u901a\u77e5\u60a8\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff01</p><div class="btn"><a class="btn-done js-done-open">\u5b8c\u6210</a></div></div></div>';oSafeDonePanel=Wenda.Panel.create({width:580,height:368,fixed:!0,content:n,backdropOpacity:.4,skin:"panel-osafe-done"})}var e={},t="",n={IE:function(){try{return wdextcmd.GetMid&&wdextcmd.CallQandAExpert}catch(e){return!1}},SE:function(){try{return external.GetMID(external.GetSID(window))}catch(e){return!1}}};return e.setMidNotice=a,e.getMID=n,e}()),$(document).ready(function(){function e(){var e=$.Deferred();return $.post("/safeOther/setMidNotice",{ask_id:Wenda.Info.askId,ans_id:Wenda.Info.answerId,open:1},function(t){t.errno==0&&e.resolve()}),e.promise()}function t(){Wenda.Mid.getMID.IE()&&wdextcmd.CallQandAExpert("/askid="+Wenda.Info.askId);if(Wenda.Mid.getMID.SE())try{external.AppCmd(external.GetSID(window),"sesafe","CallQAndAExpert","/askid="+Wenda.Info.askId,"",function(e,t){})}catch(e){return!1}}function n(){var e=$.Deferred();return $.post("/safeOther/setMidNotice",{ask_id:Wenda.Info.askId,ans_id:Wenda.Info.answerId,open:0},function(t){t.errno==0&&e.resolve()}),e.promise()}Wenda.Mid.setMidNotice("ask"),$(document.body).delegate(".js-ok-open","click",function(n){n.preventDefault(),$.when(e()).done(function(){t(),oSafeNoticePanel.close(),oSafeDonePanel.showModal()})}).delegate(".js-no-open","click",function(e){e.preventDefault(),$.when(n()).done(function(){oSafeNoticePanel.close()})}).delegate(".panel-osafe-notice .close","click",function(e){$(".panel-osafe-notice").find(".btn-no").attr("text").contains("\u63d0\u95ee")?Wenda.Log.send("setMidNotice","\u7f51\u9875\u63d0\u95ee\u6210\u529f\u540eMID\u63d0\u9192\u5173\u95ed\u6309\u94ae\u70b9\u51fb"):Wenda.Log.send("setMidNotice","\u7f51\u9875\u56de\u7b54\u6210\u529f\u540eMID\u63d0\u9192\u5173\u95ed\u6309\u94ae\u70b9\u51fb")}).delegate(".js-done-open","click",function(e){e.preventDefault(),oSafeDonePanel.close()})}),$(document).ready(function(){function a(){$(window).scroll(function(e){var t=$("body").prop("scrollTop")||$("html").prop("scrollTop"),n=[],r=t+$(window).height()/2;$(".mod-essence-editor .section").each(function(e,t){var i=$(t).offset().top+$(t).height()/2,s=Math.abs(r-i);s<($(window).height()+$(t).height())/2&&n.push(e)});var i=Math.min.apply(null,n);$(".mod-essence-editor .catalog-list li").removeClass("on").eq(i).addClass("on")}),$(".mod-essence-editor").delegate(".catalog-list li","click",function(e){var t=$(this).prevAll("li").length,n=$(".mod-essence-editor .section").eq(t).offset().top,r=this;$("html, body").stop().animate({scrollTop:n+"px"},"normal",function(){$(".mod-essence-editor .catalog-list li").removeClass("on"),$(r).addClass("on")})})}function f(){var n=i.imgUpLoader.initUploader();a(),$(".mod-essence-editor").delegate(".first-add, .default","mouseenter",function(){n.setCurEdui($(this).closest(".edui-toolbar"));var t=$(this).offset(),r=$(".mod-essence-editor").offset();e.css("top",t.top+"px").css("left",t.left-r.left+"px").show()}).delegate(".added .delete-img","click",function(e){n.setCurEdui($(this).closest(".edui-toolbar")),i.imgUpLoader.deleteImg($(this))}).delegate(".edui-icon","click",function(e){var t=$(this).attr("data-title");$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on"),i.textStyle.addStyle(t)}).delegate(".edui-body-container","focus",function(){$(this).removeClass("ph"),$(this).closest(".edui-container").find(".text-style").show()}).delegate(".edui-body-container","mouseup",function(){var e=$(this).closest(".edui-container");i.textStyle.detectTextState(e)}).delegate(".edui-body-container","blur",function(){!$(this).html().stripTags().trim()&&$(this).addClass("ph"),$(this).closest(".edui-container").find(".text-style").hide()}).delegate(".js-switch-attr","click",function(){var e=$(this).closest(".method");s.changeMethodStyle(e)}).delegate(".edit-method-title-btn","click",function(){var e=$(this).closest(".title");s.editMethodName(e,"focus")}).delegate(".method-title-input","blur",function(){var e=$(this).closest(".title");s.editMethodName(e,"blur")}).delegate(".method .delete-item, .tools .delete-item","click",function(){var e=$(this).closest("li");s.deleteItem(e)}).delegate(".method .delete-method","click",function(){var e=$(this).closest(".method");index=e.prevAll(".method").length,s.deleteItem(e),o.deleteNavItem(index)}).delegate(".method .change-position div","click",function(e){var t=$(this).attr("data-dir"),n=$(this).closest("li");s.changeItemPosition(n,t)}).delegate(".add-tool, .add-step-item","click",function(){var t=$(this).attr("data-addItem"),n=$(this).siblings("ul").first();e.css({left:"-1000px",top:"-1000px"}),s.addItem(n,t)}).delegate(".add-method","click",function(){var e=$(this).attr("data-addItem"),t=$(this);s.addMthod(t,e)}).delegate(".submit-btn","click",function(){function n(e){var n=JSON.stringify(e);n.indexOf(r)>-1?Wenda.Panel.confirm({status:"auditing",msg:"\u56fe\u7247\u6b63\u5728\u4e0a\u4f20\uff0c\u60a8\u786e\u8ba4\u63d0\u4ea4\u5417\uff1f",desc:"\u672a\u5b8c\u6210\u4e0a\u4f20\u7684\u56fe\u7247\u5c06\u4f1a\u88ab\u8fc7\u6ee4\u3002",yesFun:function(){n=n.replace(r,""),$("#advance").trigger("essence-submit",[$.parseJSON(n),t])},noFun:function(){$("#advance").html("\u63d0\u4ea4\u7b54\u6848").removeClass("submitting").addClass("submit-btn")}}):$("#advance").trigger("essence-submit",[e,t])}$(this).html("\u6b63\u5728\u63d0\u4ea4...").removeClass("submit-btn").addClass("submitting");var e=u.verify();e&&Wenda.User.checkLoginWithName(function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u9ad8\u7ea7\u7f16\u8f91\u5668-\u63d0\u4ea4"),n(e)},!1)}),$(window).bind("beforeunload",function(){return"\u4eb2\uff0c\u60a8\u786e\u5b9a\u8981\u5173\u95ed\u5417\uff1f\u672a\u63d0\u4ea4\u7684\u56de\u7b54\u5c06\u4f1a\u4e22\u5931\u3002"}),$(document.body).bind("paste",function(e){e.preventDefault();if($(e.target).hasClass("edui-body-container")||$(e.target).closest(".edui-body-container").length>0){var t="";window.clipboardData&&window.clipboardData.getData?(t=window.clipboardData.getData("text").encode4Html(),$(document.body).unbind("paste"),document.execCommand("paste",!1,t),$(document.body).bind("paste",arguments.callee)):e.originalEvent.clipboardData&&(t=e.originalEvent.clipboardData.getData("text").encode4Html().replace(/\x0a/g,"<br/>").replace(/\x0d/g,""),document.execCommand("insertHtml",!1,t))}})}function l(){e=$("#jingyan-upload"),$.extend(s.addItemTpl,{tools:$("#tool-tmpl").html(),step:$("#step-item-tmpl").html(),method:$("#method-tmpl").html()},!0),f()}function c(){$.get("/other/essence").done(function(e){t=Wenda.Panel.create({width:835,fixed:!1,top:0,content:e,backdropOpacity:.6,skin:"panel-jingyan"}),t.onshow=function(){$("#bd").css({overflow:"hidden",height:$(".mod-essence-editor").height()+"px"}),l()},t.onclose=function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u9ad8\u7ea7\u7f16\u8f91\u5668-\u5173\u95ed"),$("#bd").css({overflow:"visible",height:"auto"}),$(window).unbind("beforeunload").unbind("paste"),n++},t.showModal(),c=function(){t.onshow=function(){$("#bd").css({overflow:"hidden",height:$(".mod-essence-editor").height()+"px"})},t.showModal()}})}var e,t,n=0,r="http://p6.qhmsg.com/t01798cd1a6b1065192.gif";UPLOADFAILIMG="http://p1.qhmsg.com/t01383134a68d72f138.png";var i={imgUpLoader:{curEdui:null,initUploader:function(){var t,i=this,s=Wenda.FileUpload.makeFlash({upload_start_handler:function(){e.css({left:"-1000px",top:"-1000px"})},upload_success_handler:function(e,t){t=$.parseJSON(t);var r=t.data&&t.data.url,s=e.id+"_"+n;i.insertImg(r||UPLOADFAILIMG,s)},file_queued_handler:function(e){var t=e.id+"_"+n;i.insertImg(r,t)},button_placeholder_id:"spanButtonPlaceholder2",button_image_url:"",button_width:60,button_height:38});return{getCurEdui:function(){return i.curEdui},setCurEdui:function(e){i.curEdui=e}}},insertImg:function(e,t){var n=this.curEdui.find(".default").first();$("#"+t).length>0?$("#"+t)[0].src=e:(n.find("img")[0].src=e,n.find("img")[0].id=t,n.removeClass("default").addClass("added")),this.computeImgDisplayStyle()},deleteImg:function(e){var t=e.parent(),n="http://p1.qhmsg.com/t015f348eaae49b2283.png";t.find("img")[0].src=n,t.find("img")[0].id="",t.removeClass("added").addClass("default"),this.computeImgDisplayStyle()},computeImgDisplayStyle:function(){var e=2,t=0,n=this.curEdui,r=n.find(".added");r.length==e?(n.find(".first-add").hide(),n.find(".added-img").show(),n.find(".tips").show()):r.length==t?(n.find(".added-img").hide(),n.find(".first-add").show()):(n.find(".first-add").hide(),n.find(".added-img").show(),n.find(".tips").hide())}},textStyle:{addStyle:function(e){document.execCommand(e,!1,!1)},detectTextState:function(e){document.queryCommandState("bold")?e.find(".edui-icon-bold").addClass("on"):e.find(".edui-icon-bold").removeClass("on"),document.queryCommandState("italic")?e.find(".edui-icon-italic").addClass("on"):e.find(".edui-icon-italic").removeClass("on")}}},s={methodIndex:2,addItemTpl:{tools:null,step:null,method:null},addItem:function(e,t){var n=$(this.addItemTpl[t]);e.append(n),this.updateItemIndex(n),n.fadeIn(),this.updateChangePosition()},addMthod:function(e,t){var n=$(this.addItemTpl[t]),r="\u65b9\u6cd5"+this.methodIndex++;n.find(".title .normal").html(r),e.before(n),n.fadeIn(),o.addNavItem(r)},deleteItem:function(t){function i(){t.animate({opacity:"0"},"slow").slideUp(500,function(){n.updateItemIndex(t.nextAll("li")),t.remove(),e.css({left:"-1000px",top:"-1000px"})})}var n=this,r=!1;$(t).find(".edui-body-container").map(function(e,t){var n=$(t).html().stripTags().trim();n&&(r=!0)}),r?Wenda.Panel.confirm({status:"auditing",msg:"\u6b65\u9aa4/\u65b9\u6cd5\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u8ba4\u5220\u9664\u5417\uff1f",yesBtnText:"\u5220\u9664",yesFun:i}):i()},changeItemPosition:function(e,t){var n;t=="up"?(n=e.prev().first(),e.after(n)):(n=e.next().first(),e.before(n)),this.updateItemIndex(e),this.updateItemIndex(n),this.updateChangePosition()},updateChangePosition:function(){var e=$(".mod-essence-editor .method .change-position div");e.css("visibility","visible"),e.first().css("visibility","hidden"),e.last().css("visibility","hidden")},updateItemIndex:function(e){e.map(function(e,t){var n=$(t).prevAll("li:visible").length+1;$(t).find(".list-icon").html(n)})},changeMethodStyle:function(e){e.hasClass("ol")?(e.removeClass("ol"),e.addClass("ul")):(e.removeClass("ul"),e.addClass("ol"))},editMethodName:function(e,t){var n=e.find(".normal"),r=e.find(".method-title-input"),i=e.closest(".method").prevAll(".method").length;if(t=="focus")n.hide(),r.val(n.html().decode4Html()).show().focus();else if(t=="blur"){var s=!1;$(".normal:visible").map(function(e,t){$(t).html()==r.val()&&(Wenda.Panel.alert({msg:"\u5df2\u5b58\u5728\u540c\u540d\u65b9\u6cd5\uff0c\u8bf7\u66f4\u540d\u6216\u8005\u5408\u5e76\u65b9\u6cd5\u3002",yesBtnText:"\u4fee\u6539\u540d\u79f0"}),s=!0)}),s===!1&&(r.hide(),r.val()&&o.replaceNavName(i,r.val().encode4Html()),r.val()&&n.html(r.val().encode4Html()),n.show())}}},o={addNavItem:function(e){$(".mod-essence-editor .catalog-list").append('<li class="nav-step-item"><span>'+e+"</span></li>")},deleteNavItem:function(e){$(".mod-essence-editor .catalog-list").find(".nav-step-item").eq(e).remove()},replaceNavName:function(e,t){$(".mod-essence-editor .catalog-list").find(".nav-step-item span").eq(e).html(t)}},u={error:"",rule:{brief:15,method:30},showErrorInfo:function(e,t){Wenda.Panel.alert({msg:"\u4eb2\uff0c"+e.replace(/\uff0c$/,"")+"\u5199\u7684\u8be6\u7ec6\u4e00\u70b9\u5427~",desc:"\u4e3a\u4e86\u80fd\u66f4\u597d\u7684\u5e2e\u52a9\u7f51\u53cb\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u7b54\u6848\u3002",yesFun:t,yesBtnText:"\u5b8c\u5584\u7b54\u6848"}),$(".mod-essence-editor #submit").html("\u63d0\u4ea4\u7b54\u6848").removeClass("submitting").addClass("submit-btn")},verify:function(){function r(){var t={};$.map(e.methods,function(e,n){var r="";$.map(e.items,function(e,t){e.text&&(r+=e.text.stripTags().trim())}),t[e.paratitle]=r});if($.isEmptyObject(t)){var n=$(".mod-essence-editor .method .title .normal").first().html();t[n]="empty"}return t}var e=this.formatParams(),t=r(),n=this,i=e.brief.text;if(!i||i.stripTags().trim().length<this.rule.brief)return this.showErrorInfo("\u524d\u8a00",function(){$(".mod-essence-editor .catalog-list li").first().click()}),!1;var s={errorText:""};return $.map(t,function(e,t){e.length<n.rule.method&&(s.errorText+=t+"\uff0c")}),s.errorText.length>0?(this.showErrorInfo(s.errorText,function(){var e=s.errorText.split("\uff0c")[0];$(".mod-essence-editor .nav-step-item:contains("+e+")").first().click()}),!1):e},getVerifyList:function(){var e=[];return $(".mod-essence-editor .method .edui-body-container").each(function(t,n){if(e[0]&&$.contains(e[e.length-1][0],$(n)[0]))return!0;var r=$(n).html().stripTags().trim();r&&e.push($(n).closest(".method"))}),e},formatParams:function(){var e={brief:{},tools:{},methods:{}},t=this.getVerifyList(),n=$(".mod-essence-editor .brief"),r=$(".mod-essence-editor .tools"),i=function(e){var t={};return e.map(function(e,n){var r=$(n).attr("src");r&&r!=UPLOADFAILIMG&&(t[e]={type:"img",src:$(n).attr("src")})}),t},s=function(e){var t={};return e.map(function(e,n){var r=$(n).val();r&&(t[e]={text:r})}),t},o=function(e){var t=e.find(".edui-body-container").html(),n=t.trim().replace(/div(?=>)/ig,"p").replace(/[\n\r]/g,"").replace(/style=(["'])[^>]*\1/ig,""),r={text:t.stripTags().trim()?n:"",media:i(e.find(".added-img .added img"))};return $.isEmptyObject(r.media)&&delete r.media,r.text.length==0&&delete r.text,r},u=function(){var e={};return $.map(t,function(t,n){var r={},i=$(t).find(".edui-container");i.map(function(e,t){var n=o($(t));$.isEmptyObject(n)||(r[e]=n)}),$.isEmptyObject(r)||(e[n]={type:"step",paratitle:$(t).find(".title .normal").html().decode4Html(),listtype:$(t).hasClass("ol")?"ol":"ul",items:r})}),e};return e.brief=$.extend({type:"brief",paratitle:"\u524d\u8a00"},o($(".brief .edui-container"))),e.tools={type:"tools",paratitle:"\u6750\u6599",items:s(r.find("li input"))},e.methods=u(),e}};$("#advance").click(function(){c()})}),$(document).ready(function(){function t(e,t,n){n=n||{};var r=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script"),s=!1;i.src=e,n.charset&&(i.charset=n.charset),"async"in n&&(i.async=n.async||""),i.onerror=i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(s=!0,t&&t(),i.onerror=i.onload=i.onreadystatechange=null,r.removeChild(i))},r.insertBefore(i,r.firstChild)}var e=document.write;document.write=function(t){var n=t.match(/src=(["'])([^"']+)\1/)[2],r=document.getElementById("tuiguang"),i=document.createElement("iframe");if(t.indexOf("http://tf.360.cn")==0)return!1;i.width="100%",i.height="100%",i.scrolling="no",i.frameBorder="0",i.allowtransparency="true",i.src=n,i.id="dianjing",r&&r.appendChild(i),document.write=e},t("http://tf.360.cn/e/w.js?_=76db1bfd2b9ad428")}),Dom.ready(function(){function r(r){function a(e,t,n){var r=0,s=[],o=e.split("");for(i=0;i<o.length;i++){var u=o[i],a=encodeURI(u);r+=a.length==1?1:a.length/3,r>t&&r<t+n+1&&s.push(decodeURI(a))}return s.join("")}function f(e,t){var n=o.length;if(n==0)return!1;for(var r=0;r<n;r++)return e=="match"&&o[r].matchword.indexOf(t)!="-1"?!0:e=="real"&&o[r].realword.indexOf(t)!="-1"?!0:!1}var s=QW.Browser.ie,o=[],u=!1;r.list.forEach(function(i){var l=i.ifstr,c=i.start,h=i.length,p=i.searchkey,d=!1;e.forEach(function(e,i){if(d)return;var v=W(e).html(),m=W(e).attr("__t")||v;if(m.indexOf(l)!="-1"){W(e).attr("__t")||W(e).attr("__t",m);var g=a(l,c,h),y="\u70b9\u51fb\u5b9e\u4f53\u8bcd"+n+encodeURIComponent(t)+n+r.version+n+g,b='<a style="color:#87B5F3;cursor:pointer;" data-id="link-to-so" data-c="'+y+'" text="\u70b9\u51fb\u5b9e\u4f53\u8bcd" target="_blank" href="http://www.'+Wenda.Info.root_domain+"/s?q="+encodeURIComponent(p)+'&ie=utf-8&src=wenda_link">'+g+"</a>",w=l.replace(g,b),E=v;!f("match",l)&&E.indexOf(l)!="-1"?E=E.replace(l,w):f("real",g)||(E=E.replace(g,b)),o.push({matchword:l,realword:g}),s&&parseInt(s)<=8&&v.indexOf("<P>")=="-1"&&(E=E.replace(/(\r\n|\n|\r)/g,"<br>")),W(e).html(E),d=!0,u=!0}})}),u?Wenda.Log.send("link-to-so","\u5339\u914d\u6210\u529f","\u5339\u914d\u6210\u529f"+n+t+n+r.version):Wenda.Log.send("link-to-so","\u5339\u914d\u4e0d\u6210\u529f","\u5339\u914d\u4e0d\u6210\u529f"+n+t+n+r.version),e.removeAttr("__t")}var e=W(".mod-resolved-ans .resolved-cnt");if(!e.length)return;if(W(".mod-resolved-ans").attr("data-resolved-type")=="essence")return;var t=location.href,n=String.fromCharCode(1);Wenda.Log.send("link-to-so","\u5f00\u59cb\u5339\u914d","\u5f00\u59cb\u5339\u914d"+n+t),QW.loadJsonp("http://pagerec.f.360.cn/search_tip?cb=%callbackfun%&query="+encodeURIComponent(t),function(e){e&&e.list.length?r(e):Wenda.Log.send("link-to-so","\u5185\u94fe\u540e\u7aef\u4e3a\u7a7a","\u5185\u94fe\u540e\u7aef\u4e3a\u7a7a"+n+t)})}),$.ObjectH.mix(namespace("Wenda.Cate"),function(){function r(e,t){if(n[t]==undefined){var r=[];e.forEach(function(e){t==e.pid&&r.push("<option value="+e.cid+" title="+e.name+">"+e.name+"</option>")}),n[t]=r.join("")}return n[t]}function i(e,n){t?n&&n():$.ajax(e).done(function(e){t=e.data,n&&n()})}function s(e){function o(){$("select[level]",e.node).on("change",function(){f($(this))}),i(e.port_opts,function(){l(e.level,e.pid),e.defaultData&&u(typeof e.defaultData[0]=="object"?e.defaultData[0]:e.defaultData),$(n).triggerHandler("ready")})}function u(t){t.forEach(function(t,n){var r=c(n+Number(e.level));r.val(t),f(r)})}function a(){var t={};return t.value=[],t.title=[],$("select[level]",e.node).each(function(n,r){r=$(this);var i=r.val()||"";if(i==""||i=="-1")return e.level==2||e.level==3?!0:!1;var s=$('option[value="'+i+'"]',r).attr("title");return t.value.push(i),t.title.push(s),!0}),t}function f(t){var r=t.attr("to_level"),i=t.val();e.showIndex.length>1&&e.showIndex.contains(r)?l(r,i):$(n).trigger("change")}function l(i,s){if(!i||!s){$(n).triggerHandler("change");return}var o=r(t[i],s),u=c(i);if(!e.alwaysShow&&!o){u.html("").hide(),i=="2"&&c("3").html("").hide(),$(n).triggerHandler("change");return}var a=e.defaultText[Number(i)-1];a&&(o='<option selected="true" value="-1">'+a+"</option>"+o),u.html(o),e.showIndex.contains(i)&&u.show(),f(u)}function c(t){return $("select[level="+t+"]",e.node)}var n={},s={node:"",defaultData:[573],defaultText:["","\u4e0d\u9009","\u4e0d\u9009"],showIndex:["1","2","3"],alwaysShow:!1,port_opts:{url:"/category/getallcates/",type:"post",data:""},level:"1",pid:"0"},e=$.extend({},s,e);return e.node.length?(o(),n.setData=u,n.getData=a,n):!1}function o(e){for(var n=1;n<4;n++){var r=t[n];for(var i=r.length;i--;)if(r[i].cid==e)return r[i].name}}var e={},t=null,n={};return e.bind=s,e.getTitle=o,e}()),$.ObjectH.mix(namespace("Wenda.Ask.Panel"),function(){var e=Wenda.Panel,t='<div class="{$className}"><strong>{$msg}</strong><div id="{$id}"><select size="{$num}" class="class-table" level="1" to_level="2" style="display:none;"></select><select size="{$num}" class="class-table" level="2" to_level="3" style="display:none;"></select><select size="{$num}" class="class-table class-table-last" level="3" style="display:none;"></select></div></div>',n={cateSelect:function(n,r,i,s){n=n||"\u4e3a\u60a8\u7684\u95ee\u9898\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u5206\u7c7b\uff1a";var o={skin:"panel-01",fixed:!0,width:488,content:t.tmpl({id:"category-pannel",className:"select-bd",msg:n,num:16}),header:"<h3>\u8bf7\u9009\u62e9\u5206\u7c7b</h3>",footer:'<div class="confirm-btn"><span class="btn btn-2"><button>\u786e\u5b9a</button></span></div><div class="clear"></div>'},u=e.create(o),a={node:$("#category-pannel")},f=Wenda.Cate.bind($.ObjectH.mix(a,r));return u.showModal(),$("."+o.skin).find(".confirm-btn").click(function(){i&&$.isFunction(i)&&(u.close(),i(f.getData()))}),s&&$.isFunction(s)?u.onclose=s:s&&s=="remove"&&(u.onclose=function(){u.remove()}),u.cateComp=f,u},cateSelectFloat:function(e){function o(){e.node.toggle()}var n={},r={id:"category-float-pannel",node:"",className:"classify-bd",msg:"",num:10};e=$.ObjectH.mix(e,r);if(!e.node.length)return!1;var i=t.tmpl(e);e.node.hide().html(i);var s=Wenda.Cate.bind({node:$("#"+e.id),defaultText:e.defaultText,defaultData:[e.defaultData],port_opts:e.port_opts,level:e.level,pid:e.pid,alwaysShow:e.alwaysShow,showIndex:e.showIndex});return e.alwaysShow?e.node.off("mouseleave"):e.node.on("mouseleave",function(t){e.node.hide()}),n.cateComp=s,n.toggle=o,n},safeCate:function(e){var t='<div class="{$className}"><strong>{$msg}</strong><div id="{$id}"><select size="{$num}" class="class-table l1" level="1" to_level="2" style="display:none;"></select><select size="{$num}" class="class-table l2" level="2" style="display:none;"></select><select size="{$num}" class="class-table l3" level="3" style="display:none;"></select></div></div>',n={id:"category-float-pannel",node:"",className:"classify-bd",msg:"",num:16},r={};e=$.ObjectH.mix(e,n);if(!e.node.length)return!1;var i=t.tmpl(e);e.node.html(i);var s=Wenda.Cate.bind({node:$("#"+e.id),defaultData:[1]});return r.cateComp=s,r},nologinAsk:function(){var t='<div class="log-item" id="nologin_btn" data-index="1"><div class="nolog-btn"></div><div class="log-guide">\u76f4\u63a5\u63d0\u95ee</div><div class="log-tips">\u65e0\u9700\u767b\u5f55\uff0c\u4e00\u952e\u63d0\u95ee</div><div class="log-tips-ask">( \u53ea\u80fd\u4f7f\u7528\u4e24\u6b21\u54e6~ )</div></div><div class="log-item" id="login_btn" data-index="2"><div class="qh-btn"></div><div class="log-guide">360\u5e10\u53f7\u767b\u5f55</div><div class="log-tips">\u66f4\u591a\u529f\u80fd\u3001\u5feb\u901f\u901a\u77e5</div></div><div id="log-item-bg" class="log-item-bg"></div>',n=e.create({width:300,fixed:!0,content:t,header:"<h3>\u8bf7\u9009\u62e9\u63d0\u95ee\u7684\u65b9\u5f0f</h3>",backdropOpacity:.2,skin:"panel-dialog panel-nologin-ask"});return n.onready=function(){$(this.node).delegate(".log-item","mouseenter",function(e){e.preventDefault();var t=$(this).attr("data-index");$("#log-item-bg").stop().animate({opacity:1,top:Number($(this).position().top)+1+"px"},150)})},n.showModal(),n},anonyNick:function(){var t='<div class="bd"><p class="desc">\u4eb2\uff0c\u4e3a\u4e86\u8ba9\u793e\u533a\u7684\u5c0f\u4f19\u4f34\u4eec\u8ba4\u8bc6\u60a8\uff0c\u8bf7\u8bbe\u7f6e\u6635\u79f0\uff1a</p><p><input type="text" class="text" id="nick_value" maxlength="5" value="\u95ee\u7b54\u6e38\u5ba2"><a id="nick_submit" href="javascript:;" class="btn btn-2-m"><span>\u63d0\u4ea4</span></a></p><p style="color: #ccc;">\u6635\u79f0\u4e0d\u8981\u8d85\u8fc75\u4e2a\u82f1\u6587\u5355\u8bcd\u6216\u80055\u4e2a\u4e2d\u6587\u5b57\u5466</p></div>',n=e.create({width:400,fixed:!0,cancel:function(){return!1},content:t,header:"\u9996\u6b21\u76f4\u63a5\u63d0\u95ee\u8bbe\u7f6e",footer:"",backdropOpacity:.2,skin:"panel panel-dialog panel-nick"});return n.onready=function(){this._$("close").hide()},n}};return n}()),$(document).ready(function(){function r(e,t,n,r,i){var s=e=="admin_ask"?"deleteaskbymgr":"deleteansbymgr";Wenda.Net.connect(s,{ask_id:t,ans_id:n,reason:r},function(){Wenda.Panel.steam({msg:"\u5220\u9664\u6210\u529f",width:300}),i=="detail"&&setTimeout(function(){location.reload()},1e3)})}function i(e,n){Wenda.Net.connect("setrecommendanswer",{ask_id:t,ans_id:e},function(){n=="admin"?$("#js-no-good-ans-btn").removeAttr("data-type").trigger("click","autoClick"):(Wenda.Panel.steam({msg:"\u63a8\u8350\u6210\u529f,2\u79d2\u540e\u9875\u9762\u81ea\u52a8\u5237\u65b0",width:500}),setTimeout(function(){location.reload()},2e3))})}function s(e){Wenda.Net.connect("cancelrecomanswer",{ask_id:e},function(){Wenda.Panel.steam({msg:"\u53d6\u6d88\u6210\u529f",width:500}),setTimeout(function(){location.reload()},500)})}function o(e){Wenda.Net.connect("setexcellentanswer",{ask_id:t,ans_id:e},function(){window.parent.$("#js-no-good-ans-btn").removeAttr("data-type").click()})}function u(){Wenda.Net.connect("cancelrecomanswer",{ask_id:t},function(){window.parent.$("#js-no-good-ans-btn").removeAttr("data-type").click()})}function a(e){var t=$(this),r=n.cateSelect("\u8f6c\u79fb\u5230\u5206\u7c7b:",!1,function(t){var n=t.value,r=n.pop();Wenda.Net.connect("changecatabymgr",{ask_id:e,dcid:r},function(){Wenda.Panel.steam({msg:"\u8f6c\u79fb\u6210\u529f",width:300})})},"remove")}location.href.indexOf("/userMgr/mgraskdetail?ask_id")!=-1&&top===self&&(location.href="/userMgr/mgrasklist"),Wenda.Log.sendClose();var e=!0;$(".js-admin-apply-btn").click(function(t){t.preventDefault();if(!e)return;e=!1;var n=$(this).find("span"),r=Number(Wenda.Info.userRole),i=Wenda.Info.applyStatus;if(r){Wenda.Panel.alert("\u8bf7\u4e0d\u8981\u91cd\u590d\u7533\u8bf7\u54e6","\u60a8\u5df2\u7ecf\u662f\u7ba1\u7406\u5458\u65e0\u9700\u518d\u7533\u8bf7\u3002\u82e5\u60f3\u664b\u7ea7\u8bf7\u5230\u7ba1\u7406\u5458\u540e\u53f0\u7533\u8bf7\uff0c\u8c22\u8c22\uff01","","","");return}var s="";i=="0"?s="\u60a8\u5df2\u63d0\u4ea4\u8fc7\u7ba1\u7406\u5458\u7533\u8bf7\u8868\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u6211\u4eec\u7684\u7b54\u590d\uff0c\u8c22\u8c22\uff01"
:i=="1"&&(s="\u60a8\u5df2\u7ecf\u662f\u7ba1\u7406\u5458\u65e0\u9700\u518d\u7533\u8bf7\u3002\u82e5\u60f3\u664b\u7ea7\u8bf7\u5230\u7ba1\u7406\u5458\u540e\u53f0\u7533\u8bf7\uff0c\u8c22\u8c22\uff01");if(s){Wenda.Panel.alert("\u8bf7\u4e0d\u8981\u91cd\u590d\u7533\u8bf7\u54e6",s,"","","");return}$.ajax({url:"/userMgrApply/checkApply",timeout:5e3,beforeSend:function(){n.html("\u8df3\u8f6c\u4e2d...")},success:function(t){if(t.errno===0)window.location.href="/userMgrApply/apply";else if(t.errno===-1&&t.errmsg){if(t.errmsg.black===1)Wenda.Panel.alert("\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u5df2\u7ecf\u88ab\u62c9\u9ed1","\u62c9\u9ed1\u540e\u4e00\u4e2a\u6708\u4e4b\u5185\uff0c\u4e0d\u80fd\u518d\u7533\u8bf7","","","");else{var r="<br/>";t.errmsg.user_level&&t.errmsg.user_level===1?r+='<span class="apply_text apply_error">\u95ee\u7b54\u7b49\u7ea7\u226516</span><br/>':r+='<span class="apply_text apply_suc">\u95ee\u7b54\u7b49\u7ea7\u226516</span><br/>',t.errmsg.accept&&t.errmsg.accept===1?r+='<span class="apply_text apply_error">\u91c7\u7eb3\u7387\u226530%</span><br/>':r+='<span class="apply_text apply_suc">\u91c7\u7eb3\u7387\u226530%</span><br/>',Wenda.Panel.alert("\u975e\u5e38\u62b1\u6b49\uff0c\u60a8\u8fd8\u672a\u7b26\u5408\u8981\u6c42\uff01","\u8bf7\u7b26\u5408\u6761\u4ef6\u540e\u518d\u6b21\u7533\u8bf7\uff0c\u6211\u4eec\u7b49\u5f85\u60a8\u7684\u52a0\u5165\uff01"+r,"","","")}e=!0,n.html("\u7533\u8bf7\u52a0\u5165")}},error:function(){e=!0,n.html("\u7533\u8bf7\u52a0\u5165"),Wenda.Panel.alert("\u975e\u5e38\u62b1\u6b49\uff0c\u8bf7\u6c42\u5931\u8d25\uff01","\u7531\u4e8e\u7f51\u7edc\u4e0d\u7a33\u5b9a\u7533\u8bf7\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u7533\u8bf7\uff01","","","")}})});if(!$("#user_info").attr("role"))return!1;var t=Wenda.Info.askId,n=Wenda.Ask.Panel;(function(){var e=location.href;if(e.indexOf("/userMgr/mgraskdetail")!="-1"){e.queryUrl("get_next")&&$(".pagination .pages a").each(function(e,n){$(n).attr("href","/userMgr/mgraskdetail?ask_id="+t+"&pn="+$(n).attr("href").queryUrl("pn"))});function n(e,n){var r=window.parent.location.href,i=r.queryUrl("pn")?r.queryUrl("pn"):0,s=e.data("next-page")!==""?parseInt(e.data("next-page")):parseInt(i*window.parent.SIZE+window.parent.CURIDX);if(window.parent.location.href.indexOf("/userMgr/specifiedasklist")!=-1||e.data("type")!="no-recomm")s+=1;var o="";if(n==="autoClick")o="/userMgr/mgraskdetail?ask_id="+t+"&get_next=1&next_pn="+s;else{var u=e.data("next-flag");o="/userMgr/mgraskdetail?ask_id="+t+"&next_flag="+u+"&get_next=1&next_pn="+s}var a=r.split("?")[1];if(a){var f=a.queryUrl();delete f.pn,o+="&"+$.ObjectH.encodeURIJson(f)}o+=window.parent.location.href.indexOf("/userMgr/specifiedasklist")!=-1?"&from_specified=1":"",location.href=o}function r(e){var n=Wenda.Panel.show({skin:"panel-dialog",title:"\u9ad8\u7ea7\u7f16\u8f91\u5185\u5bb9",fixed:!0,content:'<iframe src="/userMgr/getAdvancedAns?ask_id='+t+"&ans_id="+e+'"'+'width="715" height="502" scroll="no" frameborder="0"></iframe>',quickClose:!0,backdropOpacity:.4,onclose:function(){this.remove()}})}(function(){var t=$(".js-count-clock"),n=t.find("i"),r=n.text();if(t.length)var i=setInterval(function(){if(r==0){clearInterval(i),t.hide(),$(".no-good-ans-btn a").removeClass("noclick"),$(".js-nogod-btn").attr("id","js-no-good-ans-btn"),$(".js-noans-btn").attr("id","js-can-not-ans-btn");return}r--,n.text(r)},1e3);$(".pages a").click(function(){var e=$(this),t=/(&countNum=)\d+/,n=r>0?r-1:-1,i=e.attr("href"),s=i.indexOf("&countNum")!=-1?i.replace(t,"$1"+n):i+"&countNum="+n;e.attr("href",s)})})(),$(".no-good-ans-btn").on("click","#js-can-not-ans-btn",function(e,t){var r=$(this);Wenda.Log.send("","<\u7ba1\u7406\u5458\u540e\u53f0>\u3010\u6b64\u9898\u6211\u4e0d\u4f1a\uff0c\u6362\u4e00\u9898\u3011\u70b9\u51fb"),setTimeout(function(){n(r,t)},500)}),$(".no-good-ans-btn").on("click","#js-no-good-ans-btn",function(e,r){var i=$(this);if($(this).data("type")=="no-recomm"){var s=window.parent.location.href,o=s.queryUrl("answer_schema"),u={ask_id:t};o=="1"&&(u.is_advance="1"),Wenda.Net.connect("admin_nogood_answer",u,function(){n(i,r)})}else n(i,r)}),$(".js-admin-excellent-detail").click(function(e){r($(this).closest(".js-form").attr("ans_id"))})}})(),$(".js-admin-mba").click(function(e){e.preventDefault();var t=$(this).closest(".js-form").attr("ans_id"),n=$(".js-editor-best"),r=Wenda.Editor.get("common_editor");n.find("#advance").hide().end().find("#fill-blank").remove().end().find('input[name="ans_id"]').val(t),r.setContent($(this).closest(".bd").find(".resolved-cnt").html(),!0),n.show(),$("html,body").animate({scrollTop:n.offset().top-120}),r.focus(!0)}),$(".js-admin-del").click(function(e){e.preventDefault();var n="",i=$(this).parents(".js-form"),s=$(this).attr("data-type"),o=$(this).attr("data-qtype");i.length&&(n=i.attr("ans_id"));var u=$(this).parents("tr");u.find(".lnk").css("color","#999"),t=u.attr("id")||t;var a={skin:"panel-02 panel-report",fixed:!0,content:'<div class="group group-3"><h4>\u8bf7\u8c28\u614e\u505a\u5220\u9664\u64cd\u4f5c\uff0c\u5e76\u5728\u8f93\u5165\u6846\u91cc\u5199\u51fa\u5220\u9664\u7406\u7531\uff1a</h4><div class="textarea"><textarea id="rp_content" name="content" maxlength="100" style="height: 80px;" placeholder="\u8bf7\u8f93\u5165\u5220\u9664\u7406\u75315\u5230100\u4e2a\u5b57" ></textarea></div></div>',header:'<h3><i class="ico-report"></i>\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f</h3>',footer:'<span class="mark" style="float:left;" id="js-error"></span><span class="btn btn-2"><button id="rp_btn">\u786e\u8ba4</button></span>'},f=Wenda.Panel.show(a,470);f.onclose=function(){f.remove()},$("#rp_btn").click(function(e){var i=$("#rp_content").val().trim();e.preventDefault(),r(s,t,n,i,o),f.close()})}),$(".js-admin-recom").click(function(e){e.preventDefault();var t=$(this).parents(".js-form").attr("ans_id"),n=$(this).data("page-type");Wenda.Panel.confirm("auditing","\u786e\u8ba4\u63a8\u8350\u5417\uff1f","\u63a8\u8350\u6210\u529f\u540e\u4f1a\u7acb\u523b\u751f\u6548\uff01",Wenda.Info.wenda_name,function(){i(t,n)},function(){})}),$(".js-admin-cancel-recom").click(function(e){e.preventDefault();var n=$(this).closest("tr").data("askid")||t;Wenda.Panel.confirm("auditing","\u786e\u8ba4\u53d6\u6d88\u63a8\u8350\u7b54\u6848\u5417\uff1f","\u53d6\u6d88\u6210\u529f\u540e\u4f1a\u7acb\u523b\u751f\u6548\uff01",Wenda.Info.wenda_name,function(){s(n)},function(){})}),$(".js-admin-mcate").click(function(e){e.preventDefault();var n=$(this).parents("tr");n.find(".lnk").css("color","#999"),a(n.attr("id")||t)}),$(".js-admin-excellent").click(function(e){e.preventDefault();var t=$(this).parents(".js-form").attr("ans_id");Wenda.Panel.confirm("auditing","\u786e\u8ba4\u52a0\u7cbe\u5417\uff1f","\u52a0\u7cbe\u6210\u529f\u540e\u4f1a\u7acb\u523b\u751f\u6548\uff01",Wenda.Info.wenda_name,function(){o(t)},function(){})}),$(".js-admin-excellent-cancel").click(function(e){e.preventDefault(),Wenda.Panel.confirm("auditing","\u786e\u8ba4\u53d6\u6d88\u52a0\u7cbe\u5417\uff1f","\u53d6\u6d88\u6210\u529f\u540e\u4f1a\u7acb\u523b\u751f\u6548\uff01",Wenda.Info.wenda_name,function(){u()},function(){})}),$(".js-admin-report").click(function(e){e.preventDefault();var n="",r=$(this).parents(".js-form"),i=$(this).attr("data-type");r.length&&(n=r.attr("ans_id"));var s=$(this).parents("tr");s.find(".lnk").css("color","#999");var o=s.attr("id")||t,u=$(this).attr("qid")||"";$.get("/userMgr/reportExist/",{ask_id:o,ans_id:n,t:+(new Date)},function(e){var t=e.errno|0;t==0?Wenda.Global.Panel.report(o,n,i,u):Wenda.Panel.steam({msg:"\u8be5\u6761\u63d0\u95ee\u6216\u56de\u7b54\u5df2\u88ab\u5176\u4ed6\u7ba1\u7406\u5458\u4e3e\u62a5",width:300})})})}),$(document).ready(function(){function e(){var e=$(".js-mod-music-show");e.length&&(require.config({shim:{"http://s1.qhmsg.com/static/df49ff93ecee9c38/inlineplayer.js":{deps:["http://s1.qhmsg.com/static/166a31537a8e324c/md5.js"]}}}),require(["http://s1.qhmsg.com/static/166a31537a8e324c/md5.js","http://s0.qhmsg.com/static/c693a9140822e44c/soundmanager2nodebug.js","http://s1.qhmsg.com/static/df49ff93ecee9c38/inlineplayer.js"],function(t,n,n){e.each(function(e){var t=$(this).find(".mod-music-show"),n=$(this).data("music-id");new PlayBox({id:n,playboxElement:t}),t.on("showplayer"+n,function(){Wenda.Log.send("","\u7f51\u9875\u8be6\u60c5\u9875\u97f3\u4e50\u64ad\u653e\u5668\u5c55\u73b0","showplayer"+n)})})}),$.Browser.ie6&&DD_belatedPNG.fix(".mod-music-show i,.mod-music-show .disk .mark,.mod-music-show .disk .down-arrow"))}function t(){setTimeout(function(){var e=$(".js-music-add-toolbar");e.length&&(require.config({shim:{"http://s4.qhmsg.com/static/e008270e352c60f9/musicadd.js":{deps:["http://s1.qhmsg.com/static/166a31537a8e324c/md5.js"]}}}),require(["http://s1.qhmsg.com/static/166a31537a8e324c/md5.js","http://s4.qhmsg.com/static/e008270e352c60f9/musicadd.js"],function(e,t){t.init()}))},1e3)}(function(){e(),t()})()}),function(){function getHeight(e){e=e||document;var t=e.defaultView||e.parentWindow,n=e.compatMode,r=e.documentElement,i=t.innerHeight||0,s=r.scrollHeight,o;return n!="CSS1Compat"&&(r=e.body,s=r.scrollHeight),n&&window.navigator.userAgent.toLowerCase().indexOf("opera")<0&&(i=r.clientHeight),s=Math.max(s,i),o=(document.body==null?0:document.body.offsetHeight)||document.documentElement.offsetHeight,s==i?o:s}function XPC(e){var t={isParent:parent==window,iframeName:"XPC_IFRAME"};this.options=mix(e||{},t,!1),this._initialize()}function Pigeon(e){var t={iframeName:"pigeon-iframe",autoReport:!1,validVersion:!1};this.options=mix(t,e,!0),this.xpc=new XPC(this.options),this._t=0,this._init()}var VERSION="1.0.0",PigeonUtils=PigeonUtils||{},JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var mix=function(e,t,n){n=n||function(t,n,r){return e[r]||r in e?t:n},n===!0&&(n=function(e,t){return t});for(var r in t)e[r]=n(e[r],t[r],r,e,t),e[r]===undefined&&delete e[r];return e},createEvents=function(e){var t={};return mix(e,{on:function(e,n){t[e]=t[e]||[],t[e].push(n)},fire:function(n,r){r=r||{},mix(r,{type:n,target:e,preventDefault:function(){r.returnValue=!1}});var i=t[n]||[];for(var s=0;s<i.length;s++)i[s](r);return r.returnValue!==!1}}),e},addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e.attachEvent("on"+t,function(){e["e"+t+n].call(e,window.event)}))},usePM=typeof window.postMessage!="undefined";mix(XPC.prototype,{_initialize:function(){function t(t){var n={};try{n=JSON.parse(t)}catch(r){}e.fire("message",n)}var e=this;createEvents(this);if(usePM)addEvent(window,"message",function(e){t(e.data)});else{var n=window.name;setInterval(function(){window.name!=n&&window.name!=""&&(n=window.name,t(n))},50)}},send:function(e){var t=this.options,n=t.win||(t.isParent?window.frames[t.iframeName]:parent);if(!n)throw new Error("XPC","can not find window!");var r={data:e,ts:(+(new Date)).toString(36)};r=JSON.stringify(r),usePM?n.postMessage(r,"*"):n.name=r}},!0);var frameHeight=0;mix(Pigeon.prototype,{_init:function(){var e=this,t=this.options;createEvents(this),this.xpc.on("message",function(n){var r=n.data;if(!r||!r.pigeon)return;(!t.validVersion||r.v==VERSION)&&e.fire(r.type,{data:r.data})}),t.autoReport&&this.reportHeightChange(),this.receive=this.on},report:function(e,t){var n=this.xpc;try{n.send({v:VERSION,type:e||"message",data:t||null,pigeon:!0})}catch(r){}},reportHeight:function(e){var t=this.options;e||(e=getHeight()),e!=frameHeight&&(this.report("heightChange",e),frameHeight=e)},reportHeightChange:function(e){e=typeof e=="undefined"?!0:e;var t=this,n=this._t;e?n=setInterval(function(){t.reportHeight()},50):clearInterval(n)}}),mix(Pigeon,new Pigeon),window.Pigeon=Pigeon,window.PigeonUtils={addEvent:addEvent}}(),$(function(){function i(){return $(this).html().trim()=="\u5220\u9664\u5730\u56fe"?o():n=Wenda.Panel.show({skin:"mod-map-panel",content:e,onclose:function(){this.remove()}}),!1}function s(){return Wenda.Editor.get("common_editor").editor}function o(){var e=s(),n=e.body;$(".js-so-map-ifr",n).parent().remove(),$(n).off("keydown.somap"),$(".js-map-toolbar").html("\u5730\u56fe"),$("#map_info").val(""),t=!1,Wenda.Info.hasInsertMap=0}function u(e){var n=s();n.execCommand("insertHTML",'<p><iframe data-pid="'+(e.query.pid||"")+'" data-type="'+e.type+'"  class="mod-so-map-ifr js-so-map-ifr" width="98%" height="350" frameborder="no" border="0" name="editor-so-map" src="'+e.url+' "></iframe></p>'),$("#map_info").val(JSON.stringify(e)),Wenda.Info.hasInsertMap=1,t||(t=!0,$(n.body).on("keydown.somap",function(e){var t=this;Wenda.Timer.undelay("so-map"),Wenda.Timer.delay("so-map",100,function(){$(".js-so-map-ifr",t).length==0&&o()})}))}function a(){var e=$(this);return e.hasClass("disabled")?!1:(e.addClass("disabled"),r.report("message","wendaCallback"),!1)}var e='<div class="boxs"><h3><img src="http://p1.qhmsg.com/d/inn/312e88ae/ditu_logo.png"></h3><iframe frameborder="no" border="0" id="so-map-ifr" name="so-map-ifr" src="http://map.'+Wenda.Info.root_domain+"/wenda/?k="+$("#js-ask-title").val()+'"></iframe>'+'<p><a class="js-map-insert" href="javascript:;" text="<\u7f51\u7ad9>\u95ee\u7b54\u8be6\u60c5\u9875-\u5730\u56fe\u6d6e\u5c42\u6dfb\u52a0\u5230\u7b54\u6848\u3010\u70b9\u51fb\u3011">\u6dfb\u52a0\u5230\u7b54\u6848</a></p>'+"</div>",t=!1,n,r=new Pigeon({iframeName:"so-map-ifr"});r.receive("message",function(e){var r=e.data;if(t)return;if(r&&r.url!=""){if(!r.url.match(/^https?:\/\/map\.(?:haosou|so)\.com/ig))return;u(r),$(".js-map-toolbar").html("\u5220\u9664\u5730\u56fe"),n.close()}else Wenda.Panel.steam({msg:"\u4eb2\uff0c\u60a8\u8fd8\u6ca1\u6709\u9009\u62e9\u5730\u70b9\u6216\u8def\u7ebf\u54e6",width:350});$(".js-map-insert").removeClass("disabled")}),$(document).on("click",".js-map-toolbar",i).on("click",".js-map-insert",a),Wenda.Timer.delay("so-map",3e3,function(){$(".js-so-map-ifr").each(function(){var e=$(this),t=e.attr("data-type")||"",n=e.attr("data-pid");t.toLowerCase()=="poi"&&$.ajax({url:"http://restapi.map."+Wenda.Info.root_domain+"/api/simple.php?sid=1006",data:{pguid:n},type:"get",dataType:"jsonp",jsonp:"jsoncallback"}).done(function(t){t&&t.status=="E1"&&e.before('<span style="display:inline-block; padding:0 10px; height:20px; line-height:20px; text-align:center; background:#fcf7d9; color:#fe0000; font-size:12px; border:1px solid #f4e3af;">\u5730\u56fe\u4fe1\u606f\u5df2\u8fc7\u671f</span><br/>')})})})}),$(document).ready(function(){(function(){$("#js-detail").height()<$("#js-aside").height()+170?$("#e_idea_wenda_detail_rightBox").remove():$("#e_idea_wenda_detail_rightBox").css({visibility:"visible"});if($("#js-detail").height()<$("#js-aside").height()+410)return;var e=$("#js-haosou-qlist");$.get("/engine/getSoHotQuery",{t:+(new Date)},function(t){if(t.errno==0&&t.data.length){var n=[];$.each(t.data,function(e,t){n.push('<li><a text="<\u7f51\u9875\u8be6\u60c5\u9875><\u5927\u641c\u7d22>\u5927\u5bb6\u90fd\u5728\u641c<\u70b9\u51fb>" href="'+t.url+'" target="_blank">'+t.title+"</a></li>")}),e.show().find("ul").html(n.join("")).find("li").eq(n.length-1).addClass("last"),Wenda.Log.send("<\u7f51\u9875\u8be6\u60c5\u9875><\u5927\u641c\u7d22>\u5927\u5bb6\u90fd\u5728\u641c<\u5c55\u73b0>")}}),$("#js-haosou-qr").show()})()}),$(function(){function t(t){var r={toqid:t.data("toqid"),userName:t.data("username")},o={"-1":function(e){var t='<div class="panel-dialog-sys panel-alert cls"><div class="msg"><div class="auditing"><span><i></i>\u60a8\u8fd8\u4e0d\u53ef\u4ee5\u548cTA\u79c1\u4fe1\u4ea4\u6d41\u54e6~<br>\u4e0d\u8fc7\uff0c\u60a8\u53ef\u4ee5\uff1a</span></div><p>1.\u52a0\u5165\u4e50\u5e2e\u56e2\uff0c\u5373\u53ef\u548c\u672c\u56e2\u6210\u5458\u79c1\u4fe1\u4ea4\u6d41&nbsp;&nbsp;&nbsp;<br>2.\u6210\u4e3a\u4e50\u5e2e\u56e2\u56e2\u957f\uff0c\u5373\u53ef\u5411\u5168\u90e8\u95ee\u7b54\u7528\u6237\u79c1\u4fe1\u4ea4\u6d41</p></div><a class="btn-ctn js-close-msgpanel" href="/team" target="blank"><span class="btn btn-2 js-alert"><button>\u53bb\u4e50\u5e2e\u56e2</button></span></a></div>',n=Wenda.Panel.create({skin:"panel-dialog js-msg-panel",width:400,content:t,onready:function(){var e=$(".js-msg-panel");$(".js-close-msgpanel",e).click(function(e){Wenda.Log.send("\u79c1\u4fe1\u6d88\u606f_\u65e0\u6743\u9650\u5f39\u7a97_\u53bb\u4e50\u5e2e\u56e2\u70b9\u51fb"),n.close()}),$("span.close",e).click(function(e){Wenda.Log.send("\u79c1\u4fe1\u6d88\u606f_\u65e0\u6743\u9650\u5f39\u7a97_X\u6389\u70b9\u51fb")}),Wenda.Log.send("\u79c1\u4fe1\u6d88\u606f_\u65e0\u6743\u9650\u5f39\u7a97_\u5f39\u7a97\u5c55\u793a")}}).showModal()}};Wenda.Ajax.get("checkRole",r,function(t){Wenda.Panel.create({skin:"panel-dialog-msgbox",width:600,content:t.result,onready:function(){var t=$(".panel-dialog-msgbox"),r=$(".js-form-msg",t),o=$(".js-msg-relation",t),u=$(".js-send-msgbtn",t);e.need(r,!1),u.click(function(e){return e.preventDefault(),i(r)&&s(r)&&n(r),!1}),o.click(function(e){e.preventDefault();var n=$(this),r={toqid:n.data("toqid"),flag:"block"},i="\u786e\u8ba4\u5c4f\u853d\u6b64\u7528\u6237?",s="\u5c4f\u853d\u540e\uff0c\u60a8\u5c06\u4e0d\u518d\u6536\u5230\u5176\u79c1\u4fe1\uff0c\u4e5f\u4e0d\u80fd\u5411\u5176\u53d1\u9001\u79c1\u4fe1";n.hasClass("off")&&(r.flag="cancelblock",i="\u786e\u8ba4\u53d6\u6d88\u5c4f\u853d\u6b64\u7528\u6237?",s="\u53d6\u6d88\u5c4f\u853d\u540e\uff0c\u60a8\u53ef\u4ee5\u6b63\u5e38\u6536\u53d1\u8be5\u7528\u6237\u7684\u79c1\u4fe1"),Wenda.Panel.confirm("",i,s,"",function(){Wenda.Ajax.get("blockCancelUser",r,function(){n.toggleClass("off"),u.toggleClass("off"),n.hasClass("off")?$(".msg-err-tips",t).text("\u60a8\u5df2\u5c4f\u853d\u4e86\u6b64\u7528\u6237\uff0c\u8bf7\u70b9\u51fb\u53f3\u4e0a\u89d2\u53d6\u6d88\u5c4f\u853d").show():$(".msg-err-tips",t).hide()})})})},onclose:function(){Wenda.Log.send("\u79c1\u4fe1\u6d88\u606f_\u79c1\u4fe1TA\u5f39\u7a97_\u5173\u95ed\u70b9\u51fb")}}).showModal()},o)}function n(t){var n={normal:function(e){$(".msg-err-tips",t).text(e.errmsg).fadeIn(300).delay(3e3).fadeOut(300)},"-3001":function(e){$(".js-msg-relation",t).addClass("off"),$(".js-send-msgbtn",t).addClass("off"),$(".msg-err-tips",t).text(e.errmsg).show()},"-110":function(){$(".msg-captcha-tips",t).addClass("error").css("display","inline-block")},"-10001":function(){msgboxPanel.close(),Wenda.User.login()},end:function(){e.change(t,!0)}};Wenda.Ajax.post("sendPrivateMsg",t,function(){location.href="/user/msglist/"+Wenda.Info.qid},n)}function i(t){if($(".js-send-msgbtn",t).hasClass("off"))return!1;if(t){var n=$(".js-word-num i",t).text();if(n>0&&n<=1e3)return!0;$(".msg-err-tips",t).text("\u8bf7\u8f93\u51651-1000\u5b57\u7684\u79c1\u4fe1\u5185\u5bb9").fadeIn(300).delay(3e3).fadeOut(300),e.change(t,!0)}return!1}function s(t){if(t){var n=$(".msg-captcha-tips",t);if(e.verify(t))return!0;n.addClass("error").css("display","inline-block")}return!1}var e=Wenda.Captcha;$(document).on("click",".js-send-message",function(e){e.preventDefault(),t($(this))});var r="oninput"in document?"input":"keyup";$(document).on(r,".panel-dialog-msgbox .js-msg-content",function(e){var t=$(".panel-dialog-msgbox"),n=$(this).val().length;$(".js-word-num i",t).text(n)})}),$(function(){var e=$("#js-mod-novice-task");e.on("click",".js-user-login",function(){$("#js-not-login").find(".user-login").click(),Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u9a6c\u4e0a\u767b\u5f55\u6309\u94ae_\u70b9\u51fb")}),e.on("click",".js-user-reg",function(){$("#js-not-login").find(".user-reg").click(),Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u7acb\u5373\u6ce8\u518c\u6309\u94ae_\u70b9\u51fb")}),e.find(".js-user-login").length&&Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u51fa\u767b\u5f55\u63d0\u793a\u6240\u6709\u9875\u9762_\u5c55\u793a"),e.find(".do-task").length&&Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u51fa\u53bb\u505a\u65b0\u624b\u4efb\u52a1\u6240\u6709\u9875\u9762_\u5c55\u793a"),e.find(".answer-guide").length&&Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u51fa\u7b54\u9898\u653b\u7565\u6240\u6709\u9875\u9762_\u5c55\u793a"),$(".mod-log-scoll-mall").length&&Wenda.Log.send("\u65b0\u624b\u5f15\u5bfc_\u8be6\u60c5\u9875_\u51fa\u673a\u52a8\u5e7f\u544a\u56fe\u6240\u6709\u9875\u9762_\u6d4f\u89c8")});