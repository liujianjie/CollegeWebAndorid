function Suggest(){var e=this;this.init=function(t){var n={iWrap:"#js-sh-input",input:$("#js-sh-ipt"),sArea:$(".js-suggest-area"),sList:$(".js-suggest-list"),sBtn:$(".js-suggest-search-btn")};e.options=$.extend(!0,n,t),e.options.sList.delegate(".item","mouseenter",e.onHover).delegate(".item","click",e.onClick).on("mouseleave",e.cancelHover),e.options.input.on("keydown",e.onKeydown).on("focus",e.onFocus),navigator.userAgent.match("QIHU 360EE")&&e.options.input.on("input",function(){$(this).trigger("focus")}),$(document).on("click",function(t){var n=$(t.target).closest(e.options.iWrap).length;n?e.showBox():(e.options.input.blur(),e.hideBox())})},this.defaultVal="",this.timer="suggest",this.getCurIndex=function(){var t=Number(e.options.sList.find("li.selected").attr("data-index"));return t>=0?t:-1},this.getData=function(t){$.ajax({url:"http://suggest.wenda.so.com/index.php",type:"GET",dataType:"jsonp",jsonpCallback:"callback",jsonp:"cb",data:{biz:"wenda",word:t,fmt:"jsonp"}}).done(function(t){e.updateData(t)}).fail(function(){})},this.updateData=function(t){var n="";for(var r=0;r<t.length;r++)t[r]==e.defaultVal&&Wenda.Util.remove(t,e.defaultVal);for(var r=0;r<t.length;r++){if(t[r]==e.defaultVal)continue;n+='<li class="item" data-index="'+r+'">'+'<a href="###" text="\u7f51\u9875\u63d0\u95ee\u8bcd\u8bed\u8054\u60f3\u7b2c'+Number(r+1)+'\u6761">'+t[r]+"</a>","</li>"}e.options.sList.html(n),n?e.showBox():e.hideBox()},this.onKeydown=function(t){var n=t.keyCode,r=e.options.sList,i=r.children("li").length;if(n==38){t.preventDefault(),clearInterval(e.timer);var s=e.getCurIndex();if(i){if(s==-1){e.setInputVal(e.renderHover(i-1));return}if(s==0){e.cancelHover(),e.setInputVal(e.defaultVal);return}e.setInputVal(e.renderHover(s-1))}}else if(n==40){clearInterval(e.timer);var s=e.getCurIndex();if(i){if(s==-1){e.setInputVal(e.renderHover(0));return}if(s==i-1){e.cancelHover(),e.setInputVal(e.defaultVal);return}e.setInputVal(e.renderHover(e.getCurIndex()+1))}}else if(n==13){clearInterval(e.timer);var o=e.options.sList.find("li.selected").text();o&&e.setInputVal(o),e.options.sBtn.trigger("click")}else e.options.input.trigger("focus")},this.onFocus=function(t){clearInterval(e.timer),e.timer=setInterval(function(){if(e.options.input.val()!=e.defaultVal){var t=e.defaultVal=e.options.input.val();t?e.getData(t):(e.options.sList.html(""),e.hideBox()),$(e.options.iWrap).css("border-color","#00bc3e")}else clearInterval(e.timer)},50)},this.onClick=function(){var t=$(this).text();e.setInputVal(t),e.hideBox(),e.options.sBtn.trigger("click")},this.onHover=function(){var t=$(this).attr("data-index");e.renderHover(t)},this.renderHover=function(t){return e.options.sList.children("li").removeClass("selected").end().find("li[data-index="+t+"]").addClass("selected").text()},this.cancelHover=function(){e.options.sList.find("li").removeClass("selected")},this.setInputVal=function(t){e.options.input.val(t).attr("value",t)},this.showBox=function(){e.options.sList.html()?e.options.sArea.show():e.options.sArea.hide()},this.hideBox=function(){e.options.sArea.hide()}}function getListener(e,t,n){var r;return t=t.toLowerCase(),(r=e.__allListeners||n&&(e.__allListeners={}))&&(r[t]||n&&(r[t]=[]))}function getDomNode(e,t,n,r,i,s){var o=r&&e[t],u;!o&&(o=e[n]);while(!o&&(u=(u||e).parentNode)){if(u.tagName=="BODY"||s&&!s(u))return null;o=u[n]}return o&&i&&!i(o)?getDomNode(o,t,n,!1,i):o}$(function(){try{window.onerror=function(){var e={locationUrl:location.href||"",errormsg:arguments[0]||"",jsfile:arguments[1]||"",rownum:arguments[2]||"",colnum:arguments[3]||""};$.get("/home/frontMonitor",e,function(){})}}catch(e){}}),function(e,t){e.Popup=t()}(this,function(){function r(){this.destroyed=!1,this.__popup=$("<div />").attr({tabindex:"-1"}).css({display:"none",position:"absolute",left:0,top:0,bottom:"auto",right:"auto",margin:0,padding:0,outline:0,border:"0 none"}).html(this.innerHTML).appendTo("body"),this.__backdrop=$("<div />"),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],e++}var e=0,t=!("minWidth"in $("html")[0].style),n=!t;return $.extend(r.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",backdropBackground:"#000",backdropOpacity:.7,innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed)return this;var n=this,r=this.__popup;return this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,this.__ready||(r.addClass(this.className),this.modal&&this.__lock(),r.html()||r.html(this.innerHTML),t||$(window).on("resize",this.__onresize=function(){n.reset()}),this.__dispatchEvent("ready"),this.__ready=!0),r.addClass(this.className+"-show").attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute").show(),this.__backdrop.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(e){return!this.destroyed&&this.open&&(e!==undefined&&(this.returnValue=e),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),r.current===this&&(r.current=null),this.__unlock(),this.__popup.remove(),this.__backdrop.remove(),this.blur(),t||$(window).off("resize",this.__onresize),this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var e=this.follow;return e?this.__follow(e):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,t=r.current;t&&t!==this&&t.blur(!1);if(!$.contains(e,this.__getActive())){var n=this.__popup.find("[autofocus]")[0];!this._autofocus&&n?this._autofocus=!0:n=e,this.__focus(n)}return r.current=this,this.__popup.addClass(this.className+"-focus"),this.__zIndex(),this.__dispatchEvent("focus"),this},blur:function(){var e=this.__activeElement,t=arguments[0];return t!==!1,this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(e,t){return this.__getEventListener(e).push(t),this},removeEventListener:function(e,t){var n=this.__getEventListener(e);for(var r=0;r<n.length;r++)t===n[r]&&n.splice(r--,1);return this},__getEventListener:function(e){var t=this.__listener;return t||(t=this.__listener={}),t[e]||(t[e]=[]),t[e]},__dispatchEvent:function(e){var t=this.__getEventListener(e);this["on"+e]&&this["on"+e]();for(var n=0;n<t.length;n++)t[n].call(this)},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(r){}},__zIndex:function(){var e=r.zIndex++;this.__popup.css("zIndex",e),this.__backdrop.css("zIndex",e-1),this.zIndex=e},__center:function(){var e=this.__popup,t=$(window),n=$(document),r=this.fixed,i=r?0:n.scrollLeft(),s=r?0:n.scrollTop(),o=t.width(),u=t.height(),a=e.width(),f=e.height(),l=(o-a)/2+i,c=(u-f)*382/1e3+s,h=e[0].style;h.left=Math.max(parseInt(l),i)+"px",h.top=Math.max(parseInt(c),s)+"px"},__follow:function(e){var t=e.parentNode&&$(e),n=this.__popup;this.__followSkin&&n.removeClass(this.__followSkin);if(t){var r=t.offset();if(r.left*r.top<0)return this.__center()}var i=this,s=this.fixed,o=$(window),u=$(document),a=o.width(),f=o.height(),l=u.scrollLeft(),c=u.scrollTop(),h=n.width(),p=n.height(),d=t?t.outerWidth():0,v=t?t.outerHeight():0,m=this.__offset(e),g=m.left,y=m.top,b=s?g-l:g,w=s?y-c:y,E=s?0:l,S=s?0:c,x=E+a-h,T=S+f-p,N={},C=this.align.split(" "),k=this.className+"-",L={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"top",bottom:"top",left:"left",right:"left"},O=[{top:w-p,bottom:w+v,left:b-h,right:b+d},{top:w,bottom:w-p+v,left:b,right:b-h+d}],M={left:b+d/2-h/2,top:w+v/2-p/2},_={left:[E,x],top:[S,T]};$.each(C,function(e,t){O[e][t]>_[A[t]][1]&&(t=C[e]=L[t]),O[e][t]<_[A[t]][0]&&(C[e]=L[t])}),C[1]||(A[C[1]]=A[C[0]]==="left"?"top":"left",O[1][C[1]]=M[A[C[1]]]),k+=C.join("-"),i.__followSkin=k,t&&n.addClass(k),N[A[C[0]]]=parseInt(O[0][C[0]]),N[A[C[1]]]=parseInt(O[1][C[1]]),n.css(N)},__offset:function(e){var t=e.parentNode,n=t?$(e).offset():{left:e.pageX,top:e.pageY};e=t?e:e.target;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return n;var s=i.frameElement,o=$(r),u=o.scrollLeft(),a=o.scrollTop(),f=$(s).offset(),l=f.left,c=f.top;return{left:n.left+l-u,top:n.top+c-a}},__lock:function(){var e=this,t=this.__popup,i=this.__backdrop,s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",opacity:0,background:this.backdropBackground};t.addClass(this.className+"-modal"),r.zIndex=r.zIndex+2,this.__zIndex(),n||$.extend(s,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"}),i.css(s).animate({opacity:this.backdropOpacity},150).insertAfter(t).attr({tabindex:"0"}).on("focus",function(){e.focus()})},__unlock:function(){this.modal&&(this.__popup.removeClass(this.className+"-modal"),this.__backdrop.remove(),delete this.modal)}}),r.zIndex=1024,r.current=null,r}),function(e,t){e.artDialog=t()}(this,function(){var e="6.0.0",t=0,n=new Date-0,r=!("minWidth"in $("html")[0].style),i="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),s=!r&&!i,o=function(e,r,u){var a=e=e||{};if(typeof e=="string"||e.nodeType===1)e={content:e,fixed:!i};e=$.extend(!0,{},o.defaults,e),e._=a;var f=e.id=e.id||n+t,l=o.get(f);return l?l.focus():(s||(e.fixed=!1),e.quickClose&&(e.modal=!0,a.backdropOpacity||(e.backdropOpacity=0)),$.isArray(e.button)||(e.button=[]),u!==undefined&&(e.cancel=u),e.cancel&&e.button.push({id:"cancel",value:e.cancelValue,callback:e.cancel}),r!==undefined&&(e.ok=r),e.ok&&e.button.push({id:"ok",value:e.okValue,callback:e.ok,autofocus:!0}),o.list[f]=new o.create(e))},u=function(){};u.prototype=Popup.prototype;var a=o.prototype=new u;return o.version=e,o.create=function(e){var n=this;$.extend(this,new Popup);var r=$(this.node).html(e.innerHTML);return this.options=e,this._popup=r,$.each(e,function(e,t){typeof n[e]=="function"?n[e](t):n[e]=t}),e.zIndex&&(Popup.zIndex=e.zIndex),r.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(e){n._trigger("cancel"),e.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),r.on("click","[data-id]",function(e){var t=$(this);t.attr("disabled")||n._trigger(t.data("id")),e.preventDefault()}),e.quickClose&&$(this.backdrop).on("onmousedown"in document?"mousedown":"click",function(){n._trigger("cancel")}),this._esc=function(e){var t=e.target,r=t.nodeName,i=/^input|textarea$/i,s=Popup.current===n,o=e.keyCode;if(!s||i.test(r)&&t.type!=="button")return;o===27&&n._trigger("cancel")},$(document).on("keydown",this._esc),this.addEventListener("remove",function(){$(document).off("keydown",this._esc),delete o.list[this.id]}),t++,o.oncreate(this),this},o.create.prototype=a,$.extend(a,{content:function(e){return this._$("content").empty("")[typeof e=="object"?"append":"html"](e),this.reset()},title:function(e){return this._$("title").text(e),this._$("header")[e?"show":"hide"](),this},width:function(e){return this._$("content").css("width",e),this.reset()},height:function(e){return this._$("content").css("height",e),this.reset()},button:function(e){e=e||[];var t=this,n="";return this.callbacks={},this._$("footer")[e.length?"show":"hide"](),typeof e=="string"?n=e:$.each(e,function(e,r){r.id=r.id||r.value,t.callbacks[r.id]=r.callback,n+='<button type="button" data-id="'+r.id+'"'+(r.disabled?" disabled":"")+(r.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+r.value+"</button>"}),this._$("button").html(n),this},statusbar:function(e){return this._$("statusbar").html(e)[e?"show":"hide"](),this},_$:function(e){return this._popup.find("[i="+e+"]")},_trigger:function(e){var t=this.callbacks[e];return typeof t!="function"||t.call(this)!==!1?this.close().remove():this}}),o.oncreate=$.noop,o.getCurrent=function(){return Popup.current},o.get=function(e){return e===undefined?o.list:o.list[e]},o.list={},o.defaults={content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'},o}),function(e,t){e.artDialog=t()}(this,function(){return!1 in window||!1 in window?{}:($.extend(artDialog.defaults,{cancelValue:"",className:"panel",backdropOpacity:.4,innerHTML:'<div i="dialog" class="panel-content"><div i="header" class="hd"><h3 i="title"></h3></div><div i="content" class="bd"></div><div i="footer" class="ft"><div i="statusbar"></div><div i="button"></div></div></div><span i="close" class="close"></span>'}),$.each("header footer".split(" "),function(e,t){artDialog.prototype[t]=function(e){return this._$(t).empty("").html(e).show(),this.reset()}}),$.extend(artDialog.prototype,{width:function(e){return this.__popup.css("width",e),this.reset()},height:function(e){return this.__popup.css("height",e),this.reset()},_trigger:function(e){var t=this.callbacks[e];return typeof t!="function"||t.call(this)!==!1?this.close():this}}),artDialog.oncreate=function(e){e._$("dialog").removeClass(e.skin),e.__popup.addClass(e.skin)},artDialog)}),function(){function e(e){$.extend(!0,this,e||{})}e.prototype={set:function(e,t){var n=this.expires;typeof n=="number"&&(n=new Date,n.setTime(n.getTime()+this.expires)),document.cookie=e+"="+escape(t)+(n?";expires="+n.toGMTString():"")+(this.path?";path="+this.path:"")+(this.domain?"; domain="+this.domain:"")+(this.secure?"; secure":"")},get:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},remove:function(e){var t=this.expires;this.expires=new Date(0),this.set(e,""),this.expires=t}},e.set=function(t,n,r){(new e(r)).set(t,n)},e.get=function(t,n){return(new e(n)).get(t)},e.remove=function(t,n){(new e(n)).remove(t)},window.Cookie=e}(),$.extend(namespace("Wenda.Info"),function(){var e={serverTime:"",pageTime:"",domTime:"",loadTime:"",qid:"",username:"",headerUrl:"",experter_flag:"",bubbled:"",level:"",adoption:"",ansnum:"",coin:"0",askId:"",askCid:"",isHide:"",root_domain:"so.com",root_name:"360\u641c\u7d22",wenda_domain:"wenda.so.com",wenda_name:"360\u95ee\u7b54"};return window.$INFO&&$.extend(!0,e,window.$INFO),$(function(){Wenda.Info.domTime=new Date}),$(window).on("load",function(){Wenda.Info.loadTime=new Date}),e}()),$.ObjectH.mix(namespace("Wenda.Panel"),function(){function n(e,n){return artDialog({skin:"panel-dialog",title:"\u95ee\u7b54\u63d0\u793a",fixed:!0,width:300,content:t.body.prompt.tmpl({msg:e}),onready:function(){var e=this;e.onclose=function(){e.remove()},$(".js-prompt",this.node).one("click",function(){var t=$(".ipt-ctn").find("textarea").val();$.isFunction(n)&&n(t),e.close()})}}).showModal()}function r(e,n,r,i,s,o){var u={status:r||"auditing",msg:e,desc:n||"",title:i||Wenda.Info.wenda_name+"\u63d0\u793a",yesFun:s||$.noop,yesBtnText:o||"\u786e\u5b9a"};return $.type(e)==="object"&&$.extend(u,e),artDialog({skin:"panel-dialog",width:430,fixed:!0,title:u.title,content:t.body.alert.tmpl({msg:t.content.less.tmpl({msg:u.msg,status:u.status,desc:u.desc}),yesBtnText:u.yesBtnText}),onready:function(){var e=this;e.onclose=function(){e.remove()},$(".js-alert",this.node).one("click",function(){u.yesFun(),e.close()})}}).showModal()}function i(e,n,r,i,s,o,u,a){var f={status:e||"auditing",msg:n,desc:r||"",title:i||Wenda.Info.wenda_name+"\u63d0\u793a",yesFun:s||$.noop,noFun:o||$.noop,yesBtnText:u||"\u786e\u5b9a",noBtnText:a||"\u53d6\u6d88"};return $.type(e)==="object"&&$.extend(f,e),artDialog({skin:"panel-dialog",title:f.title,fixed:!0,content:t.body.confirm.tmpl({msg:t.content.less.tmpl({status:f.status,msg:f.msg,desc:f.desc}),yesBtnText:f.yesBtnText,noBtnText:f.noBtnText}),width:430,onready:function(){var e=this;e.onclose=function(){e.remove()},$(".js-confirm",this.node).one("click",function(){f.yesFun(),e.close()}),$(".js-no",this.node).one("click",function(){f.noFun(),e.close()})}}).showModal()}function s(e){if($.browser&&$.browser.msie&&parseInt($.browser.version)<=6){r("\u8bbe\u5907\u7ef4\u62a4\u516c\u544a",e);return}var n=u({cancel:!1,fixed:!0,skin:"panel-ab",content:t.content.error.tmpl({msg:e}),width:710});$(".pannel-error .close").on("click",function(e){e.preventDefault(),n.close().remove()})}function o(e,n){e=$.extend({},{msg:"\u64cd\u4f5c\u6210\u529f",width:185,iconClass:"ico-ok",stayMs:3e3},e);var r=artDialog({cancel:!1,fixed:!0,skin:"panel-ab",content:t.content.steam.tmpl({msg:e.msg,iconClass:e.iconClass}),width:e.width,onclose:n}).show();setTimeout(function(){r.close().remove()},e.stayMs)}function u(e,t){return t&&(e.width=t),artDialog(e).showModal()}var e={},t={body:{confirm:'<div class="panel-dialog-sys panel-confirm cls"><div class="msg">{$msg}</div><div class="btn-ctn"></div><span class="btn btn-2 js-confirm" style="margin-right:15px;"><button>{$yesBtnText}</button></span><span class="btn btn-2 js-no"><button>{$noBtnText}</button></span></div>',alert:'<div class="panel-dialog-sys panel-alert cls"><div class="msg">{$msg}</div><div class="btn-ctn"><span class="btn btn-2 js-alert"><button>{$yesBtnText}</button></span></div></div>',prompt:'<div class="panel-dialog-sys panel-prompt cls"><div class="msg" style="min-height: 24px;">{$msg}</div><div class="ipt-ctn"><textarea rows="5" style="padding: 8px; width:252px" ></textarea></div><div class="btn-ctn"><span class="btn btn-2-s js-prompt"><button>\u53d1\u9001</button></span><span style="margin-left:10px;" i="close" class="btn btn-2-s"><button>\u53d6\u6d88</button></span></div></div>'},content:{steam:'<div class="ui-sub-suc"><div class="ui-sub-suc-inner"><i class="{$iconClass}"></i>{$msg}</div></div>',less:'<div class="{$status}"><span><i></i>{$msg}</span></div><p>{$desc}</p>',error:'<div class="pannel pannel-error"><div class="hd"><a href="#" class="close"></a></div><div class="bd"><p>{$msg}</p></div></div>'}};return e.alert=r,e.confirm=i,e.prompt=n,e.steam=o,e.error=s,e.show=u,e.create=artDialog,e}()),$.ObjectH.mix(namespace("Wenda.Log"),function(){var e={},t=location.search.queryUrl("ref")||"",n=function(n,r,i,s){arguments.length==1&&(r=n,n="");if(r){var o={cId:n,ref:t,c:i,dc:r};typeof r=="object"&&(r.dc||(r.dc=""),$.extend(o,r));if(typeof r=="string")try{r=r.evalExp(),typeof r=="object"&&($.ObjectH.isElement(r)?r=o.dc:(r.dc||(r.dc=""),$.extend(o,r)))}catch(u){}if(typeof s=="object"&&s.length){var a=s.prop("href");typeof a=="string"&&a.indexOf("http")>-1&&s.attr("href")!="#"&&(o.f=a)}window.$INFO&&!!window.$INFO._sid&&(o.sid=window.$INFO._sid),$(Wenda.Log).trigger("onAddParams",o),monitor.log(o,"click"),$(e.event).triggerHandler("sended",[{id:n,text:r,el:s}])}};$(document).ready(function(){function r(){var e=window.screen;return e.width+"_"+e.height}var e=monitor.util.getLocation,n=monitor.util.getReferrer;monitor.util.getLocation=function(){return e().replace(/\d+/i,"ID")},monitor.util.getReferrer=function(){return t||n()},monitor.getTrack=function(){var e=this.data.getTrack();try{e.dpi=r(),e.dpr=window.devicePixelRatio,$(Wenda.Log).trigger("onAddParams",e)}catch(t){}return this.log(e,"track"),this},monitor.setProject("360_qihu_wenda"),window.monitorTrackDisabled||monitor.getTrack(),$("body").delegate("a,button","mousedown",function(e){var t=$(this),n=t.attr("text"),r=t.attr("data-c"),i=t.attr("data-id");i||(i=t.closest("[id]").attr("id")),n||(n=t.closest("[text]").attr("text")),i=="js-rel-list"&&($(".js-sh-ipt").val()?n="rel-byquery":n="rel-bytitle"),i=="qaresult"&&t.attr("index")&&(n="qaresult-item-"+t.attr("index"));if(n){Wenda.Log.send(i,n,r,t);if(n=="<\u7f51\u7ad9>\u3010\u9876\u90e8\u6211\u8981\u63d0\u95ee\u3011\u70b9\u51fb"||n=="<\u7f51\u7ad9>\u3010\u9996\u9875\u672a\u767b\u5f55\u6211\u8981\u63d0\u95ee\u3011\u70b9\u51fb"||n=="aside_ask_btn")window.monitorDclickName=n}})});var r=function(e,t){function s(){r=new Date}function o(){r&&(n+=new Date-r)}function u(){r&&(n+=new Date-r);try{monitor.setConf("clspageUrl","http://s.360.cn/w360/x.html"),i.f=n>0?n:0,e==1?window.__init_sendClose_dc?i.dc=window.__init_sendClose_dc:t&&(i.dc=t):t&&(i.dc=t),monitor.log(i,"clspage")}catch(s){}}arguments.length==0&&(e=!0,priority=0),window["__init_sendClose_dc"]==undefined&&(window.__init_sendClose_dc=t);var n=0,r,i={en:"",act:"cp"};e?window["__init_sendClose"]==undefined&&(window.__init_sendClose=1,window.addEventListener?(window.addEventListener("blur",s),window.addEventListener("focus",o),window.addEventListener("beforeunload",u)):window.attachEvent&&(window.attachEvent("onblur",s),window.attachEvent("onfocus",o),window.attachEvent("onbeforeunload",u))):u()};return e.send=n,e.sendClose=r,e.event={},e}()),$.ObjectH.mix(namespace("Wenda.Timer"),function(){function r(e,t,r){var i=e||5,s="__countdown"+n+"__";o(s,1e3,function(){i==1?(u(s),r&&r()):(i--,t&&t(i))})}function i(e,n,r){t[e]=setTimeout(r,n)}function s(e){clearTimeout(t[e])}function o(e,t,n){i(e,t,function(){n(),o(e,t,n)})}function u(e){clearTimeout(t[e])}function a(){var e,t={},n,r,i,s=0,o=!1,u=function(e){return e<=9&&(e="0"+e),e};return t.localize=function(e){var t=e/1e3,n=u(parseInt(t%60,10)),r=u(parseInt(t%3600/60,10)),i=u(parseInt(t%86400/3600,10)),s=i+"\uff1a"+r+"\uff1a"+n;return s},t.go=function(){var e=new Date,n=s-e,u=0;n<=0&&(e<r?(u=1,n=r-e):(u=2,n=e-r));var a=t.localize(n);i&&i(u,a),o&&setTimeout(function(){t.go()},1e3)},t.countdownByData=function(e,n,u){i=u,s=new Date(e),r=new Date(n),o=!0,t.go()},t.stop=function(){o=!1},t}function f(){var e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e}var e={},t={},n=0;return e.countdown=r,e.create=a,e.delay=i,e.undelay=s,e.loop=o,e.unloop=u,e.midnight=f,e}()),$.ObjectH.mix(namespace("Wenda.Menu"),function(){function n(e){var n={id:"",nav:null,aPanel:null,delay:"",showFunc:null,hideFunc:null,hoverClass:""},e=$.ObjectH.mix(e,n),r=null,i=function(){t.delay(e.id,e.delay,function(){var t=e.hideFunc?e.hideFunc($(this),e.aPanel):!0;t&&e.aPanel.hide(),r&&r.removeClass(e.hoverClass)})},s=function(){t.undelay(e.id);var n=$(this),s=e.showFunc?e.showFunc(n,e.aPanel,e):!0;s?(e.aPanel.show(),r&&r.removeClass(e.hoverClass),n.addClass(e.hoverClass),r=n):i()};e.nav.hover(s,i),e.aPanel.hover(function(n){t.undelay(e.id)},i)}function r(e){var t={},n={nav:"",menu:"",query:"li",evt:"mouseover",hoverClass:"on",isParentHover:!1,defaultIndex:"1",type:"default"},e=$.ObjectH.mix(e,n);if(!e.nav.length||!e.menu.length)return!1;var r=null,i=function(n){var i=o(n),s=e.isParentHover?i.nav.parent().closest():i.nav;s.removeClass(e.hoverClass),i.menu.hide(),r=null,$(t).triggerHandler("hide",[i])},s=function(n){var i=o(n),s=e.isParentHover?i.nav.parent().closest():i.nav;s.addClass(e.hoverClass),i.menu.show(),r=n,$(t).triggerHandler("show",[i])},o=function(t){return{nav:e.nav.find("[index="+t+"]"),menu:e.menu.find("[index="+t+"]")}},u=function(n){e.type=="toggle"&&n==r?i(n):(r&&i(r),s(n),$(t).triggerHandler("change",[{index:n}]))};return e.nav.delegate(e.query,e.evt,function(e){var t=$(this),n=t.attr("index");n&&u(n)}),e.defaultIndex&&u(e.defaultIndex),t.change=u,t.getItem=o,t.hide=i,t.show=s,t}function i(e,t){$(e).hover(function(){$(this).addClass(t)},function(){$(this).removeClass(t)})}var e={},t=Wenda.Timer;return e.popup=n,e.tab=r,e.hover=i,e}()),$.extend(namespace("Wenda.ReferEnum"),function(){function s(){var e=Wenda.Util.queryUrl(location.href,"cid-pre")+"",t=document.referrer;return e&&l(e,n)?e:(e="1009801",e)}function o(){var e=location.href,t=document.referrer,n="";return t.match(i.my_notice)?(n="1000801",n):t.match(i.my_ask)?(n="1000601",n):(t==""?n="1009901":n="1009801",n)}function u(e){var n=location.href,r=document.referrer,s=Wenda.Util.queryUrl(location.href,"cid-pre")+"";if(s&&l(s,t))return s;if(!r)return s="1000905",s;if(n.match(i.safe_ask_page))return s="2000101",s;s="10009";var o=Wenda.Util.queryUrl(n,"src");if(o=="4")return s+="01",s;if(o=="6")return s+="02",s;s="10001";var u=Wenda.Util.queryUrl(n,"ref");return u=="search"?(s+="03",s):u=="wenda_searchnone"?(s+="02",s):u=="datail2"?(s+="04",s):u=="wenda_search"?(s+="06",s):u=="gaokao_panel"?(s+="07",s):(s="1000101",s)}function a(e,i){i=i.toString();var s=i.substring(0,3),o=i.substring(3,5),u=i.substring(5,7),a="";c=null;if(e=="ask")c=t,a="\u63d0\u95ee\u6765\u6e90-";else if(e=="answer")c=n,a="\u56de\u7b54\u6765\u6e90-";else{if(e!="accept")return"";c=r,a="\u91c7\u7eb3\u6765\u6e90-"}return c!=null?(s=="100"?a+="\u7f51\u7ad9-":s=="200"?a+="\u536b\u58eb-":a+="wap-",c[s]&&c[s][o]&&a+c[s][o][u]||""):""}function f(t,n){var r=a(t,n),i="";r!=""&&(e[t]||(e[t]={}),e[t][n]||(e[t][n]=r),$(Wenda.Log).off("onAddParams").on("onAddParams",function(r,i){return i.dc==e[t][n]&&(i["cid-pre"]=i.dc,i.ref=document.referrer),i}),Wenda.Log.send(r))}function l(e,t){var n=e.substring(0,3),r=e.substring(3,5),i=e.substring(5,7);return t[n]&&t[n][r]&&t[n][r][i]?!0:!1}var e={},t={100:{"01":{"01":"\u56de\u7b54\u7ad9\u5185-\u9876\u90e8button","02":"\u56de\u7b54\u7ad9\u5185-\u95ee\u7b54\u641c\u7d22\u7ed3\u679c\u9875-\u641c\u7d22\u65e0\u7ed3\u679c","03":"\u56de\u7b54\u7ad9\u5185-\u95ee\u7b54\u641c\u7d22\u7ed3\u679c\u9875-\u7b2c\u4e8c\u9875\u5e95\u90e8\u6d6e\u5c42","04":"\u56de\u7b54\u7ad9\u5185-\u8be6\u60c5\u9875(\u672a\u767b\u5f55)-\u5e95\u90e8\u6d6e\u5c42","05":"\u56de\u7b54\u7ad9\u5185-\u5411\u00d7\u00d7\u63d0\u95ee-\u9996\u9875-\u4e50\u5e2e\u8fbe\u4eba \u5411ta\u63d0\u95ee","06":"\u56de\u7b54\u7ad9\u5185-\u95ee\u7b54\u641c\u7d22\u7ed3\u679c\u9875-\u6211\u8981\u63d0\u95ee","07":"\u56de\u7b54\u7ad9\u5185-\u9ad8\u8003\u6d6e\u5c42"},"02":{"01":"\u56de\u7b54\u7ad9\u5185-\u5411\u00d7\u00d7\u63d0\u95ee-\u9f20\u6807\u60ac\u505c\u5728\u7528\u6237\u5934\u50cf"},"05":{"01":"\u56de\u7b54\u7ad9\u5185-\u5411\u00d7\u00d7\u63d0\u95ee-\u4ed6\u4eba\u4e3b\u9875","02":"\u4e2a\u4eba\u4e2d\u5fc3-\u63d0\u95ee\u5217\u8868\u4e3a\u7a7a"},"09":{"01":"\u56de\u7b54\u7ad9\u5185-\u5927\u641c-\u4e0a\u65b9src=4","02":"\u56de\u7b54\u7ad9\u5185-\u5927\u641c-\u4e0b\u65b9src=6","03":"\u56de\u7b54\u7ad9\u5185-\u4e2a\u4eba\u4e2d\u5fc3-\u6211\u7684\u63d0\u95ee-\u65e0\u63d0\u95ee","04":"\u56de\u7b54\u7ad9\u5185-\u4e2a\u4eba\u4e2d\u5fc3-\u6211\u7684\u6d88\u606f-\u4e3a\u7a7a","05":"\u76f4\u63a5\u6253\u5f00\u63d0\u95ee\u9875"}},200:{"01":{"01":"\u6211\u8981\u63d0\u95ee"}}},n={100:{"01":{"01":"\u9996\u9875-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u5176\u4ed6","02":"\u9996\u9875-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u7cfb\u7edf\u63a8\u8350","03":"\u9996\u9875-\u201c\u5730\u533a\u201d\u6807\u7b7e","04":"\u9996\u9875-\u201c\u6559\u80b2\u201d\u6807\u7b7e","05":"\u9996\u9875-\u201c\u5174\u8da3\u201d\u6807\u7b7e","06":"\u9996\u9875-\u7b49\u4f60\u7b54\uff08\u672a\u767b\u5f55\uff09"},"02":{"01":"\u8be6\u60c5\u9875-\u7b54\u9898\u4e2d\u5927\u5956","02":"\u8be6\u60c5\u9875-\u518d\u6765\u4e00\u9898","03":"\u8be6\u60c5\u9875-\u540c\u57ce\u95ee\u9898","04":"\u8be6\u60c5\u9875-\u76f8\u5173\u95ee\u9898(\u672a\u89e3\u51b3)"},"03":{"01":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u65b0\u95ee\u9898-\u8be6\u60c5\u9875","02":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u96f6\u56de\u7b54-\u8be6\u60c5\u9875","03":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u9ad8\u60ac\u8d4f-\u8be6\u60c5\u9875","04":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u65b0\u95ee\u9898-\u5feb\u901f\u56de\u7b54","05":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u96f6\u56de\u7b54-\u5feb\u901f\u56de\u7b54","06":"\u95ee\u9898\u5e93-\u5206\u7c7b-\u9ad8\u60ac\u8d4f-\u5feb\u901f\u56de\u7b54","07":"\u95ee\u9898\u5e93-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u7cfb\u7edf\u63a8\u8350-\u8be6\u60c5\u9875","08":"\u95ee\u9898\u5e93-\u201c\u5730\u533a\u201d\u6807\u7b7e-\u8be6\u60c5\u9875","09":"\u95ee\u9898\u5e93-\u201c\u6559\u80b2\u201d\u6807\u7b7e-\u8be6\u60c5\u9875",10:"\u95ee\u9898\u5e93-\u201c\u5174\u8da3\u201d\u6807\u7b7e-\u8be6\u60c5\u9875",11:"\u95ee\u9898\u5e93-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u7cfb\u7edf\u63a8\u8350-\u5feb\u901f\u56de\u7b54",12:"\u95ee\u9898\u5e93-\u201c\u5730\u533a\u201d\u6807\u7b7e-\u5feb\u901f\u56de\u7b54",13:"\u95ee\u9898\u5e93-\u201c\u6559\u80b2\u201d\u6807\u7b7e-\u5feb\u901f\u56de\u7b54",14:"\u95ee\u9898\u5e93-\u201c\u5174\u8da3\u201d\u6807\u7b7e-\u5feb\u901f\u56de\u7b54",15:"\u95ee\u9898\u5e93-\u641c\u7d22\u7ed3\u679c-\u8be6\u60c5\u9875",16:"\u95ee\u9898\u5e93-\u641c\u7d22\u7ed3\u679c-\u5feb\u901f\u56de\u7b54",17:"\u95ee\u9898\u5e93-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u5176\u4ed6-\u8be6\u60c5\u9875",18:"\u95ee\u9898\u5e93-\u201c\u63a8\u8350\u201d\u6807\u7b7e-\u5176\u4ed6\u2014\u5feb\u901f\u56de\u7b54"},"04":{"01":"\u7ed3\u679c\u9875-\u5f85\u89e3\u51b3tab"},"05":{"01":"\u4e2a\u4eba\u4e2d\u5fc3\u9080\u8bf7\u5217\u8868-\u8be6\u60c5\u9875","02":"\u4e2a\u4eba\u4e2d\u5fc3\u9080\u8bf7\u5217\u8868-\u5feb\u901f\u56de\u7b54"},11:{"01":"\u4e50\u5e2e\u56e2-\u56e2\u961f\u4efb\u52a1\u95ee\u9898\u5217\u8868","02":"\u4e50\u5e2e\u56e2-\u56e2\u961f\u4efb\u52a1\u95ee\u9898\u5217\u8868-\u5feb\u901f\u56de\u7b54"},98:{"01":"\u5176\u4ed6\u6765\u6e90"}},200:{"01":{"01":"\u64c5\u957f\u9886\u57df-\u5174\u8da3\u6807\u7b7e-\u5355\u4e2a\u6807\u7b7e","02":"\u64c5\u957f\u9886\u57df-\u5174\u8da3\u6807\u7b7e-\u95ef\u5173-\u666e\u901a\u6a21\u5f0f","03":"\u64c5\u957f\u9886\u57df-\u5174\u8da3\u6807\u7b7e-\u95ef\u5173-\u6311\u6218\u6a21\u5f0f","04":"\u64c5\u957f\u9886\u57df-\u64c5\u957f\u5206\u7c7b"},"02":{"01":"\u540c\u57ce\u95ee\u9898"},"03":{"01":"\u5206\u7c7b"}},300:{}},r={100:{"06":{"01":"\u6211\u7684\u63d0\u95ee"},"08":{"01":"\u56de\u7b54\u6d88\u606f"},98:{"01":"\u5176\u4ed6\u6765\u6e90"},99:{"01":"\u76f4\u63a5\u6253\u5f00url"}},200:{"06":{"01":"\u6211\u7684\u63d0\u95ee"},"08":{"01":"\u56de\u7b54\u6d88\u606f"}}},i={index_page:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/?(?:$|\?)/ig,detail_page:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/q\/[\d]+/ig,search:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/search/ig,user_page:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/u\//ig,my_ask:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/(?:user\/asklist|u\/as)\//ig,my_notice:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/user\/noticelist\//ig,ask_page:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/home\/ask/ig,safe_ask_page:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/safe\/ask/ig,team_task:/^https?:\/\/[^\.]*\.?wenda.(?:haosou|so).com\/team\/task/ig};$(document).ready(function(){$("body").delegate("a[data-cid-pre]","mousedown",function(e){var t=$(this),n=t.data("cid-pre"),r=t.prop("href");if(r.indexOf("cid-pre")>-1)return;r.indexOf("?")>-1?r=r+"&cid-pre="+n:r=r+"?cid-pre="+n,t.prop("href",r)})});var c={};return c.getText=a,c.getAskCode=u,c.getAcceptCode=o,c.getReplyCode=s,c.sendLog=f,c}()),$.extend(namespace("Wenda.Util"),function(){function t(e,t){e=e.replace(/^[^?=]*\?/ig,"").split("#")[0];var n={};return e.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,i){try{r=decodeURIComponent(r)}catch(s){}try{i=decodeURIComponent(i)}catch(s){}r in n?n[r]instanceof Array?n[r].push(i):n[r]=[n[r],i]:n[r]=/\[\]$/.test(r)?[i]:i}),t?n[t]:n}var e={};return e.queryUrl=t,e}()),$.ObjectH.mix(namespace("Wenda.Captcha"),function(){function s(e){return e.find(".js-captcha-input")}function o(e,t){n=!0,r=e.find(".js-captcha-error"),i=e.find(".js-captcha-input"),i.on("keyup",function(){var e=$(this);if($.trim(e.val())===""){f("empty");return}if($.trim(e.val()).length<4)return;t&&t()})}function u(i,o){i.find(".captcha").show(),c(i,o),o&&s(i).focus(),t||(t=!0,$(document).delegate(".js-captcha-input","keydown",function(t){n&&r&&r.hide(),t.keyCode==13&&(t.stopPropagation(),t.preventDefault(),$(e.event).triggerHandler("keyenter",[$(this)]))}),$(document).delegate(".js-captcha-btn","click",function(e){e.preventDefault(),c($(this).parents(),!0)}))}function a(e){t&&(e.find(".captcha").show(),c(e,!0))}function f(e){if(n){if(i&&i.val()===""){r&&r.html(r.data("empty")).show();return}r.data(e)&&r&&r.html(r.data(e)).show()}}function l(e){var r=s(e);return t&&!r.val()?(e.find(".captcha").show(),c(e,!0),r.focus(),n&&f("empty"),!1)
:!0}function c(e,t){var n="http://captcha."+Wenda.Info.root_domain;e.find("img.js-captcha-btn").attr("src",n+"/image.php?app=wenda&"+Math.random());var r=e.find(".js-captcha-input");r.val(""),t&&r.is(":visible")&&r.focus()}function h(e){return s(e).val().trim().stripTags()}var e={},t=!1,n=!1,r=null,i=null;return e.val=h,e.need=u,e.check=a,e.verify=l,e.change=c,e.initErrorTip=o,e.showErrorTip=f,e.event={},e}()),$.ObjectH.mix(namespace("Wenda.Global.Panel"),function(){function t(e,t,r){e=="daren"?n(t):Wenda.Net.connect("bubblereaded",{type:e},function(){n(t),r&&r()})}function n(e){Cookie.set(e.cookiename,e.cookieval,{expires:e.exp,path:"/"})}function r(n,r,i,s){var o=$("#user_info").attr("username")||"\u95ee\u7b54\u7528\u6237";s=s?'target="_blank" href="'+s+'"':'href="javascript:;"';var u={width:400,fixed:!0,skin:"panel-05",content:'<div class="p-daily-ans woman"><p>Hi\uff0c\u4eb2\u7231\u7684<span style="color:red">'+o+"</span>\uff1a</p>"+"<p>"+r+"</p>"+'<div class="go-ans"><a '+s+' class="btn btn-2-m"><span>'+i+"</span></a></div>"+'<span class="an"></span>'+"</div>"},a=e.create(u);a.showModal(),n=="daren"?a.onclose=function(){t(n,{cookiename:"__darenbubbledCk",cookieval:"1",exp:6048e5})}:n!==!1&&(a.onclose=function(){t(n,{cookiename:"__bubbledCk",cookieval:"1",exp:6e4})}),$(".p-daily-ans a").on("click",function(){a.close()})}var e=Wenda.Panel,i={eggwin:function(){var e='\u606d\u559c\u60a8\uff01\u91d1\u86cb\u88c2\u5f00\u4e86\uff01\u6389\u51fa\u793c\u54c1\uff01\u95ee\u7b54<b style="color:#F60;font-size: 20px;">10</b>\u91d1\u5e01\u548c\u4e00\u6b21\u83b7\u5f97<b style="color:#F60;font-size: 20px;">iPhone 5s</b>\u7684\u62bd\u5956\u673a\u4f1a\uff01';r(!1,e,"\u9886\u53d6","/activity/hello2014#showtips")},egglose:function(){var e='\u60a8\u6ca1\u6709\u6210\u529f\u9886\u53d6<b style="color:#F60;font-size: 20px;">\u62bd\u5956\u673a\u4f1a</b>\uff0c\u518d\u63a5\u518d\u5389\uff01';r(!1,e,"\u6211\u77e5\u9053\u4e86")},encourage:function(){var e='\u544a\u8bc9\u60a8\u4e00\u4e2a\u5c0f\u79d8\u5bc6\uff0c\u73b0\u5728\u5f00\u59cb\uff0c\u6301\u7eed\u56de\u7b54\u95ee\u9898\u9664\u4e86\u53ef\u83b7\u5f97\u539f\u6709\u7684<span style="color:#F60;">\u91d1\u5e01+2</span>\uff0c\u8fd8\u6709<a href="/c/" style="color:#F60;">\u989d\u5916\u5956\u52b1</a>\u5462\uff0c\u5feb\u53bb\u7b54\u9898\u8d5a\u91d1\u5e01\u5427\uff01';r("",e,"\u9a6c\u4e0a\u53bb\u7b54\u9898","/c/?goanswer=1")},levelup:function(){if($("#levelUp").length==0)return;var n=$("#levelUp").html(),r={width:548,fixed:!0,skin:"panel-mod-level-up",content:n},i=e.create(r);i.onclose=function(){t(2,{cookiename:"__bubbledCk",cookieval:"1",exp:6e4})},i.onshow=function(){$(".apply").click(function(){t(2,{cookiename:"__bubbledCk",cookieval:"1",exp:6e4}),i.remove()})},i.showModal()},darentips:function(){var e="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u4eb2\u7231\u7684\u4e50\u5e2e\u8fbe\u4eba\uff0c\u672c\u5468\u6211\u4eec\u5c06\u4e0a\u7ebf\u5168\u65b0\u8fbe\u4eba\u5934\u8854\u53ca\u8fbe\u4eba\u7279\u6743\uff0c\u5e76\u5b8c\u6210\u4ece\u6210\u5c31\u503c\u5230\u7231\u5fc3\u503c\u7684\u8f6c\u6362~\u8d21\u732e\u60a8\u7684\u7231\u5fc3\uff0c\u83b7\u5f97\u66f4\u591a\u8fbe\u4eba\u5956\u52b1\uff0c \u65b0\u4e00\u5e74\u4e00\u8d77\u52aa\u529b\u5427\uff01";r("daren",e,"\u9a6c\u4e0a\u4e86\u89e3","http://bbs.360safe.com/forum.php?mod=viewthread&tid=4004339")},modifyNick:function(){QHPass.setNickname(function(){window.location.reload(!0)})},setNick:function(){QHPass.setNickname(function(){window.location.reload(!0)})},userFeedBack:function(){function o(){if(!u())return!1;var e=s.val();location.href.queryUrl("ref")=="weishi_fankui"&&(e="\u6765\u81ea"+Wenda.Info.wenda_name+"\u5ba2\u6237\u7aef\uff1a"+e,s.val(e)),Wenda.Net.connect("sendByForm",i,function(){n.remove(),Wenda.Panel.steam({msg:"\u60a8\u7684\u53cd\u9988\u6211\u4eec\u5df2\u7ecf\u6536\u5230\uff01\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01",width:400})},{110:function(){r.check(i),$("#js-error").html("\u9a8c\u8bc1\u7801\u9519\u8bef")}})}function u(){var e=s.val().trim(),t="",n=$("#js-error");return!e||e.length<10?t="\u8bf7\u8865\u5145\u5b8c\u6574\u60a8\u7684\u63cf\u8ff0\uff0c\u81f3\u5c1110\u4e2a\u5b57":e.length>800?t="\u4eb2\uff0c\u60a8\u7684\u63cf\u8ff0\u5185\u5bb9\u8d85\u8fc7\u4e86\u957f\u57ce\u7684\u957f\u5ea6\uff0c\u8bf7\u7cbe\u7b80\u60a8\u7684\u5185\u5bb9\u54e6\uff01":/(\S+)\1{4,}/ig.test(e)?t="\u60a8\u7684\u63cf\u8ff0\u91cc\u4e0d\u80fd\u8fde\u7eed\u51fa\u73b05\u4e2a\u5b57":t="",n.html(t),t?(s.parent().addClass("error-frm"),!1):(s.parent().removeClass("error-frm"),r.verify(i)?(s.parent().removeClass("error-frm"),n.html(""),!0):!1)}var t={width:470,fixed:!0,skin:"panel-02 panel-suggest",content:'<form class="fb-form" id="fb_form" action="/submit/feedback" method="post"><div class="panel-suggest-content"><div class="group"><div class="textarea"><textarea name="content" maxsize="800" id="ui-content" placeholder="\u5c0a\u656c\u7684\u7528\u6237\uff1a\u60a8\u7684\u5efa\u8bae\u5bf9\u4e8e\u6211\u4eec\u5341\u5206\u91cd\u8981\uff0c\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u60a8\u7684\u5efa\u8bae\uff0c\u89c1\u8bc1'+Wenda.Info.wenda_name+'\u7684\u6210\u957f\uff08800\u5b57\u4ee5\u5185\uff09\u3002"></textarea>'+'<input type="hidden" name="type" value="1">'+"</div>"+"</div>"+'<div class="group group-3">'+'<div class="contact-tips">\u8bf7\u7559\u4e0b\u60a8\u7684\u8054\u7cfb\u65b9\u5f0f\uff0c\u65b9\u4fbf\u6211\u4eec\u4e0e\u60a8\u8054\u7cfb\uff01<span class="gray">\uff08\u9009\u586b\uff09</span></div>'+'<div class="ipt">'+'<input type="text" name="contact" placeholder="QQ/\u624b\u673a\u53f7\u7801">'+"</div>"+'<div class="ui-steam-tips" id="js-steam-tips" style="opacity:1; height:auto; ">'+'<div class="g-point g-point-top"><ins class="border"></ins><ins class="bg"></ins></div>'+'<div class="ui-steam-tips-inner">\u4fe1\u606f\u4ec5\u5de5\u4f5c\u4eba\u5458\u53ef\u89c1\uff0c\u586b\u5199\u5c06\u6709\u673a\u4f1a\u83b7\u5f97\u7cbe\u7f8e\u793c\u54c1\uff01</div>'+"</div>"+"</div>"+'<div class="clearfix">'+'<div class="captcha" style="margin-top:12px;">'+"<span>\u9a8c\u8bc1\u7801</span>"+'<input class="js-captcha-input" type="text" name="captcha" style="height: 18px; line-height: 18px;color: #999;" maxlength="4">'+'<img class="js-captcha-btn" style="height: 23px; width: 68px;"><a href="#" class="js-captcha-btn">\u6362\u4e00\u6362</a>'+"</div>"+"</div>"+"</div>"+"</form>",header:'<h3><i class="ico-suggest"></i>\u7ed9'+Wenda.Info.wenda_name+"\u53cd\u9988\u5efa\u8bae</h3>",footer:'<div class="mark" id="js-error" style="padding-top:8px;float:left;"></div><span class="btn btn-2"><button id="fb_submit">\u63d0\u4ea4</button></span>'},n=e.create(t),r=Wenda.Captcha,i=$("#fb_form"),s=i.find('textarea[name="content"]');return n.showModal(),n.onclose=function(){n.remove()},setTimeout(function(){$("#ui-content").focus()},0),r.need(i),$(r.event).on("keyenter",function(){$("#fb_submit").click()}),s.on("change",u),$("#fb_submit").click(function(e){e.preventDefault(),o()}),n},report:function(t,n,r,i){function c(e){var t="",n=[],r=l[e];return $.ObjectH.map(r,function(r,i,s){t=e=="answer"&&r==7?"copy-ans-btn":"reason-btn",n.push('<li><label class="'+t+'"><input type="radio" name="type" value="'+r+'"><span>'+i+"</span></label></li>")}),n.join("")}function h(e){return e.indexOf("safe")>-1?'<input value="1" type="hidden" name="safe"/>':'<div class="group group-3"><h4>\u68c0\u4e3e\u8bf4\u660e</h4><div class="textarea"><ul class="anslist" style="display:none;line-height:20px;overflow:auto;height:171px;"></ul><textarea name="content" maxlength="200" placeholder="\u8bf7\u8f93\u5165\u63cf\u8ff0200\u4e2a\u5b57\u4ee5\u5185" ></textarea></div></div>'}function p(){E.html("\u68c0\u4e3e\u8bf4\u660e"),b.find("textarea").show()}function d(){b.find("textarea").hide()}function v(){b.find(".anslist").hide()}function m(e,t){var n=b.find(".anslist");E.html("\u6b63\u5728\u5bfb\u627e\u539f\u521b\u5185\u5bb9\u7684\u56de\u7b54\u4eba\uff0c\u8bf7\u7a0d\u7b49\u3002\u3002"),Wenda.Net.connect("getAnsUserList",{pn:location.href.queryUrl("pn"),ask_id:e,ans_id:t},function(e){if(e.errno==0){var t=e.data,r=[];html='<li><label><input type="radio" name="pre_ans_id" value="{$ans_id}" />&nbsp;{$userName}</label><span style="float:right;">\u56de\u7b54\u65f6\u95f4\uff1a{$date}</span></li>';if(t==null){E.html("\u6ca1\u6709\u627e\u5230\u539f\u521b\u5185\u5bb9\u7684\u56de\u7b54\u4eba");return}E.html("\u8bf7\u9009\u62e9\u539f\u521b\u5185\u5bb9\u7684\u56de\u7b54\u4eba"),$.ObjectH.map(t,function(e,t,n){var i={date:e.create_time,userName:e.user_name,ans_id:e.ans_id};r.push(html.tmpl(i))}),n.html(r.join("")).show()}})}function S(){if(!x())return!1;Wenda.Net.connect("sendByForm",$("#rp_form"),function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u68c0\u4e3e\u6d6e\u5c42-\u63d0\u4ea4"),y.remove(),Wenda.Panel.steam({msg:"\u611f\u8c22\u60a8\u7684\u4e3e\u62a5\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u5904\u7406\uff01",width:400}),Wenda.Log.send("rp_form","\u8be6\u60c5\u9875\u4e3e\u62a5\u6210\u529f")})}function x(){var e=b.find('[name="type"]:checked'),t=b.find('[name="pre_ans_id"]:checked'),n=b.find(".js-group-type").find('[name="group-type"]:checked'),r=e.length?!0:!1,i=t.length?!0:!1,s=n.length?!0:!1;return!r&&w.html("\u8bf7\u9009\u62e9\u68c0\u4e3e\u539f\u56e0"),b.find(".anslist").html()&&!i&&a=="report-con"&&f=="copy-ans"?(w.html("\u8bf7\u9009\u62e9\u56de\u7b54\u4eba"),!1):(!s&&w.html("\u8bf7\u9009\u62e9\u68c0\u4e3e\u7c7b\u578b"),r&&s)}var s={"\u5e7f\u544a\u63d0\u95ee":"1","\u704c\u6c34\u63d0\u95ee":"2","\u9ec4\u8272\u3001\u66b4\u529b\u3001\u653f\u6cbb\u7b49\u654f\u611f\u63d0\u95ee":"3","\u5176\u4ed6":"8"},o={"\u5e7f\u544a\u63a8\u5e7f":"4","\u6076\u610f\u704c\u6c34":"5","\u56de\u7b54\u5185\u5bb9\u4e0e\u63d0\u95ee\u65e0\u5173":"6","\u6284\u88ad\u7b54\u6848":"7","\u5176\u4ed6":"8"},u={"\u5e7f\u544a\u63d0\u95ee":"1","\u66b4\u529b\u3001\u72af\u7f6a\u63d0\u95ee":"8","\u8c29\u9a82\u3001\u6bc1\u8c24\u63d0\u95ee":"3","\u8fdd\u80cc\u4f26\u7406\u9053\u5fb7\u63d0\u95ee":"4","\u6d89\u53ca\u8272\u60c5":"5","\u653f\u6cbb\u3001\u654f\u611f\u6027\u63d0\u95ee":"6","\u672a\u6784\u6210\u63d0\u95ee":"11"},a="",f="",l={answer:o,ask:s,safeAns:o,safeAsk:u},g={fixed:!0,skin:"panel-02 panel-report",content:'<form id="rp_form" class="rp_form" action="/submit/report" method="post"><input value="" type="hidden" name="ask_id"/><input value="" type="hidden" name="ans_id"/><input value="" type="hidden" name="reported_qid"/><div class="js-group-type group group-2"><h4>\u68c0\u4e3e\u7c7b\u578b</h4><ul><li class="js-report-con"><label><input type="radio" name="group-type" ><span>\u68c0\u4e3e\u5185\u5bb9</span></label></li><li class="js-report-user"><label><input type="radio" name="group-type" ><span>\u68c0\u4e3e\u7528\u6237</span></label></li></ul></div><div class="group group-2"><h4>\u68c0\u4e3e\u539f\u56e0</h4><div class="list"><ul>'+c(r)+"</ul>"+"</div>"+"</div>"+h(r)+"</form>",header:'<h3><i class="ico-report"></i>\u68c0\u4e3e\u4e0d\u826f\u5185\u5bb9</h3>',footer:'<span class="mark" style="float:left;" id="js-error"></span><span class="btn btn-2"><button id="rp_btn">\u63d0\u4ea4</button></span>'},y=e.show(g,r.indexOf("safe")>-1?350:470),b=$("#rp_form"),w=$("#js-error"),E=b.find(".group-3>h4");return b.find('[name="ask_id"]').val(t),b.find('[name="ans_id"]').val(n),b.find(".js-report-user").click(function(e){b.attr("action","/submit/reportUser"),b.find('[name="reported_qid"]').val(i),a="report-user",p(),v()}),b.find(".js-report-con").click(function(e){a="report-con",f=="copy-ans"&&b.find(".copy-ans-btn").click(),b.attr("action","/submit/report"),b.find('[name="reported_qid"]').val("")}),b.find(".copy-ans-btn").click(function(e){f="copy-ans",a=="report-con"&&(d(),m(t,n))}),b.find(".reason-btn").click(function(e){f="others",p(),v()}),$("#rp_btn").click(function(e){e.preventDefault(),Wenda.User.checkLogin(S)}),b.find(".js-report-con").click().find('[name="group-type"]').prop("checked",!0),y.onclose=function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u68c0\u4e3e\u6d6e\u5c42-\u5173\u95ed"),y.remove()},y}};return i}()),$(document).ready(function(){function r(){var e=$("#user_info").attr("bubbled"),t=$("#user_info").attr("level"),n=Cookie.get("__bubbledCk");!n&&e=="2"&&t!=3&&Wenda.Global.Panel.levelup()}function e(){n||Wenda.Net.connect("dailyAns",null,function(t){t.indexOf("mod-daily-answer")>-1&&(n=Wenda.Panel.create({width:710,fixed:!0,content:t,backdropOpacity:.4,skin:"panel-daily-ans"}),n.showModal(),$(".mod-ans-days .new").hide(),Cookie.set("daily_ans",1,{expires:31536e6,path:"/"}),e=function(){n.showModal()})}),Wenda.Log.send("global-status","dailyAnsPanel")}var e,t=Wenda.Timer,n;Wenda.Menu.popup({id:"navstore-menu",nav:$("#navStore"),aPanel:$("#bread-crumbs"),delay:500,showFunc:function(e,t){var n=e.offset();return t.css({left:n.left+"px",top:n.top+e.height()+"px"}),!0}}),$("#feedback").click(function(e){e.preventDefault(),Wenda.Global.Panel.userFeedBack()}),r(),$("#js-sh-ipt").on("keydown",function(e){e.keyCode==13&&Wenda.Log.send("hd","hd-search")}),function(){$(document.body).delegate(".js-tab-change","click",function(e){var t=$(this).attr("index");$(this).hasClass("on")||($(".hd .on").removeClass("on"),$(".hd li[index = "+t+"]").addClass("on")),$(".sp").hasClass(t)||($(".sp").removeClass("sp"),$("."+t).addClass("sp")),t=="page-rule"&&$(".page-rule .nav li").first().trigger("click")}).delegate(".page-rule .nav li","click",function(){$(".page-rule .nav .on").removeClass("on"),$(this).addClass("on"),$(".page-rule .nav-1, .page-rule .nav-2").hide(),$("."+$(this).attr("index")).show()}),$(".js-dailyAns").click(function(){e()}),Cookie.get("daily_ans")||$(".mod-ans-days .new").show()}(),$("body").delegate(".pop-dia-close,.clk-regnew, #findPwd, #loginSubmit, #btn-submitName","mousedown",function(e){var t=e.target,n=t.id,r=t.className,i=n||r;Wenda.Log.send("mod_quc_pop",i)});if($("#hd-crumb").length){var i=$("#hd-crumb>ul>li>a"),s=i.last(),o=[],u=[];i.each(function(e){o.push($(this).attr("href")),u.push($(this).html())});if(o.indexOf("/c/1")!==-1&&s){var a=u.join(">");monitor.buildLog({type:s.attr("data-type"),cid:s.attr("data-cid"),text:a},"http://s.360.cn/wenda/com.htm")}}var f=Cookie.get("__huid");if(!f&&Cookie){var l=location.hostname,c=/\.\w+\.com/g,h=c.exec(l)[0];$.ajax({url:"http://huid.ad.360.cn/",data:{api:"set",_:(new Date).getTime()},dataType:"jsonp",jsonp:"cb",success:function(e){Cookie.set("__huid",encodeURIComponent(e.huid),{expires:864e5,path:"/",domain:h})}})}}),$.ObjectH.mix(namespace("Wenda.Auth"),function(){function r(e){n=$.extend(!0,{},n,e),window.open("https://api.weibo.com/oauth2/authorize?client_id=206007178&redirect_uri=http://"+Wenda.Info.wenda_domain+"/weiboApi/callback&response_type=code&state=1")}function i(e){n=$.extend(!0,{},n,e||{});var t=$(n.selector.checkbox+'[type="checkbox"]').is(":checked")||!1;$(n.selector.checkbox).unbind("change").change(function(){t=$(n.selector.checkbox+'[type="checkbox"]').is(":checked"),t&&Wenda.User.checkLogin(function(){$("#coin").prop("disabled",!1),o(function(){s()})}),n.selector.checkbox==".js-weibocheck"?Wenda.Log.send("\u5f39\u51fa\u5c42-\u8bf7\u5fae\u535a\u4e13\u5bb6\u56de\u7b54\u70b9\u51fbcheckbook"):n.selector.checkbox==".js-weiboAuthCheck"&&Wenda.Log.send("\u8be6\u60c5\u9875-\u8bf7\u5fae\u535a\u4e13\u5bb6\u9274\u5b9a\u70b9\u51fbcheckbook")}),t&&o(function(){s()})}function s(){var e="",r=t.length>3?3:t.length;if(!r)return;for(var i=0;i<r;i++)e+='<span title="'+t[i].screen_name+'">@'+t[i].screen_name+"</span>";$(n.selector.vlist).html(e)}function o(e){n.getTags?$.get("/engine/getCate?title="+encodeURIComponent(n.ask_title),function(t){t&&t.data&&t.data.tags&&(n.tags=t.data.tags.join("&gt;")),u(e)}):u(e)}function u(e){$.ajax({url:"/weiboApi/getWeiboDaRenList",data:{q:n.tags},success:function(n){n.isAuth&&(t=n.users,e&&e())}})}function a(){var e={},r="",i="sina",s=encodeURIComponent(n.ask_title),o=t.length>3?3:t.length;for(var u=0;u<o;u++)r+="@"+t[u].screen_name;return e.title=n.type=="ask"?"\u3010"+s+"\u3011\u636e\u8bf4\u77e5\u9053\u8fd9\u4e2a\u95ee\u9898\u7684\u4eba\u90fd\u7279\u522b\u53ef\u7231~"+r:"\u4f60\u89c9\u5f97\u8fd9\u4e2a\u56de\u7b54\u600e\u4e48\u6837\uff1f\u6c42\u9a8c\u8bc1~\u3010"+s+"\u3011"+r,e.url="http://"+location.host+"/q/"+n.ask_id+"?ref=wenda_detail_share_"+i,n.ans_id&&(e.ans_id=n.ans_id,e.ask_id=n.ask_id,e.pic="http://p2.qhmsg.com/t01dfe622dc593cfb65.png"),Wenda.share.publish.apply(this,[i,e,!0])}function f(){return a()}function l(e){if(!e)return;Wenda.Log.send(e)}var e={},t={},n={selector:{checkbox:"",vlist:""},getTags:!1,tags:"",ask_title:"",ask_id:Wenda.Info.askId,ans_id:"",isAuth:!1,type:"ask"};return e.getWeiboAuth=r,e.showWeiboDaren=i,e.getTasAndList=o,e.weiboAuthCallback=f,e.weiboLog=l,e}()),namespace("Wenda.share"),function(e){var t={sina:{url:"http://v.t.sina.com.cn/share/share.php",queryString:{appkey:206007178},transformParam:{autoPic:"searchPic"}},qzone:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",transformParam:{pic:"pics",content:"desc"}}},n=window.screen;e.extend(Wenda.share,{onbefore:function(e,t){return!0},publish:function(r,i,s){var o={},u=e.extend({},t[r]),a=u.transformParam,f,l,c,h,p;if(!t[r])return;o=e.extend({},i||{},u.queryString),/^[^:]*?\./i.test(o.url)&&(o.url="http://"+o.url);if(a)for(f in a)l=o[f],c=a[f],l!==undefined&&c&&(c&&(o[c]=l),delete o[f]);if(Wenda.share.onbefore.apply(this,[u,o])){u.url+=(/\?/.test(u.url)?"&":"?")+e.param(o);if(s)return u.url;this.tagName==="A"?(this.target="_blank",this.href=u.url):(p=(n.width-900)/2,h=(n.height-760)/2,window.open(u.url,"","width=900, height=760, top="+h+", left="+p+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=yes, status=no"))}}})}(jQuery),Object.mix(namespace("Wenda.User"),function(){function o(e){var t=function(t){document.cookie="WDNASK = null;expires="+ +(new Date)+";path=/;domain=."+Wenda.Info.root_domain,e&&e(t),u(t),Wenda.Log.send("\u767b\u5f55\u6210\u529f")};QHPass.getUserInfo(!1,t,function(){QHPass.signIn(t)})}function u(t){var n=$("#js-has-login"),r=$("#js-not-login");if(!n.length)return;t&&t.qid?(n.find(".js-user-ask-link").attr("href","/user/asklist/"+t.qid),n.find(".js-user-answer-link").attr("href","/user/answerlist/"+t.qid),$("#topbar_username").attr("href","/u/"+t.qid).html(t.nickname?t.nickname:t.userName),$("#user_info").attr("qid",t.qid),t.nickname&&n.find(".nickname-tip-sml").show(),t.nickname&&n.find(".nickname-tip-sml").css("display","inline-block"),r.hide(),n.show(),Wenda.Info.qid=t.qid,Wenda.Info.username=t.userName,$(e).triggerHandler("login")):(r.show(),n.hide())}function a(){var e=Wenda.Info.qid;return e?!0:!1}function f(e,t){o(function(){i=!0,e&&e(s)})}function l(e,t){var n=!1;n?o(function(){i=!0,QHPass.authenticate(function(){e&&e(s)})}):f(e,t)}if(!QHPass||!QHPass.version)return!1;var e={},t={src:"pcw_so_wenda",domainList:["qihoo.com","so.com","360.cn","haosou.com"]};QHPass.init(t);var n={panelTitle:"\u6b22\u8fce\u767b\u5f55"+Wenda.Info.wenda_name};QHPass.setConfig("signIn.panelTitle",n.panelTitle);var r={panelTitle:"\u6b22\u8fce\u6ce8\u518c"+Wenda.Info.wenda_name,hideUsername:!0};QHPass.setConfig("signUp.panelTitle",r.panelTitle),QHPass.setConfig("signUp.hideUsername",r.hideUsername),QHPass.events.on("afterShow.setNickname",function(){var e=$("#mod_quc_pop #modQiUserPop").find("#nickNameResultTips");e.addClass("nickname-tips").html("\u53ea\u9700\u518d\u7ed9\u81ea\u5df1\u8d77\u4e2a\u540d\u5b57\uff0c\u5c31\u53ef\u4ee5\u63d0\u95ee/\u56de\u7b54\u4e86\u54e6~")});var i=!1,s;return e.updateUserInfo=u,e.login=o,e.hasLogin=a,e.checkLogin=f,e.checkLoginWithName=l,e}()),$(document).ready(function(){function o(e){var t=r.find(".msg-count"),n=0,i=0;$(".mess_tab li").each(function(e,t){n+=parseInt($(this).data("count"))});if(e){i=e.data("count")>e.data("read")?e.data("read"):e.data("count"),n=n-i>0?n-i:0;var s=e.data("count")-e.data("read")>0?e.data("count")-e.data("read"):0;e.data("count",s)}n==0?(t.hide(),r.data("sum",0)):(t.show(),r.data("sum",n),n=n>99?"99+":n),t.text(n)}function u(e){Wenda.Net.connect("getUserMess",{tpl:"ajax/common/mess_tip",flag:e},function(e){e.result==0?location.href="http://"+Wenda.Info.wenda_domain+"/user/noticelist/"+Wenda.Info.qid:e.errno==0?(i.html(e.result).removeClass("disnone"),o(),Wenda.Log.send("\u6d88\u606f\u9884\u89c8\u6846_\u5c55\u793a\u6b21\u6570")):e.errno=="10001"?Wenda.User.login():Wenda.Panel.alert("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25,\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})}function l(){var e=Cookie.get("__logon"),t=$("#user_info").attr("qid");if(t&&e!=t){var n=Wenda.Timer.midnight();Cookie.set("__logon",t,{expires:n,path:"/"}),Wenda.Timer.delay("top_notice_show",0,function(){$(".tips-daily").slideDown(200)}),Wenda.Timer.delay("top_notice_hide",4e3,function(){$(".tips-daily").slideUp(200)})}}function h(e,t){var n=$(".js-sh-ipt",e),r=n.val().trim();return t&&r==""&&n.focus(),r}function p(e,t){location.href=e.format(encodeURIComponent(t))}var e=$(".js-fixed"),t=$(".js-nav-home"),n=$(".js-top-tools"),r=$(".js-mess-icon"),i=$(".js_mess_tip"),s=location.href;!$.Browser.ie6&&s.indexOf("/user/msglist")==-1&&$(window).scroll(function(){var t=$(window).scrollTop();t>=150?(e.fadeIn(),n.addClass("fixed").show()):(e.fadeOut(),n.removeClass("fixed"))}),t.hover(function(){t.toggleClass("hover")}),r.click(function(e){e.stopImmediatePropagation();var t=r.data("sum"),n=r.data("flag");t==0&&(location.href="http://"+Wenda.Info.wenda_domain+"/user/noticelist/"+Wenda.Info.qid);if(!i.hasClass("disnone")){o($(".mess_tab li.on",i)),i.addClass("disnone");return}$(".mess_tab li").length>1&&$(".mess_tab li").each(function(){var e=$(this).data("count");if(e>0)return n=$(this).data("flag"),!1}),u(n)}),$(document).click(function(){i.hasClass("disnone")||o($(".mess_tab li.on",i)),i.addClass("disnone")}),i.click(function(e){e.stopImmediatePropagation()}),i.on("click",".mess_tab li",function(){var e=$(this);if(e.hasClass("on"))return;u($(this).data("flag"))});var a,f=new Suggest;f.init(),$(document.body).delegate(".user-login","click",function(e){e.preventDefault(),Wenda.User.checkLogin(function(){location.reload()})}).delegate(".user-reg","click",function(e){e.preventDefault(),QHPass.signUp(!0)}),$("#user_info").delegate(".js-user-logout","click",function(e){e.preventDefault(),QHPass.signOut(function(){location.reload()})}).delegate(".js-close-tip","click",function(e){e.preventDefault(),$(this).parent().hide()}).delegate("#topbar_username","mouseenter",function(e){e.preventDefault(),$(this).closest(".user-item").find(".panel-setting").show(),a&&clearTimeout(a)}).delegate("#topbar_username","mouseout",function(e){e.preventDefault();var t=this;a=setTimeout(function(){$(t).closest(".user-item").find(".panel-setting").hide()},500)}).delegate(".panel-setting","mouseenter",function(e){e.preventDefault(),a&&clearTimeout(a)}).delegate(".panel-setting","mouseleave",function(e){e.preventDefault(),$(this).hide()}),$(Wenda.User).on("login",l),l();var c=$(".js-sh-ipt").eq(0);$(".js-search-bt").click(function(e){e.preventDefault();var t=$(this).closest("form"),n=$(this).data("kw")||h(t,!0);n!=""&&p($(this).data("url")||"http://"+Wenda.Info.wenda_domain+"/search/?q={0}",n)}),$(".js-ask-bt").click(function(e){e.preventDefault();var t=$(this).closest("form"),n=h(t);p("http://"+Wenda.Info.wenda_domain+"/home/ask?q={0}&ref=wenda_search",n)});try{if(c.length&&c.val().trim()==""){var d=(location.href.queryUrl("q")||"").stripTags();d&&($(".js-sh-ipt").val(d),$("#aside_ask_con").val(d),$("#bottom_ask_con").val(d))}}catch(v){}Wenda.Timer.delay("nologin-notice",200,function(){var e=Cookie.get("WDNNICK");e&&(e=decodeURIComponent(escape(e)).encode4HtmlValue(),$("#js-not-login").find(".user-item").hide(),$("#js-not-login").prepend('<div class="user-item" style="top:2px;right:20px;"><a href="/nonLogin/myasklist"><img width="32" height="32" style="border-radius:50%;" src="http://u1.qhmsg.com/qhimg/quc/48_48/22/02/55/220255dq9816.3eceac.jpg"></a></div><div class="user-item" id="nonLogin_item"><a href="/nonLogin/myasklist">'+e+'</a></div><div class="user-item"><span class="hd-tools-sep">|</span><a href="#" class="user-login" text="topbar-login">\u767b\u5f55</a></div>'),$("#nologin_user_name").html(e),$("#nologin_ask_author").html(e),Number(Wenda.Info.nolog_ask)>0&&!Cookie.get("__nologon")&&($("#nonLogin_item").append('<div class="tips-daily" style="display:none;width:170px;"><div class="ui-sub-suc"><i class="close"></i><div class="ui-sub-suc-inner"><a href="/nonLogin/myasklist">\u60a8\u7684\u95ee\u9898\u6709\u65b0\u56de\u7b54</a></div></div></div>'),$(".tips-daily").slideDown(200),$(".tips-daily .close").click(function(){Cookie.set("__nologon","1",{path:"/",expires:6048e5}),$(".tips-daily").slideUp(200)})))})}),$.ObjectH.mix(namespace("Wenda.Net"),function(){function r(e,n){t[e]=n}function i(e,n,r,i){var s=t[e];r=$.ObjectH.isFunction(arguments[2])?r:i[0];if(!s||s.sending)return!1;s.sending=!0,n=n||{},s.method=="get"&&(n.t=+(new Date)),s.isForm&&n.jquery&&n[0].tagName=="FORM"&&(s.form=n,s.url=n.attr("action"),s.method=n.attr("method"),n=n.serialize().replace(/\+/g,"%20").queryUrl()),s.token?$.get(t.token.url,{t:+(new Date)},function(e){n.verify=e,u(s,n,r,i)}):u(s,n,r,i)}function s(e,t){return $.ObjectH.isFunction(e)?(e(t),!0):!1}function o(e,t){t.errno!=0&&!s(e[t.errno*-1],t)&&s(e["default"],t),s(e["finally"],t)}function u(e,t,r,i){$.ajax({url:e.url,type:e.method,data:t}).done(function(t){e.sending=!1;if(e.type=="plain")r&&r(t);else{var s=t;s.errno=s.errno|0,s.errno==0&&r&&r(s),e.method=="post"&&(i=$.ObjectH.mix(i||{},n),o(i,s))}})}function a(e){var n=t[e];return n&&n.sending?!0:!1}var e={},t={index_asklist:{url:"/chip/indexasklist",method:"get",type:"plain"},index_recomask:{url:"/chip/recomask",method:"get",type:"plain"},index_daren:{url:"/chip/recomdaren",method:"get",type:"plain"},index_todayhelp:{url:"/chip/bestanstopn",method:"get",type:"plain"},getUserMess:{url:"/User/getNoticeList",method:"get",type:"plain"},doExchange:{url:"/userMall/doExchange",method:"post",token:!0},enterprise_info:{url:"/ent/editent",method:"post"},enterprise_anslist:{url:"/chip/entanslist",method:"get",type:"plain"},cancelrecomanswer:{url:"/userMgr/unsetRecommendAnswer",method:"post",token:!0},gainluck:{url:"/activity/gainluck",method:"post",token:!0},act_lottery:{url:"/activity/lottery",method:"post"},act_coin:{url:"/activity/coin",method:"post"},getAnsUserList:{url:"/sundry/getpreuser",method:"get"},getexpertlist:{url:"/home/getExpertList",method:"get",type:"plain"},sendmsg:{url:"/user/sendMsg",method:"post"},recomm_ans_by_daren:{url:"/sundry/applyRecommend",method:"post"},inviteDaren:{url:"/user/inviteDarenApply",method:"post"},openedLvPanel:{url:"/safeSubmit/bubbleReaded",method:"post"},getgiftinfo:{url:"/other/getGiftInfo",method:"get"},deleteask:{url:"/submit/deleteAsk",method:"post",token:!0},qalist:{url:"/home/qalist",method:"get",type:"plain"},darenlist:{url:"/home/darenlist",method:"get",type:"plain"},club_darenlist:{url:"/other/getTopValDarenList",method:"get",type:"plain"},asklayer:{url:"/home/asklayer",method:"get",type:"plain"},bubblereaded:{url:"/other/bubblereaded",method:"get"},sendgift:{url:"/submit/sendGift",method:"post"},helpasks:{url:"/safeOther/getrelateask",method:"get"},changecatabymgr:{url:"/userMgr/changeCata",method:"post",token:!0},setrecommendanswer:{url:"/userMgr/setRecommendAnswer",method:"post",token:!0},setexcellentanswer:{url:"/userMgr/setEssenceAnswer",method:"post",token:!0},admin_nogood_answer:{url:"/userMgr/mgropask",method:"post",token:!0},deleteaskbymgr:{url:"/userMgr/deleteAsk",method:"post",token:!0},deleteansbymgr:{url:"/userMgr/deleteAns",method:"post",token:!0},answer:{url:"/submit/answer",method:"post",token:!0},licai:{url:"/topic/licai?act=save",method:"get"},checkUserActive:{url:"/other/checkUserActive",method:"post"},useful:{url:"/submit/useful",method:"post"},safeUseful:{url:"/safeSubmit/useful",method:"post"},safePinAskTop:{url:"/safeSubmit/settop",method:"post"},getFightAsk:{url:"/safe/getfightask",method:"post"},getDarenAsk:{url:"/mission/getDarenAsk",method:"post"},seekhelp:{url:"/submit/seekHelp",method:"post"},addcoins:{url:"/submit/addCoins",method:"post"},anstip:{url:"/safeOther/checkuserdel",method:"get"},dailyAns:{url:"/contiAns",method:"get",type:"plain"},otheranslist:{url:"/safe/otheranswerlist",method:"get",type:"plain"},addHide:{url:"/submit/hideask",method:"post",token:!0},getuserinfo:{url:"/user/getLoginUserInfo",method:"get"},joindaren:{url:"/safe/joindaren",method:"post"},changecata:{url:"/user/changeCata/",method:"post",token:!0},getcate:{url:"/engine/getCate",method:"get"},contiAnsPop:{url:"/contiAns/pop",method:"get"},sendByForm:{isForm:!0},sendByFormWithToken:{isForm:!0,token:!0},token:{url:"/home/getTokenCode",method:"get",type:"plain"},allcate:{url:"/category/getallcates/",method:"get"},chosebest:{url:"/submit/chosebest/",method:"post",token:!0},setbest:{url:"/safeSubmit/choseBest",method:"post"},asideQlist:{url:"/home/detaillist",method:"get"},askSubmit:{url:"/submit/ask",method:"post",token:!0},getSetTagPage:{url:"/user/setTagPage",method:"get",type:"plain"},getTag:{url:"/engine/getTag",method:"get",type:"plain"},setTag:{url:"/user/setTag",method:"post"},getSetTeamTagPage:{url:"/team/setTeamTagsPage",method:"get",type:"plain"},setTeamTag:{url:"/team/setTeamTags",method:"post",type:"plain"},getTeamForApply:{url:"/TeamUser/getTeamForApply",method:"get",type:"plain"},teamDoApply:{url:"/TeamUser/doapply",method:"get",type:"plain",token:!0},team_asklist:{url:"/TeamTask/asklist",method:"get",type:"plain"},upgradeTeam:{url:"/team/upgradeTeam",method:"get",type:"plain"},dismissTeam:{url:"/team/dismissTeam",method:"get",type:"plain"},teamDyn:{url:"/team/getTeamOp",method:"get",type:"plain"},checkSendCoin:{url:"/teamUser/checkSendCoin",method:"get",type:"plain"},sendBatchCoin:{url:"/teamUser/sendBatchCoin",method:"get",type:"plain"},checkUniqueTeamName:{url:"/team/checkNameDup",method:"get",type:"plain"},safe_getSetTagPage:{url:"/safeUser/tagsetting",method:"get",type:"plain"},safe_getTag:{url:"/safeOther/getTitleTag",method:"get",type:"plain"},safe_setTag:{url:"/safeUser/settag",method:"post"},getTaskTab:{url:"/mission/mtab",method:"get",type:"plain"},getMission:{url:"/mission/obtain",method:"post"},getMissionReward:{url:"/mission/obRewards",method:"post"},getMissionTab:{url:"/mission/ptab",method:"get",type:"plain"},getMyAskByStatus:{url:"/user/getAskList",method:"get",type:"plain"},getActivityAsk:{url:"/activity/getActivityAsk"},getActivityLottery:{url:"/NewYearActivity/doLottery",method:"get",type:"plain",token:!0},getYuanXiaoLottery:{url:"/YuanXiaoActivity/doLottery",method:"get",type:"plain",token:!0},getShouYouLottery:{url:"/ShouYouActivity/doLottery",method:"get",type:"plain",token:!0}},n={1:function(){QHPass.signIn()},5555:function(e){window.$INFO?Wenda.Panel.error(e.errmsg):(Wenda.Panel.alert("\u8bbe\u5907\u7ef4\u62a4\u516c\u544a",e.errmsg),$(".panel-dialog-sys .msg p").css("text-align","left"))},"default":function(e){Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",e.errmsg)}};return e.connect=i,e.status=a,e.add=r,e}()),$.extend(namespace("Wenda.Ajax"),function(){function s(e,r){var i={};if(t[e])throw"There is a same tran already";return i=$.extend({},n,r),t[e]=i,t[e]}function o(e,r,i,s){var o=$.extend(!0,{},n,t[e]);t[e]=o,o.login?Wenda.User.checkLogin(function(){u(e,r,i,s)}):u(e,r,i,s)}function u(e,i,s,o){var u=t[e],f=$.now();i.jquery&&i.is("form")&&(u.form=i,u.method=i.attr("method")||u.method||"post",u.url=i.attr("action")||u.url,u.timeout=i.attr("timeout")||n.timeout,i=i.serializeArray());if(!u||u.sending&&u.lock)return!1;if(u.delay){if(u._lastDate&&f-u._lastDate<=u.delayTime)return!1;t._lastDate=f,u.lock=!1}u.sending=!0;if($.isFunction(i)||h(i))o=s,s=i,i={};u.tpl&&(i.tpl=u.tpl),u.method=="get"&&(i.t=+(new Date)),u.token?$.get(r,{t:+(new Date)},function(t){$.isArray(i)?i.push({name:"verify",value:t}):i.verify=t,a(e,i,s,o)}):a(e,i,s,o)}function a(e,n,r,s){function c(e){if(!e)return;if(o.plain)u&&u(e);else{var t=e[o.codeName];typeof t=="undefined"&&(t="normal"),s=$.extend({},i,s),t==o.okCode?u&&u(e):p(s[t],e)||p(s.normal,e),t!=o.okCode&&p(s.end,e)}}var o=t[e];if(!o.url||!r)return;var u,a,f,l;$.isFunction(r)?u=r:(u=r.success,a=r.beforeSend,f=r.complete,l=r.error);var h={url:o.url,method:o.method,data:n,timeout:o.timeout,beforeSend:function(){p(a)},success:c,complete:function(){o.sending=!1,p(f)},error:function(){o.sending=!1;if(o.plain||!Wenda.Panel)return;p(l)||Wenda.Panel.error("\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5<br/>\u5982\u679c\u8bf7\u6c42\u4ecd\u5931\u8d25\u8bf7\u8054\u7cfb\u95ee\u7b54\u5ba2\u670d\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u4e3a\u60a8\u5904\u7406")}};o.jsonp&&(h.dataType="jsonp",h.jsonp="cb"),$.ajax(h)}function f(e,n,r,i){var s=t[e];if(!s)return;s.method="get",t[e]=s,o(e,n,r,i)}function l(e,n,r,i){var s=t[e];if(!s)return;
s.method="post",t[e]=s,o(e,n,r,i)}function c(e,n,r,i){var s=t[e];s.jsonp=!0,t[e]=s,o(e,n,r,i)}function h(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)&&$.isFunction(e[n])){t=!0;break}return t}function p(e,t){return $.isFunction(e)?(e(t),!0):!1}function d(e){var n=t[e];return n&&n.sending?!0:!1}var e={},t={checkLogin:{url:"/other/checkLogin"},setTagsPanel:{url:"/user/setTagPageNew"},setTags:{url:"/user/setTagNew"},changecatabymgr:{url:"/userMgr/changeCata",token:!0},deleteaskbymgr:{url:"/userMgr/deleteAsk",token:!0},answer:{url:"/submit/answer",token:!0,timeout:5e3},sendPrivateMsg:{url:"/Message/sendMessage",token:!0},getContactInfo:{url:"/Message/dialogListMsg",tpl:"ajax/user/message_dialog"},getDialogList:{url:"/Message/dialogListMsg",tpl:"ajax/user/message_list"},msgReportUser:{url:"/Message/report"},blockCancelUser:{url:"/Message/blockAndCancel"},delRelation:{url:"/Message/delRelation"},delAllRelation:{url:"/Message/delAllRelation"},msgReadAll:{url:"/Message/readAll"},dialogRelation:{url:"/Message/dialogRelation",tpl:"ajax/user/message_contact"},checkRole:{url:"/Message/checkRole",tpl:"ajax/common/message_panel"},doExchange:{url:"/userMall/doExchange",method:"post",token:!0},sendByForm:{},sendByFormWithToken:{token:!0},getActivityAsk:{url:"/activity/getActivityAsk",timeout:5e3},getUserMess:{url:"/User/getNoticeList"},deleteEducation:{url:"/user/deleteEducation"},ignoreInvite:{url:"/user/updateInvite"},getActivityLottery:{url:"/activity/doLottery",token:!0},bubblereaded:{url:"/other/bubblereaded"},dailyAns:{url:"/Index201604/contiAns"},getAnswerList:{url:"/Index201604/changeLists"},getCateAsk:{url:"/Index201604/getCatBestAns"},getAnsUserList:{url:"/sundry/getpreuser"},askStudent:{url:"/user/addInvite"},getActivityTask:{url:"/activity/getActivityList",tpl:"ajax/user/mission_activity"},addChoosedAsk:{url:"/activity/addChoosedAsk",timeout:5e3},wendaCheck:{url:"/wc",plain:!0},goodTeam:{url:"/team/goodTeam"},openBox:{url:"/team/signNew"},getTeamForApply:{url:"/TeamUser/getTeamForApply"},teamDoApply:{url:"/TeamUser/doapply",token:!0},createTeam:{url:"/team/checkCreateTeam"},betCoinInfo:{url:"/teamPk/betInfo"},upgradeTeam:{url:"/team/upgradeTeam"},dismissTeam:{url:"/team/dismissTeam"},teamDyn:{url:"/team/getTeamOp"},checkUniqueTeamName:{url:"/team/checkNameDup"},quitTeam:{url:"/TeamUser/quit"},checkSendCoin:{url:"/teamUser/checkSendCoin"},sendBatchCoin:{url:"/teamUser/sendBatchCoin"},removeMember:{url:"/TeamUser/remove"},distributeCoin:{url:"/TeamUser/distribute"},viceLeader:{url:"/TeamUser/vice"},setMember:{url:"/teamUser/setGoodNewUser"},getTask:{url:"/teamTask/getTask"},delTask:{url:"/teamTask/delTask"},betCoin:{url:"/teamPk/bet"},joinPk:{url:"/teamPk/joinPk"},pkSeeDet:{url:"/teamPk/pkInfo"},setTeamTagsPanel:{url:"/team/setTeamTagsPage"},setTeamTags:{url:"/team/setTeamTags"}},n={url:"",method:"get",timeout:5e3,tpl:"",jsonp:!1,sending:!1,token:!1,lock:!0,delay:!1,delayTime:1e3,plain:!1,login:!1,codeName:"errno",okCode:0},r="/home/getTokenCode",i={"-10001":function(){Wenda.User.login()},"-5555":function(e){if(!Wenda.Panel)return;window.$INFO?Wenda.Panel.error(e.errmsg):(Wenda.Panel.alert("\u8bbe\u5907\u7ef4\u62a4\u516c\u544a",e.errmsg),$(".panel-dialog-sys .msg p").css("text-align","left"))},normal:function(e){if(!Wenda.Panel)return;Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",e.errmsg||"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")},end:!1};return e.add=s,e.status=d,e.connect=o,e.get=f,e.post=l,e.jsonp=c,e}());var SWFUpload;SWFUpload==undefined&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if(typeof e!="string"||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n=window.location.pathname.lastIndexOf("/");return n<=0?path="/":path=window.location.pathname.substr(0,n)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(e==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){var e=this.settings.button_window_mode;return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',e,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if(typeof e=="object")for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(e[n].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;e=this.getMovieElement();if(e&&typeof e.CallFunction=="unknown"){for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(r){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler=="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler=="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler=="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler=="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler=="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler=="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler=="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler=="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler=="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler=="function").toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,n){return t==undefined?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&typeof returnValue.post=="object"&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return typeof e=="number"?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash("AddFileParam",[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){typeof e=="string"&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();n!=undefined&&(n.style.width=e+"px",n.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var n=this;if(typeof this.settings[e]=="function")this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(this.settings[e]!==null)throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;typeof e=="function"&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t=/[$]([0-9a-f]{4})/i,n={},r;if(e!=undefined){for(var i in e.post)if(e.post.hasOwnProperty(i)){r=i;var s;while((s=t.exec(r))!==null)r=r.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));n[r]=e.post[i]}e.post=n}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if(!e){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.cleanUp=function(e){window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent("file_dialog_complete_handler",[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if(typeof this.settings.upload_start_handler=="function")e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";t===undefined&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if(typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"){for(var r in e)e.hasOwnProperty(r)&&n.push(r+": "+e[r]);t=n.join("\n")||"",n=t.split("\n"),t="EXCEPTION: "+n.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById("SWFUpload_Console"),t||(n=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",n.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(r){alert("Exception: "+r.name+" Message: "+r.message)}},function(){function t(e){this.opts=e,this.filesDone=0,this.filesCount=0,this.filesLength=0}var e={MAXCOUNT:"\u4e00\u6b21\u6700\u591a\u4e0a\u4f205\u5f20\u56fe\u7247\u3002",MAXSIZE:"\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u4e0d\u8981\u8d85\u8fc75M\u3002",TYPE:"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u4e0a\u4f20JPG/PNG/GIF\u683c\u5f0f\u56fe\u7247\u3002"};t.prototype={bindElement:function(){var e=this,t;this.opts.input.on("change",function(){t=Array.prototype.slice.call(this.files),e.checkfiles(t)})},checkfiles:function(t){var n=[],r="",i=t.length,s=this.opts.maxfilesize,o=this,u=$.type(this.opts.upload_file_type)=="regexp";if(i<1)return;if(i>this.opts.maxfiles)return this.onerror(e.MAXCOUNT);t.forEach(function(i,s){(u?o.opts.upload_file_type.test(i.type):/image\/\w+/.test(i.type))?n.push(i):s==t.length-1?r+=i.name+e.TYPE:r+=i.name+"\uff0c"}),t=[],n.forEach(function(i,o){i.size<=s?t.push(i):o==n.length-1?r+=i.name+e.MAXSIZE:r+=i.name+"\uff0c"}),r.length>0&&this.onerror(r,"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef");if(t.length<1)return;this.upload(t)},onerror:function(e,t){return this.opts.onerror(e,t)&&!1},upload:function(e){var t=this;t.filesLength=e.length,t.filesDone=0,e.forEach(function(e,n){t.analyData(e)})},analyData:function(e){try{var t=this;if(this.opts.uploadType=="BinaryString"){var n=new FormData;n.append(this.opts.paramname,e),this.send(e,n)}else if(this.opts.uploadType=="DataURL"){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(n){var r=this.opts.paramname+"="+this.result.split(",")[1];t.send(e,r)}}}catch(i){return this.onerror(i)}},send:function(e,t){var n=this,r=new XMLHttpRequest,i=r.upload;e.currentProgress=0,e.startData=0,e.startTime=Date.now(),e.id=+e.lastModifiedDate+parseInt(Math.random()*1e5),i.addEventListener("progress",function(t){n.progress(t,e)},!1),r.open("POST",this.opts.url,!0),this.opts.uploadType=="DataURL"&&r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(t),this.opts.uploadStarted(e),r.onload=function(){r.responseText&&(e.timeDiff=Date.now()-e.startTime,n.opts.uploadFinished(JSON.parse(r.responseText),e),n.filesDone++,n.filesDone==n.filesLength&&n.afterAll())}},progress:function(e,t){if(e.lengthComputable){var n=e.loaded,r=Math.round(n*100/e.total);if(t.currentProgress!=r){t.currentProgress=r;var i=Date.now(),s=i-(t.currentStart?t.currentStart:t.startTime),o=n-t.startData;t.speed=Math.floor(o/s),t.startData=n,t.currentStart=i,this.opts.progressUpdated(t)}}},afterAll:function(){return this.opts.input.val(""),this.opts.afterAll()}},$.extend({html5Upload:function(e){var n=$.extend(!0,{url:"",input:"",loadImg:"http://p6.qhmsg.com/t01798cd1a6b1065192.gif",paramname:"imgage",maxfiles:5,uploadType:"BinaryString",maxfilesize:5242880,afterAll:function(){},onerror:function(){},uploadStarted:function(){},uploadFinished:function(){},progressUpdated:function(){}},e),r=new t(n);r.bindElement()}})}(),$.extend(namespace("Wenda.FileUpload"),function(){function n(e,t){e>0&&(this.startUpload(),$("#editorwraper").show())}function r(e){this.getStats().files_queued>0&&this.startUpload()}function i(e){this.editorId=e,this.getEditor=function(){return Wenda.Editor.get(this.editorId).editor},this.getLoadingImg=function(e){var t=this.getEditor();return e?t.iframe.contentWindow.document.getElementById(e):null},this.insert=function(e){$("#editorwraper").show();var t=this.getEditor();t.execCommand("insertHTML",'<p><img  id="'+e+'" src="http://p6.qhmsg.com/t01798cd1a6b1065192.gif" /></p>')},this.changeLoadingImg=function(e,t){var n=this.getLoadingImg(e);$(n).parent().html(t)},this.failed=function(e){var t=this.getLoadingImg(e);t.html('<img class="errorMsg_shouldbe_removed" src="http://p1.qhmsg.com/t01383134a68d72f138.png"/>')},this.finish=function(e,t){var n=this.getLoadingImg(e);if(!n)return;if(t.errno==0){var r=this.getEditor();this.changeLoadingImg(e,"<img src='"+t.data.url+"'/>"),r.adjustHeight&&r.adjustHeight(!0)}else this.failed(e)}}function s(e){var n=new i(e.id),r={url:"/submit/uploadimg/",input:$(".upload-pic"),loadImg:"http://p6.qhmsg.com/t01798cd1a6b1065192.gif",paramname:"picdata",maxfiles:5,maxfilesize:5242880,onerror:function(e,n){t.alert(n||"\u4e0a\u4f20\u5931\u8d25",e)},uploadStarted:function(e){n.insert(e.id)},uploadFinished:function(e,t){n.finish(t.id,e)},progressUpdated:function(){},afterAll:function(){}};e&&$.extend(!0,r,e),$.html5Upload(r)}function o(e){var t=new i(e.id),s={upload_url:"/submit/uploadimg/",file_size_limit:"5 MB",file_types:"*.jpg;*.png;*.gif",file_types_description:"\u56fe\u7247\u6587\u4ef6",file_upload_limit:0,file_post_name:"picdata",file_queued_handler:function(e){t.insert(e.id)},file_dialog_complete_handler:n,upload_success_handler:function(e,n){n=n.evalExp(),t.finish(e.id,n)},file_queue_error_handler:function(e,t){t==-110&&Wenda.Panel.alert({msg:"\u56fe\u7247\u5927\u5c0f\u8d85\u8fc7\u9650\u5236",desc:"\u8bf7\u4e0d\u8981\u4e0a\u4f20\u8d85\u8fc75MB\u7684\u56fe\u7247",yesBtnText:"\u786e\u5b9a"})},upload_complete_handler:r,button_image_url:"http://p19.qhmsg.com/t017df790022c9272ae.png ",button_placeholder_id:"spanButtonPlaceholder",button_width:50,button_height:20,button_text_top_padding:0,button_text_left_padding:18,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:"/resource/swf/swfupload.swf",custom_settings:{},debug:!1};return e&&$.extend(!0,s,e),new SWFUpload(s)}function u(e){function t(e){var t=$(".js-form-error");t.html(e),t.show().fadeOut(1e4)}return e.getContent().indexOf("http://p6.qhmsg.com/t01798cd1a6b1065192.gif")>-1?(t("\u6b63\u5728\u4e0a\u4f20\u56fe\u7247\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u6216\u8005\u5220\u9664\u91cd\u65b0\u4e0a\u4f20\uff01"),!1):e.getContent().indexOf("http://p1.qhmsg.com/t01383134a68d72f138.png")>-1?(t("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),!1):!0}var e={},t=Wenda.Panel;return e.makeHtml5=s,e.makeFlash=o,e.checkLoadingImg=u,e}()),function(){var e,t=window.location.pathname;e="/resource/js/components/editor/",window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,toolbars:[[]],labelMap:{},initialContent:"\u70b9\u6b64\u8f93\u5165\u60a8\u7684\u56de\u7b54",autoClearinitialContent:!0,textarea:"content",focus:!1,minFrameHeight:100,autoHeightEnabled:!0,autoHeightMax:600,pasteplain:!0,wordCount:!1,maximumWords:15e3}}(),UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor={},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE.version="1.2.3.0";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!!window.ActiveXObject,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",edge:e.indexOf("edge")>-1};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera;var r=0;n.ie&&(r=parseFloat(e.match(/msie (\d+)/)[1]),n.ie9Compat=document.documentMode==9,n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=r==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=r<7||n.quirks);if(n.gecko){var i=e.match(/rv:([\d\.]+)/);i&&(i=i[1].split("."),r=i[0]*1e4+(i[1]||0)*100+(i[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(r=parseFloat(t.version())),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=!n.mobile&&(n.ie&&r>=6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1),n}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,edge=browser.edge,utils=UE.utils={makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var r in t)if(!n||!e.hasOwnProperty(r))e[r]=t[r];return e},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isString:function(e){return typeof e=="string"||e.constructor==String},inherits:function(e,t){var n=e.prototype,r=utils.makeInstance(t.prototype);return utils.extend(r,n,!0),e.prototype=r,r.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var r;return function(){n&&clearTimeout(r),r=setTimeout(e,t)}},indexOf:function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},findNode:function(e,t,n){for(var r=0,i;i=e[r++];)if(n?n(i):this.indexOf(t,i.tagName.toLowerCase())!=-1)return i},removeItem:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t=0,n,r={};n=e[t++];)r[n.toUpperCase()]=r[n]=1;return r},unhtml:function(e,t){return e?e.replace(t||/[&<">]/g,function(e){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">"}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":e.cssFloat!=undefined?"cssFloat":e.styleFloat!=undefined?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){var e={};return function(t,n,r){var i=e
[n.src||n.href];if(i){utils.isArray(i.funs)&&(i.ready?r():e[n.src||n.href].funs.push(r));return}e[n.src||n.href]=r?{funs:[r]}:1;if(!t.body){t.write('<script src="'+n.src+'"></script>');return}if(n.id&&t.getElementById(n.id))return;var s=t.createElement(n.tag);delete n.tag;for(var o in n)s.setAttribute(o,n[o]);s.onload=s.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){i=e[n.src||n.href];if(i.funs){i.ready=1;for(var t;t=i.funs.pop();)t()}s.onload=s.onreadystatechange=null}},t.getElementsByTagName("head")[0].appendChild(s)}}(),isEmptyObject:function(e){for(var t in e)return!1;return!0},isFunction:function(e){return"[object Function]"==Object.prototype.toString.call(e)},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(n.length>3)return"";t="#";for(var r=0,i;i=n[r++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function i(e,t){if(!e)return"";var n=e.top,r=e.bottom,i=e.left,s=e.right,o="";if(!n||!i||!r||!s)for(var u in e)o+=";"+t+"-"+u+":"+e[u]+";";else o+=";"+t+":"+(n==r&&r==i&&i==s?n:n==r&&i==s?n+" "+i:i==s?n+" "+i+" "+r:n+" "+s+" "+r+" "+i)+";";return o}var t,n,r;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,r,i,s){if(s.split(" ").length==1)switch(r){case"padding":return!t&&(t={}),t[i]=s,"";case"margin":return!n&&(n={}),n[i]=s,"";case"border":return s=="initial"?"":e}return e}),e+=i(t,"padding")+i(n,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},domReady:function(){function n(){e=!0;for(var n;n=t.pop();)n()}var e=!1,t=[];return function(r){if(document.readyState==="complete")return r&&setTimeout(r,1);r&&t.push(r),e&&n(),browser.ie?(function(){if(e)return;try{document.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,0);return}n()}(),window.attachEvent("onload",n)):(document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),n()},!1),window.addEventListener("load",n,!1))}}()};utils.domReady();var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)getListener(this,r,!0).push(t)},removeListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)utils.removeItem(getListener(this,r)||[],t)},fireEvent:function(e){e=utils.trim(e).split(" ");for(var t=0,n;n=e[t++];){var r=getListener(this,n),i,s,o;if(r){o=r.length;while(o--)s=r[o].apply(this,arguments),s!==undefined&&(i=s)}if(s=this["on"+n.toLowerCase()])i=s.apply(this,arguments)}return i}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}function t(e){var t=arguments;for(var n=1;n<t.length;n++){var r=t[n];for(var i in r)e.hasOwnProperty(i)||(e[i]=r[i])}return e}var n=e({isindex:1,fieldset:1}),r=e({input:1,button:1,select:1,textarea:1,label:1}),i=t(e({a:1}),r),s=t({iframe:1},i),o=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),u=e({ins:1,del:1,script:1,style:1}),a=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),u),f=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),a),l=t(e({p:1}),f),c=t(e({iframe:1}),f,r),h=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),p=t(e({a:0}),c),d=e({tr:1}),v=e({"#":1}),m=t(e({param:1}),h),g=t(e({form:1}),n,s,o,l),y=e({li:1}),b=e({style:1,script:1}),w=e({base:1,link:1,meta:1,title:1}),E=t(w,b),S=e({head:1,body:1}),x=e({html:1}),T=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),N=e({area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,embed:1});return e({$nonBodyContent:t(x,S,w),$block:T,$inline:p,$body:t(e({script:1,style:1}),T),$cdata:e({script:1,style:1}),$empty:N,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:S,head:E,style:v,script:v,body:g,base:{},link:{},meta:{},title:v,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:p,button:t(l,o),basefont:{},h5:p,h4:p,samp:p,h6:p,ol:y,h1:p,h3:p,option:v,h2:p,form:t(n,s,o,l),select:e({optgroup:1,option:1}),font:p,ins:p,menu:y,abbr:p,label:p,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:p,tfoot:d,cite:p,li:g,input:{},iframe:g,strong:p,textarea:v,noframes:g,big:p,small:p,span:e({"#":1,br:1}),hr:p,dt:p,sub:p,optgroup:e({option:1}),param:{},bdo:p,"var":p,div:g,object:m,sup:p,dd:g,strike:p,area:{},dir:y,map:t(e({area:1,form:1,p:1}),n,u,o),applet:m,dl:e({dt:1,dd:1}),del:p,isindex:{},fieldset:t(e({legend:1}),h),thead:d,ul:y,acronym:p,b:p,a:t(e({a:1}),c),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:p,i:p,u:p,tbody:d,s:p,address:t(s,l),tt:p,legend:p,q:p,pre:t(a,i),p:t(e({a:1}),p),em:p,dfn:p})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,r=[e],i=[t];n=e;while(n=n.parentNode){if(n===t)return 10;r.push(n)}n=t;while(n=n.parentNode){if(n===e)return 20;i.push(n)}r.reverse(),i.reverse();if(r[0]!==i[0])return 1;var s=-1;while(s++,r[s]===i[s]);e=r[s],t=i[s];while(e=e.nextSibling)if(e===t)return 4;return 2},getNodeIndex:function(e,t){var n=e,r=0;while(n=n.previousSibling){if(t&&n.nodeType==3)continue;r++}return r},inDoc:function(e,t){while(e=e.parentNode)if(e===t)return!0;return!1},findParent:function(e,t,n){if(!domUtils.isBody(e)){e=n?e:e.parentNode;while(e){if(!t||t(e)||this.isBody(e))return t&&!t(e)&&this.isBody(e)?null:e;e=e.parentNode}}return null},findParentByTagName:function(e,t,n,r){if(e&&e.nodeType&&!this.isBody(e)&&(e.nodeType==1||e.nodeType)){t=utils.listToMap(utils.isArray(t)?t:[t]),e=e.nodeType==3||!n?e.parentNode:e;while(e&&e.tagName&&e.nodeType!=9){if(r&&r(e))break;if(t[e.tagName])return e;e=e.parentNode}}return null},findParents:function(e,t,n,r){var i=t&&(n&&n(e)||!n)?[e]:[];while(e=domUtils.findParent(e,n))i.push(e);return r?i:i.reverse()},insertAfter:function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},remove:function(e,t){var n=e.parentNode,r;if(n){if(t&&e.hasChildNodes())while(r=e.firstChild)n.insertBefore(r,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,n,r){return getDomNode(e,"firstChild","nextSibling",t,n,r)},isBookmarkNode:function(e){return e.nodeType==1&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;var n=[e],r=[t],i=e,s=-1;while(i=i.parentNode){if(i===t)return i;n.push(i)}i=t;while(i=i.parentNode){if(i===e)return i;r.push(i)}n.reverse(),r.reverse();while(s++,n[s]===r[s]);return s==0?null:n[s-1]},clearEmptySibling:function(e,t,n){function r(e,t){var n;while(e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)))n=e[t],domUtils.remove(e),e=n}!t&&r(e.nextSibling,"nextSibling"),!n&&r(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var r=n.createTextNode("");return domUtils.insertAfter(e,r)}var i=e.splitText(t);if(browser.ie8){var s=n.createTextNode("");domUtils.insertAfter(i,s),domUtils.remove(s)}return i},isWhitespace:function(e){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)},getXY:function(e){var t=0,n=0;while(e.offsetParent)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={});var s=t+n.toString();n._d[s]||(n._d[s]=function(e){return n.call(e.srcElement,e||window.event)},e.attachEvent("on"+t,n._d[s]))}}e=null},un:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var s=t+n.toString();e.detachEvent("on"+t,n._d?n._d[s]:n),n._d&&n._d[s]&&delete n._d[s]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return 0;var n=e.attributes,r=t.attributes;if(!ie&&n.length!=r.length)return 0;var i,s,o=0,u=0;for(var a=0;i=n[a++];){if(i.nodeName=="style"){i.specified&&o++;if(domUtils.isSameStyle(e,t))continue;return 0}if(ie){if(!i.specified)continue;o++,s=r.getNamedItem(i.nodeName)}else s=t.attributes[i.nodeName];if(!s.specified||i.nodeValue!=s.nodeValue)return 0}if(ie){for(a=0;s=r[a++];)s.specified&&u++;if(o!=u)return 0}return 1},isSameStyle:function(e,t){var n=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),r=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){n=e.style,r=t.style;if(n.length!=r.length)return 0;for(var i in n){if(/^(\d+|csstext)$/i.test(i))continue;if(n[i]!=r[i])return 0}return 1}if(!n||!r)return n==r?1:0;n=n.split(";"),r=r.split(";");if(n.length!=r.length)return 0;for(var s=0,o;o=n[s++];)if(utils.indexOf(r,o)==-1)return 0;return 1},isBlockElm:function(e){return e.nodeType==1&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&e.nodeType==1&&e.tagName.toLowerCase()=="body"},breakParent:function(e,t){var n,r=e,i=e,s,o;do{r=r.parentNode,s?(n=r.cloneNode(!1),n.appendChild(s),s=n,n=r.cloneNode(!1),n.appendChild(o),o=n):(s=r.cloneNode(!1),o=s.cloneNode(!1));while(n=i.previousSibling)s.insertBefore(n,s.firstChild);while(n=i.nextSibling)o.appendChild(n);i=r}while(t!==r);return n=t.parentNode,n.insertBefore(s,t),n.insertBefore(o,t),n.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(e.nodeType!=1||!dtd.$removeEmpty[e.tagName])return 0;e=e.firstChild;while(e){if(domUtils.isBookmarkNode(e))return 0;if(e.nodeType==1&&!domUtils.isEmptyInlineElement(e)||e.nodeType==3&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){var n;while((n=e[t])&&n.nodeType==3&&domUtils.isWhitespace(n))e.removeChild(n)}t("firstChild"),t("lastChild")},mergChild:function(e,t,n){var r=domUtils.getElementsByTagName(e,e.tagName.toLowerCase());for(var i=0,s;s=r[i++];){if(!s.parentNode||domUtils.isBookmarkNode(s))continue;if(s.tagName.toLowerCase()=="span"){if(e===s.parentNode){domUtils.trimWhiteTextNode(e);if(e.childNodes.length==1){e.style.cssText=s.style.cssText+";"+e.style.cssText,domUtils.remove(s,!0);continue}}s.style.cssText=e.style.cssText+";"+s.style.cssText;if(n){var o=n.style;if(o){o=o.split(";");for(var u=0,a;a=o[u++];)s.style[utils.cssStyleToDomStyle(a.split(":")[0])]=a.split(":")[1]}}domUtils.isSameStyle(s,e)&&domUtils.remove(s,!0);continue}domUtils.isSameElement(e,s)&&domUtils.remove(s,!0)}if(t=="span"){var f=domUtils.getElementsByTagName(e,"a");for(var i=0,l;l=f[i++];)l.style.cssText=";"+e.style.cssText,l.style.textDecoration="underline"}},getElementsByTagName:function(e,t){var n=e.getElementsByTagName(t),r=[];for(var i=0,s;s=n[i++];)r.push(s);return r},mergToParent:function(e){var t=e.parentNode;while(t&&dtd.$removeEmpty[t.tagName]){if(t.tagName==e.tagName||t.tagName=="A"){domUtils.trimWhiteTextNode(t);if(t.tagName=="SPAN"&&!domUtils.isSameStyle(t,e)||t.tagName=="A"&&e.tagName=="SPAN"){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,t.tagName=="A"&&(t.style.textDecoration="underline")}if(t.tagName!="A"){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergSibling:function(e,t,n){function r(e,t,n){var r;if((r=n[e])&&!domUtils.isBookmarkNode(r)&&r.nodeType==1&&domUtils.isSameElement(n,r)){while(r.firstChild)t=="firstChild"?n.insertBefore(r.lastChild,n.firstChild):n.appendChild(r.firstChild);domUtils.remove(r)}}!t&&r("previousSibling","firstChild",e),!n&&r("nextSibling","lastChild",e)},unselectable:ie||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t=0,n;n=e.all[t++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){for(var n=0,r;r=t[n++];){r=attrFix[r]||r;switch(r){case"className":e[r]="";break;case"style":e.style.cssText="",!browser.ie&&e.removeAttributeNode(e.getAttributeNode("style"))}e.removeAttribute(r)}},creElm:function(e,t,n){return this.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t){var r=t[n];switch(n){case"class":e.className=r;break;case"style":e.style.cssText=e.style.cssText+";"+r;break;case"innerHTML":e[n]=r;break;case"value":e.value=r;break;default:e.setAttribute(attrFix[n]||n,r)}}return e},getComputedStyle:function(e,t){function n(e,t){return e=="font-size"&&/pt$/.test(t)&&(t=Math.round(parseFloat(t)/.75)+"px"),t}e.nodeType==3&&(e=e.parentNode);if(browser.ie&&browser.version<9&&t=="font-size"&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var r=e.ownerDocument.createElement("span");r.style.cssText="padding:0;border:0;font-family:simsun;",r.innerHTML=".",e.appendChild(r);var i=r.offsetHeight;return e.removeChild(r),r=null,i+"px"}try{var s=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(o){return null}return n(t,utils.fixColor(t,s))},removeClasses:function(e,t){t=utils.isArray(t)?t:[t],e.className=(" "+e.className+" ").replace(new RegExp("(?:\\s+(?:"+t.join("|")+"))+\\s+","g")," ")},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeStyle:function(e,t){e.style[utils.cssStyleToDomStyle(t)]="",e.style.cssText||domUtils.removeAttributes(e,["style"])},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},getStyle:function(e,t){var n=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,n)},setStyle:function(e,t,n){e.style[utils.cssStyleToDomStyle(t)]=n},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&domUtils.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t=0,n,r=e.getElementsByTagName("*");n=r[t++];)n.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,r=e.firstChild;t=t||function(){return 1};while(r)t(r)&&n++,r=r.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})==0},clearSelectedArr:function(e){var t;while(t=e.pop())domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var r=function(){var e=t.document,n=e.compatMode=="CSS1Compat";return{width:(n?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(n?e.documentElement.clientHeight:e.body.clientHeight)||0}},i=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},s=r().height,o=s*-1+n;o+=e.offsetHeight||0;var u=domUtils.getXY(e);o+=u.y;var a=i(t).y;(o>a||o<a-s)&&t.scrollTo(0,o+(o<0?-20:20))},isBr:function(e){return e.nodeType==1&&e.tagName=="BR"},isFillChar:function(e){return e.nodeType==3&&!e.nodeValue.replace(new RegExp(domUtils.fillChar),"").length},isStartInblock:function(e){var t=e.cloneRange(),n=0,r=t.startContainer,i;while(r&&domUtils.isFillChar(r))i=r,r=r.previousSibling;i&&(t.setStartBefore(i),r=t.startContainer),r.nodeType==1&&domUtils.isEmptyNode(r)&&t.startOffset==1&&t.setStart(r,0).collapse(!0);while(!t.startOffset){r=t.startContainer;if(domUtils.isBlockElm(r)||domUtils.isBody(r)){n=1;break}var s=t.startContainer.previousSibling,o;if(!s)t.setStartBefore(t.startContainer);else{while(s&&domUtils.isFillChar(s))o=s,s=s.previousSibling;o?t.setStartBefore(o):t.setStartBefore(t.startContainer)}}return n&&!domUtils.isBody(t.startContainer)?1:0},isEmptyBlock:function(e){var t=new RegExp("[ 	\r\n"+domUtils.fillChar+"]","g");if(e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)try{if(e.getElementsByTagName(n).length)return 0}catch(r){}return 1},setViewportOffset:function(e,t){var n=parseInt(e.style.left)|0,r=parseInt(e.style.top)|0,i=e.getBoundingClientRect(),s=t.left-i.left,o=t.top-i.top;s&&(e.style.left=n+s+"px"),o&&(e.style.top=r+o+"px")},fillNode:function(e,t){var n=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){while(e.firstChild)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):e.attributes.length==0},isCustomeNode:function(e){return e.nodeType==1&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return e.nodeType==1&&e.tagName.toLowerCase()==t}},fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){function r(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function i(e,t,n,i){return t.nodeType==1&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])&&(n=domUtils.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(i.startContainer=t,i.startOffset=n,i.endContainer||i.collapse(!0)):(i.endContainer=t,i.endOffset=n,i.startContainer||i.collapse(!1)),r(i),i}function s(e,t){var n=e.startContainer,r=e.endContainer,i=e.startOffset,s=e.endOffset,o=e.document,u=o.createDocumentFragment(),a,f;n.nodeType==1&&(n=n.childNodes[i]||(a=n.appendChild(o.createTextNode("")))),r.nodeType==1&&(r=r.childNodes[s]||(f=r.appendChild(o.createTextNode(""))));if(n===r&&n.nodeType==3)return u.appendChild(o.createTextNode(n.substringData(i,s-i))),t&&(n.deleteData(i,s-i),e.collapse(!0)),u;var l,c,h=u,p=domUtils.findParents(n,!0),d=domUtils.findParents(r,!0);for(var v=0;p[v]==d[v];)v++;for(var m=v,g;g=p[m];m++){l=g.nextSibling,g==n?a||(e.startContainer.nodeType==3?(h.appendChild(o.createTextNode(n.nodeValue.slice(i))),t&&n.deleteData(i,n.nodeValue.length-i)):h.appendChild(t?n:n.cloneNode(!0))):(c=g.cloneNode(!1),h.appendChild(c));while(l){if(l===r||l===d[m])break;g=l.nextSibling,h.appendChild(t?l:l.cloneNode(!0)),l=g}h=c}h=u,p[v]||(h.appendChild(p[v-1].cloneNode(!1)),h=h.firstChild);for(var m=v,y;y=d[m];m++){l=y.previousSibling,y==r?!f&&e.endContainer.nodeType==3&&(h.appendChild(o.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(c=y.cloneNode(!1),h.appendChild(c));if(m!=v||!p[v])while(l){if(l===n)break;y=l.previousSibling,h.insertBefore(t?l:l.cloneNode(!0),h.firstChild),l=y}h=c}return t&&e.setStartBefore(d[v]?p[v]?d[v]:p[v-1]:d[v-1]).collapse(!0),a&&domUtils.remove(a),f&&domUtils.remove(f),u}function u(e,t){try{if(n&&domUtils.inDoc(n,e))if(!n.nodeValue.replace(fillCharReg,"").length){var r=n.parentNode;domUtils.remove(n);while(r&&domUtils.isEmptyInlineElement(r)&&!r.contains(t))n=r.parentNode,domUtils.remove(r),r=n}else n.nodeValue=n.nodeValue.replace(fillCharReg,"")}catch(i){}}function a(e,t){var n;e=e[t];while(e&&domUtils.isFillChar(e))n=e[t],domUtils.remove(e),e=n}var e=0,t=domUtils.fillChar,n,o=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};o.prototype={cloneContents:function(){return this.collapsed?null:s(this,0)},deleteContents:function(){var e;return this.collapsed||s(this,1),browser.webkit&&(e=this.startContainer,e.nodeType==3&&!e.nodeValue.length&&(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:s(this,2)},setStart:function(e,t){return i(!0,e,t,this)},setEnd:function(e,t){return i(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},cloneRange:function(){var e=this,t=new o(e.document);return t.setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){var t=this,n,r=t.collapsed;while(t.startContainer.nodeType==1&&(n=t.startContainer.childNodes[t.startOffset])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setStart(n,0);if(r)return t.collapse(!0);if(!e)while(t.endContainer.nodeType==1&&t.endOffset>0&&(n=t.endContainer.childNodes[t.endOffset-1])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setEnd(n,n.childNodes.length);return t},getCommonAncestor:function(e,t){var n=this.startContainer,r=this.endContainer;return n===r?e&&n.nodeType==1&&this.startOffset==this.endOffset-1?n.childNodes[this.startOffset]:t&&n.nodeType==3?n.parentNode:n:domUtils.getCommonAncestor(n,r)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,r=this.collapsed,i=this.endContainer;if(t.nodeType==3){if(n==0)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var s=domUtils.split(t,n);t===i?this.setEnd(s,this.endOffset-n):t.parentNode===i&&(this.endOffset+=1),this.setStartBefore(s)}if(r)return this.collapse(!0)}return e||(n=this.endOffset,i=this.endContainer,i.nodeType==3&&(n==0?this.setEndBefore(i):n>=i.nodeValue.length?this.setEndAfter(i):(domUtils.split(i,n),this.setEndAfter(i)))),this},txtToElmBoundary:function(){function e(e,t){var n=e[t+"Container"],r=e[t+"Offset"];n.nodeType==3&&(r?r>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}return this.collapsed||(e(this,"start"),e(this,"end")),this},insertNode:function(e){var t=e,n=1;e.nodeType==11&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var r=this.startContainer,i=this.startOffset,s=r.childNodes[i];return s?r.insertBefore(e,s):r.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(t,n){var r,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("\ufeff")),i.id="_baidu_bookmark_start_"+(n?"":e++),this.collapsed||(r=i.cloneNode(!0),r.id="_baidu_bookmark_end_"+(n?"":e++)),this.insertNode(i),r&&(this.collapse(!1).insertNode(r),this.setEndBefore(r)),this.setStartAfter(i),{start:t?i.id:i,end:r?t?r.id:r:null,id:t}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,n=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),n?(this.setEndBefore(n),domUtils.remove(n)):this.collapse(!0),this},enlarge:function(e,t){var n=domUtils.isBody,r,i,s=this.document.createTextNode("");if(e){i=this.startContainer,i.nodeType==1?i.childNodes[this.startOffset]?r=i=i.childNodes[this.startOffset]:(i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.previousSibling)&&!domUtils.isBlockElm(r))i=r;this.setStartBefore(i);break}r=i,i=i.parentNode}i=this.endContainer,i.nodeType==1?((r=i.childNodes[this.endOffset])?i.insertBefore(s,r):i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.nextSibling)&&!domUtils.isBlockElm(r))i=r;this.setEndAfter(i);break}r=i,i=i.parentNode}s.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(s)}if(!this.collapsed){while(this.startOffset==0){if(t&&t(this.startContainer))break;if(n(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(t&&t(this.endContainer))break;if(n(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return e.nodeType==1&&domUtils.isBlockElm(e)}).adjustmentBoundary();var r=this.createBookmark(),i=r.end,s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},o=domUtils.getNextDomNode(r.start,!1,s),u,a,f=this.cloneRange();while(o&&domUtils.getPosition(o,i)&domUtils.POSITION_PRECEDING)if(o.nodeType==3||dtd[e][o.tagName]){f.setStartBefore(o),u=o;while(u&&(u.nodeType==3||dtd[e][u.tagName])&&u!==i)a=u,u=domUtils.getNextDomNode(u,u.nodeType==1,null,function(t){return dtd[e][t.tagName]});var l=f.setEndAfter(a).extractContents(),c;if(n&&n.length>0){var h,p;p=h=n[0].cloneNode(!1);for(var d=1,v;v=n[d++];)h.appendChild(v.cloneNode(!1)),h=h.firstChild;c=h}else c=f.document.createElement(e);t&&domUtils.setAttributes(c,t),c.appendChild(l),f.insertNode(n?p:c);var m;e=="span"&&t.style&&/text\-decoration/.test(t.style)&&(m=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(m,t),domUtils.remove(c,!0),c=m):(domUtils.mergSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergChild(c,e,t),o=domUtils.getNextDomNode(c,!1,s),domUtils.mergToParent(c);if(u===i)break}else o=domUtils.getNextDomNode(o,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();var t=this.startContainer,n=this.endContainer;for(;;){if(t.nodeType==1){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if(t.tagName.toLowerCase()=="body"){t=null;break}}t=t.parentNode}for(;;){if(n.nodeType==1){if(utils.indexOf(e,n.tagName.toLowerCase())>-1)break;if(n.tagName.toLowerCase()=="body"){n=null;break}}n=n.parentNode}var r=this.createBookmark(),i,s;t&&(s=this.cloneRange().setEndBefore(r.start).setStartBefore(t),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),n&&(s=this.cloneRange().setStartAfter(r.end).setEndAfter(n),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(r.end,n.nextSibling));var o=domUtils.getNextDomNode(r.start,!1,function(e){return e.nodeType==1}),u;while(o&&o!==r.end)u=domUtils.getNextDomNode(o,!0,function(e){return e.nodeType==1}),utils.indexOf(e,o.tagName.toLowerCase())>-1&&domUtils.remove(o,!0),o=u;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(t.startContainer.nodeType==1&&t.startContainer===t.endContainer&&t.endOffset-t.startOffset==1){var n=t.startContainer.childNodes[t.startOffset];n&&n.nodeType==1&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(e=n)}}return e},select:browser.ie?function(e,r){var i;this.collapsed||this.shrinkBoundary();var s=this.getClosedNode();if(s&&!r){try{i=this.document.body.createControlRange(),i.addElement(s),i.select()}catch(o){}return this}var f=this.createBookmark(),l=f.start,c;i=this.document.body.createTextRange(),i.moveToElementText(l),i.moveStart("character",1);if(!this.collapsed){var h=this.document.body.createTextRange();c=f.end,h.moveToElementText(c),i.setEndPoint("EndToEnd",h)}else if(!e&&this.startContainer.nodeType!=3){var p=this.document.createTextNode(t),d=this.document.createElement("span");d.appendChild(this.document.createTextNode(t)),l.parentNode.insertBefore(d,l),l.parentNode.insertBefore(p,l),u(this.document,p),n=p,a(d,"previousSibling"),a(l,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}this.moveToBookmark(f),d&&domUtils.remove(d);try{i.select()}catch(o){}return this}:function(e){var r=domUtils.getWindow(this.document),i=r.getSelection(),s;browser.gecko||r.focus();if(i){i.removeAllRanges();if(this.collapsed){if(e&&browser.opera&&!domUtils.isBody(this.startContainer)&&this.startContainer.nodeType==1){var o=this.document.createTextNode("");this.insertNode(o).setStart(o,0).collapse(!0)}e||(s=this.document.createTextNode(t),this.insertNode(s),u(this.document,s),a(s,"previousSibling"),a(s,"nextSibling"),n=s,this.setStart(s,browser.webkit?1:0).collapse(!0))}var f=this.document.createRange();f.setStart(this.startContainer,this.startOffset),f.setEnd(this.endContainer,this.endOffset),i.addRange(f)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var n=this.document.createElement("span");n.innerHTML="&nbsp;";var r=this.cloneRange();return r.insertNode(n),domUtils.scrollToView(n,e,t),domUtils.remove(n),this}}})(),function(){function e(e,t){var n=domUtils.getNodeIndex;e=e.duplicate(),e.collapse(t);var r=e.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};var i=r.children,s,o=e.duplicate(),u=0,a=i.length-1,f=-1,l;while(u<=a){f=Math.floor((u+a)/2),s=i[f],o.moveToElementText(s);var c=o.compareEndPoints("StartToStart",e);if(c>0)a=f-1;else{if(!(c<0))return{container:r,offset:n(s)};u=f+1}}if(f==-1){o.moveToElementText(r),o.setEndPoint("StartToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!l)return s=i[i.length-1],{container:s,offset:s.nodeValue.length};var h=i.length;while(l>0)l-=i[--h].nodeValue.length;return{container:i[h],offset:-l}}o.collapse(c>0),o.setEndPoint(c>0?"StartToStart":"EndToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length;if(!l)return dtd.$empty[s.tagName]||dtd.$nonChild[s.tagName]?{container:r,offset:n(s)+(c>0?0:1)}:{container:s,offset:c>0?0:s.childNodes
.length};while(l>0)try{var p=s;s=s[c>0?"previousSibling":"nextSibling"],l-=s.nodeValue.length}catch(d){return{container:r,offset:n(p)}}return{container:s,offset:c>0?-l:s.nodeValue.length+l}}function t(t,n){if(t.item)n.selectNode(t.item(0));else{var r=e(t,!0);n.setStart(r.container,r.offset),t.compareEndPoints("StartToEnd",t)!=0&&(r=e(t,!1),n.setEnd(r.container,r.offset))}return n}function n(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var r=t.item?t.item(0):t.parentElement();return(r.ownerDocument||r)===e.document?t:null}var r=dom.Selection=function(e){var t=this,r;t.document=e,ie&&(r=domUtils.getWindow(e).frameElement,domUtils.on(r,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),domUtils.on(r,"activate",function(){try{!n(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),r=e=null};r.prototype={getNative:function(){var e=this.document;try{return e?ie?e.selection:domUtils.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return browser.ie&&n(this)||!browser.ie&&this.getNative().rangeCount?!0:!1}catch(e){return!1}},getRange:function(){function n(t){var n=e.document.body.firstChild,r=t.collapsed;while(n&&n.firstChild)t.setStart(n,0),n=n.firstChild;t.startContainer||t.setStart(e.document.body,0),r&&t.collapse(!0)}var e=this;if(e._cachedRange!=null)return this._cachedRange;var r=new baidu.editor.dom.Range(e.document);if(ie){var i=e.getIERange();i?t(i,r):n(r)}else{var s=e.getNative();if(s&&s.rangeCount){var o=s.getRangeAt(0),u=s.getRangeAt(s.rangeCount-1);r.setStart(o.startContainer,o.startOffset).setEnd(u.endContainer,u.endOffset),r.collapsed&&domUtils.isBody(r.startContainer)&&!r.startOffset&&n(r)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;n(r)}}return this._bakRange=r},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e=ie?this.getIERange():this.getRange(),t,n,r,i;if(ie){if(!e)return this.document.body.firstChild;if(e.item)return e.item(0);t=e.duplicate(),t.text.length>0&&t.moveStart("character",1),t.collapse(1),n=t.parentElement(),i=r=e.parentElement();while(r=r.parentNode)if(r==n){n=i;break}}else{e.shrinkBoundary(),n=e.startContainer,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,e.startOffset)]);if(n.nodeType==3)return n.parentNode}return n},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie?e.createRange():e.getRangeAt(0),browser.ie?t.text:t.toString()):""}}}(),function(){function n(e){var t=e.getElementsByTagName("img"),n;for(var r=0,i;i=t[r++];)if(n=i.getAttribute("orgSrc"))i.src=n,i.removeAttribute("orgSrc");var s=e.getElementsByTagName("a");for(var r=0,o;o=s[r++];r++)o.getAttribute("data_ue_src")&&o.setAttribute("href",o.getAttribute("data_ue_src"))}function r(e,t){var n,r,i;try{t.textarea=document.getElementById("ueditor_textarea_content")}catch(s){}if(t.textarea)if(utils.isString(t.textarea)){for(var o=0,u,a=domUtils.getElementsByTagName(e,"textarea");u=a[o++];)if(u.id=="ueditor_textarea_"+t.options.textarea){n=u;break}}else n=t.textarea;n||e.appendChild(n=domUtils.creElm(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),i=new RegExp("[\r	\n]","g"),t.options.initialContent&&t.options.initialContent.replace(/<[^>]*>/gi,"")==t.getContentTxt().replace(i,"")?r="":r=t.getContent(null,null,!0),n.value=t.options.allHtmlEnabled?t.getAllHtml():r}var e=0,t,i=UE.Editor=function(t){var n=this;n.uid=e++,EventBase.call(n),n.commands={},n.options=utils.extend(t||{},UEDITOR_CONFIG,!0),n.setOpt({isShow:!0,initialContent:"\u6b22\u8fce\u4f7f\u7528ueditor!",autoClearinitialContent:!1,iframeCssUrl:"",textarea:"editorValue",focus:!1,minFrameHeight:320,autoClearEmptyNode:!0,readonly:!1,zIndex:999,enterTag:"p",pageBreakTag:"_baidu_page_break_tag_",customDomain:!1,lang:"zh-cn",langPath:n.options.UEDITOR_HOME_URL+"lang/",allHtmlEnabled:!1});for(var r in UE.plugins)UE.plugins[r].call(n);n.langIsReady=!0,n.fireEvent("langReady"),UE.instants["ueditorInstant"+n.uid]=n};i.prototype={ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var n={};utils.isString(e)?n[e]=t:n=e,utils.extend(this.options,n,!0)},destroy:function(){var e=this;e.fireEvent("destroy"),e.container.innerHTML="",domUtils.remove(e.container);for(var t in e)e.hasOwnProperty(t)&&delete this[t]},render:function(e){var t=this,n=t.options;e.constructor===String&&(e=document.getElementById(e));if(e){var r=n.initialStyle?n.initialStyle:'body{margin:0;background:fff;padding:2px 4px;font:14px/20px arial,"\u5b8b\u4f53";cursor:text;white-space: pre-wrap;}',i=ie&&browser.version<9,s=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml'"+(i?"":" class='view'")+"><head>"+(n.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(n.iframeCssUrl)+"'/>":"")+"<style type='text/css'>"+r+"p{margin:1px 0;padding:0;cursor:text;word-wrap:break-word;vertical-align:baseline \\0}"+"p img{vertical-align:bottom;*vertical-align:-3px}"+"img{border:0}"+"ol,ul{margin-top:0;margin-bottom:0;margin-left:0;padding-left:2em}"+"ol{*margin-left:2px}#initContent{color:#ccc}"+".selectTdClass{background-color:#3399FF !important;}"+"table.noBorderTable td{border:1px dashed #ddd !important}"+"table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}"+".view{padding:0;word-wrap:break-word;cursor:text;height:100%;}\n"+"</style></head><body"+(i?" class='view'":"")+"></body>";if(n.customDomain&&document.domain!=location.hostname)s+="<script>window.parent.UE.instants['ueditorInstant"+t.uid+"']._setup(document);</script></html>",e.appendChild(domUtils.creElm(document,"iframe",{id:"baidu_editor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:'javascript:void(function(){document.open();document.domain="'+document.domain+'";'+'document.write("'+s+'");document.close();}())'}));else{e.innerHTML='<iframe id="baidu_editor_'+this.uid+'"'+'width="100%" height="100%" scroll="no" frameborder="0" ></iframe>';var o=e.firstChild.contentWindow.document;!browser.webkit&&o.open(),o.write(s+"</html>"),o.close(),window.setTimeout(function(){t._setup(o)},50)}e.style.overflow="hidden"}},_setup:function(e){var t=this,n=t.options;ie?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):(e.body.contentEditable=!0,e.body.spellcheck=!1),t.document=e,t.window=e.defaultView||e.parentWindow,t.iframe=t.window.frameElement,t.body=e.body,t.setHeight(n.minFrameHeight),t.selection=new dom.Selection(e);var i;browser.gecko&&(i=this.selection.getNative())&&i.removeAllRanges(),this._initEvents();if(n.initialContent)if(n.autoClearinitialContent){var s=t.execCommand;t.execCommand=function(){t.fireEvent("firstBeforeExecCommand"),s.apply(t,arguments)},this.setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,!0);for(var o=this.iframe.parentNode;!domUtils.isBody(o);o=o.parentNode)if(o.tagName=="FORM"){domUtils.on(o,"submit",function(){r(this,t)});break}domUtils.isEmptyNode(t.body)&&(t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),n.focus&&setTimeout(function(){t.focus(),!t.options.autoClearinitialContent&&t._selectionChange()}),t.container||(t.container=this.iframe.parentNode),t.isReady=1,t.fireEvent("ready");try{domUtils.on(t.window,["blur","focus"],function(e){if(e.type=="blur"){t.options.onBlurfun&&t.options.onBlurfun(),t._bakRange=t.selection.getRange();try{t.selection.getNative().removeAllRanges()}catch(e){}}else{t.options.onFocusfun&&t.options.onFocusfun();try{t._bakRange&&t._bakRange.select()}catch(e){}}})}catch(u){}browser.gecko&&browser.version<=10902&&(t.body.contentEditable=!1,setTimeout(function(){t.body.contentEditable=!0},100),setInterval(function(){t.body.style.height=t.iframe.offsetHeight-20+"px"},100)),!n.isShow&&t.setHide(),n.readonly&&t.setDisabled()},sync:function(e){var t=this,n=e?document.getElementById(e):domUtils.findParent(t.iframe.parentNode,function(e){return e.tagName=="FORM"},!0);n&&r(n,t)},setHeight:function(e){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),this.document.body.style.height=e-20+"px"},getContent:function(e,t,n){var r=this;e&&utils.isFunction(e)&&(t=e,e="");if(t?!t():!this.hasContents())return"";r.fireEvent("beforegetcontent",e);var i=new RegExp(domUtils.fillChar,"g"),s=r.body.innerHTML.replace(i,"").replace(/>[\t\r\n]*?</g,"><");r.fireEvent("aftergetcontent",e);if(r.serialize){var o=r.serialize.parseHTML(s);o=r.serialize.transformOutput(o),s=r.serialize.toHTML(o)}return ie&&n?s=s.replace(/<p>\s*?<\/p>/g,"<p>&nbsp;</p>"):s=s.replace(/(&nbsp;)+/g,function(e){for(var t=0,n=[],r=e.split(";").length-1;t<r;t++)n.push(t%2==0?" ":"&nbsp;");return n.join("")}),s},getAllHtml:function(){var e=this,t={html:""},n="";return e.fireEvent("getAllHtml",t),"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+e.document.getElementsByTagName("head")[0].innerHTML+t.html+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return dtd.$block[n]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(e,t){var r=this,i=utils.extend({a:1,A:1},dtd.$inline,!0),s;e=e.replace(/^[ \t\r\n]*?</,"<").replace(/>[ \t\r\n]*?$/,">").replace(/>[\t\r\n]*?</g,"><").replace(/[\s\/]?(\w+)?>[ \t\r\n]*?<\/?(\w+)/gi,function(e,t,n){return t?s=n:t=s,!i[t]&&!i[n]?e.replace(/>[ \t\r\n]*?</,"><"):e}),r.fireEvent("beforesetcontent");var o=this.serialize;if(o){var u=o.parseHTML(e);u=o.transformInput(u),u=o.filter(u),e=o.toHTML(u)}this.body.innerHTML=e.replace(new RegExp("[\r"+domUtils.fillChar+"]*","g"),""),browser.ie&&browser.version<7&&n(this.document.body);if(r.options.enterTag=="p"){var a=this.body.firstChild,f;if(!a||a.nodeType==1&&(dtd.$cdata[a.tagName]||domUtils.isCustomeNode(a))&&a===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var l=r.document.createElement("p");while(a){while(a&&(a.nodeType==3||a.nodeType==1&&dtd.p[a.tagName]&&!dtd.$cdata[a.tagName]))f=a.nextSibling,l.appendChild(a),a=f;if(l.firstChild){if(!a){r.body.appendChild(l);break}r.body.insertBefore(l,a),l=r.document.createElement("p")}a=a.nextSibling}}}r.adjustTable&&r.adjustTable(r.body),r.fireEvent("aftersetcontent"),r.fireEvent("contentchange"),!t&&r._selectionChange(),r._bakRange=r._bakIERange=null;var c;browser.gecko&&(c=this.selection.getNative())&&c.removeAllRanges()},focus:function(e){try{var t=this,n=t.selection.getRange();e?n.setStartAtLast(t.body.lastChild).setCursor(!1,!0):n.select(!0)}catch(r){}},_initEvents:function(){var e=this,t=e.document,n=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(n,["focus","blur"],e._proxyDomEvent),domUtils.on(t,["mouseup","keydown"],function(t){if(t.type=="keydown"&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))return;if(t.button==2)return;e._selectionChange(250,t)});var r=0,i=browser.ie?e.body:e.document,s;domUtils.on(i,"dragstart",function(){r=1}),domUtils.on(i,browser.webkit?"dragover":"drop",function(){return browser.webkit?function(){clearTimeout(s),s=setTimeout(function(){if(!r){var t=e.selection,n=t.getRange();if(n){var i=n.getCommonAncestor();if(i&&e.serialize){var s=e.serialize,o=s.filter(s.transformInput(s.parseHTML(s.word(i.innerHTML))));i.innerHTML=s.toHTML(o)}}}r=0},200)}:function(e){r||(e.preventDefault?e.preventDefault():e.returnValue=!1),r=0}}())},_proxyDomEvent:function(e){return this.fireEvent(e.type.replace(/^on/,""),e)},_selectionChange:function(e,n){var r=this,i=!1,s,o;if(browser.ie&&browser.version<9&&n&&n.type=="mouseup"){var u=this.selection.getRange();u.collapsed||(i=!0,s=n.clientX,o=n.clientY)}clearTimeout(t),t=setTimeout(function(){if(!r.selection.getNative())return;var e;if(i&&r.selection.getNative().type=="None"){e=r.document.body.createTextRange();try{e.moveToPoint(s,o)}catch(t){e=null}}var u;e&&(u=r.selection.getIERange,r.selection.getIERange=function(){return e}),r.selection.cache(),u&&(r.selection.getIERange=u),r.selection._cachedRange&&r.selection._cachedStartElement&&(r.fireEvent("beforeselectionchange"),r.fireEvent("selectionchange",!!n),r.fireEvent("afterselectionchange"),r.selection.clear())},e||50)},_callCmdFn:function(e,t){var n=t[0].toLowerCase(),r,i;r=this.commands[n]||UE.commands[n],i=r&&r[e];if((!r||!i)&&e=="queryCommandState")return 0;if(i)return i.apply(this,t)},execCommand:function(e){e=e.toLowerCase();var t=this,n,r=t.commands[e]||UE.commands[e];if(!r||!r.execCommand)return;return!r.notNeedUndo&&!t.__hasEnterExecCommand?(t.__hasEnterExecCommand=!0,t.queryCommandState(e)!=-1&&(t.fireEvent("beforeexeccommand",e),n=this._callCmdFn("execCommand",arguments),t.fireEvent("afterexeccommand",e)),t.__hasEnterExecCommand=!1):n=this._callCmdFn("execCommand",arguments),t._selectionChange(),n},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t=0,n;n=e[t++];)if(this.document.getElementsByTagName(n).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;e=["div"];for(t=0;n=e[t++];){var r=domUtils.getElementsByTagName(this.document,n);for(var i=0,s;s=r[i++];)if(domUtils.isCustomeNode(s))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e=this,t;if(e.body.contentEditable=="false"){e.body.contentEditable=!0,t=e.selection.getRange();try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.fireEvent("selectionchange")}},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],t.body.contentEditable=="true"&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.queryCommandState=function(n){return utils.indexOf(e,n)!=-1?t.bkqueryCommandState.apply(t,arguments):-1},t.fireEvent("selectionchange"))},setDefaultContent:function(){function e(){var t=this;if(t.document.getElementById("initContent")){t.document.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";var n=t.selection.getRange();t.removeListener("firstBeforeExecCommand",e),t.removeListener("focus",e),setTimeout(function(){n.setStart(t.document.body.firstChild,0).collapse(!0).select(!0),t._selectionChange()})}}return function(t){var r=this;r.document.body.innerHTML='<p id="initContent">'+t+"</p>",browser.ie&&browser.version<7&&n(r.document.body),r.addListener("firstBeforeExecCommand",e),r.addListener("focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if(e.container.style.display=="none"){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.container.style.display=""}},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},getLang:function(e){var t=UE.I18N[this.options.lang];e=(e||"").split(".");for(var n=0,r;r=e[n++];){t=t[r];if(!t)break}return t}},utils.inherits(i,EventBase)}();var baidu=baidu||{};baidu.editor=baidu.editor||{},baidu.editor.ui={},function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,n="$EDITORUI",r=window[n]={},i="ID"+n,s=0,o=baidu.editor.ui.uiUtils={uid:function(e){return e?e[i]||(e[i]=++s):++s},hook:function(e,t){var n;return e&&e._callbacks?n=e:(n=function(){var t;e&&(t=e.apply(this,arguments));var r=n._callbacks,i=r.length;while(i--){var s=r[i].apply(this,arguments);t===undefined&&(t=s)}return t},n._callbacks=[]),n._callbacks.push(t),n},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return e.ie&&e.quirks?document.body:document.documentElement},getClientRect:function(e){var n;try{n=e.getBoundingClientRect()}catch(r){n={left:0,top:0,height:0,width:0}}var i={left:Math.round(n.left),top:Math.round(n.top),height:Math.round(n.bottom-n.top),width:Math.round(n.right-n.left)},s;while((s=e.ownerDocument)!==document&&(e=t.getWindow(s).frameElement))n=e.getBoundingClientRect(),i.left+=n.left,i.top+=n.top;return i.bottom=i.top+i.height,i.right=i.left+i.width,i},getViewportRect:function(){var e=o.getViewportElement(),t=(window.innerWidth||e.clientWidth)|0,n=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:n,width:t,bottom:n,right:t}},setViewportOffset:function(e,n){var r,i=o.getFixedLayer();e.parentNode===i?(e.style.left=n.left+"px",e.style.top=n.top+"px"):t.setViewportOffset(e,n)},getEventOffset:function(e){var t=e.target||e.srcElement,n=o.getClientRect(t),r=o.getViewportOffsetByEvent(e);return{left:r.left-n.left,top:r.top-n.top}},getViewportOffsetByEvent:function(e){var n=e.target||e.srcElement,r=t.getWindow(n).frameElement,i={left:e.clientX,top:e.clientY};if(r&&n.ownerDocument!==document){var s=o.getClientRect(r);i.left+=s.left,i.top+=s.top}return i},setGlobal:function(e,t){return r[e]=t,n+'["'+e+'"]'},unsetGlobal:function(e){delete r[e]},copyAttributes:function(t,n){var r=n.attributes,i=r.length;while(i--){var s=r[i];s.nodeName!="style"&&s.nodeName!="class"&&(!e.ie||s.specified)&&t.setAttribute(s.nodeName,s.nodeValue)}n.className&&(t.className+=" "+n.className),n.style.cssText&&(t.style.cssText+=";"+n.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):e.compareDocumentPosition(t)&16)}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.EventBase,r=baidu.editor.ui.UIBase=function(){};r.prototype={className:"",uiName:"",initOptions:function(e){var n=this;for(var r in e)n[r]=e[r];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){var n=this.renderHtml(),r=t.createElementByHtml(n),i=this.getDom();i!=null?(i.parentNode.replaceChild(r,i),t.copyAttributes(r,i)):(typeof e=="string"&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),e.appendChild(r))},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(r,n)}(),function(){function i(e){this.initOptions(e),this.initEditorUI()}var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.dom.domUtils;i.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this,this._dialogs={},this.initUIBase();var e=this.editor,t=this;e.addListener("ready",function(){e.options.elementPathEnabled&&(e.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+e.getLang("elementPathTip")+":</div>"),e.options.wordCount&&(e.ui.getDom("wordcount").innerHTML=e.getLang("wordCountTip"),e.ui.enableWordCount(),e.addListener("keyup",function(e,n){var r=n.keyCode||n.which;r==32&&t._wordCount()})),!e.options.elementPathEnabled&&!e.options.wordCount&&(e.ui.getDom("elementpath").style.display="none",e.ui.getDom("wordcount").style.display="none");if(!e.selection.isFocus())return;e.fireEvent("selectionchange",!1,!0)}),e.addListener("mousedown",function(e,t){var n=t.target||t.srcElement}),e.addListener("selectionchange",function(){e.options.elementPathEnabled&&t[(e.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),e.options.wordCount&&t[(e.queryCommandState("wordcount")==-1?"dis":"en")+"ableWordCount"]()})},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td></tr></table></div></div>'},_wordCount:function(){var e=this.getDom("wordcount");if(!this.editor.options.wordCount){e.style.display="none";return}e.innerHTML=this.editor.queryCommandValue("wordcount")},disableWordCount:function(){var e=this.getDom("wordcount");e.innerHTML="",e.style.display="none",this.wordcount=!1},enableWordCount:function(){var e=this.getDom("wordcount");e.style.display="",this.wordcount=!0,this._wordCount()},_updateElementPath:function(){var e=this.getDom("elementpath"),t;if(this.elementPathEnabled&&(t=this.editor.queryCommandValue("elementpath"))){var n=[];for(var r=0,i;i=t[r];r++)n[r]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+r+'&quot;);">'+i+"</span>");e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else e.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom=="1"?e.style.zoom="100%":e.style.zoom="1"}},e.inherits(i,baidu.editor.ui.UIBase),baidu.editor.ui.Editor=function(t){var n=new baidu.editor.Editor(t);n.options.editor=n;var r=n.render;return n.render=function(t){e.domReady(function(){function e(){n.setOpt({labelMap:n.options.labelMap||UE.I18N[n.options.lang].labelMap}),new i(n.options);if(t){t.constructor===String&&(t=document.getElementById(t)),t&&t.getAttribute("name")&&(n.options.textarea=t.getAttribute("name"));if(t&&/script|textarea/ig.test(t.tagName)){var e=document.createElement("div");t.parentNode.insertBefore(e,t);var s=t.value||t.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(s)?n.options.initialContent:s.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),t.id&&(e.id=t.id),t.className&&(e.className=t.className),t.style.cssText&&(e.style.cssText=t.style.cssText),/textarea/i.test(t.tagName)?(n.textarea=t,n.textarea.style.display="none"):t.parentNode.removeChild(t),t=e,t.innerHTML=""}}n.ui.render(t);var o=n.ui.getDom("iframeholder");n.container=n.ui.getDom(),n.container.style.zIndex=n.options.zIndex,r.call(n,o)}n.langIsReady?e():n.addListener("langReady",e)})},n}}(),UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){var n=e.selection.getStartElementPath();return utils.findNode(n,t)},n=this;for(var r in e)(function(e,r){n.commands[e]={execCommand:function(e){var i=new dom.Range(n.document),s="";if(n.currentSelectedArr&&n.currentSelectedArr.length>0){for(var o=0,u;u=n.currentSelectedArr[o++];)u.style.display!="none"&&(i.selectNodeContents(u).select(),!s&&(s=t(this,r)),(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]));i.selectNodeContents(n.currentSelectedArr[0]).select()}else{i=n.selection.getRange(),s=t(this,r);if(i.collapsed){if(s){var a=n.document.createTextNode("");i.insertNode(a).removeInlineStyle(r),i.setStartBefore(a),domUtils.remove(a)}else{var f=i.document.createElement(r[0]);if(e=="superscript"||e=="subscript")a=n.document.createTextNode(""),i.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(!0);i.insertNode(f).setStart(f,0)}i.collapse(!0)}else(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]);i.select()}return!0},queryCommandState:function(){return this.highlight?-1:t(this,r)?1:0}}})(r,e[r])},UE.plugins.wordcount=function(){var e=this;e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var t=e.options,n=t.maximumWords,r=t.wordCountMsg,i=t.wordOverFlowMsg;if(!t.wordCount)return;e.commands.wordcount={queryCommandValue:function(t,s){var o,u,a;return s?(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),u.length):(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),o=u.length,n-o<0?(e.fireEvent("wordcountoverflow"),i):r.replace("{#leave}",n-o>=0?n-o:0).replace("{#count}",o))}}},UE.plugins.undo=function(){function s(e){var t=this;t.collapsed=e.collapsed,t.startAddr=o(e.startContainer,e.startOffset),t.endAddr=e.collapsed?t.startAddr:o(e.endContainer,e.endOffset)}function o(e,t){for(var n=0,r=[t],i,s=domUtils.findParents(e,!0,function(e){return!domUtils.isBody(e)},!0);i=s[n++];){if(n==1&&i.nodeType==3){var o=i;while(o=o.previousSibling){if(o.nodeType!=3)break;t+=o.nodeValue.replace(fillCharReg,"").length}r[0]=t}r.push(domUtils.getNodeIndex(i,!0))}return r.reverse()}function u(e,t){if(e.length!=t.length)return 0;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return 0;return 1}function a(e,t,n){i=e.document.body;for(var r=0,i,s=n.length-1;r<s;r++)i=i.childNodes[n[r]];e[t+"Container"]=i,e[t+"Offset"]=n[n.length-1]}function f(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){var e=this.getScene(),t=this.list[this.index];t.content.replace(i,"")!=e.content.replace(i,"")&&this.save();if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var t=this.list[this.index];e.document.body.innerHTML=t.bookcontent.replace(r,"");if(browser.ie)for(var n=0,i,s=e.document.getElementsByTagName("p");i=s[n++];)i.innerHTML==""&&domUtils.fillNode(e.document,i);var o=new dom.Range(e.document);try{browser.opera||browser.safari?t.senceRange.transformRange(o):o.moveToBookmark({start:"_baidu_bookmark_start_",end:"_baidu_bookmark_end_",id:!0}),browser.ie&&browser.version==9&&o.collapsed&&domUtils.isBlockElm(o.startContainer)&&domUtils.isEmptyNode(o.startContainer)&&domUtils.fillNode(o.document,o.startContainer),o.select(!browser.gecko),!browser.opera&&!browser.safari&&setTimeout(function(){o.scrollToView(e.autoHeightEnabled,e.autoHeightEnabled?domUtils.getXY(e.iframe).y:0)},200)}catch(u){}this.update();if(e.currentSelectedArr){e.currentSelectedArr=[];var a=e.document.getElementsByTagName("td");for(var n=0,f;f=a[n++];)f.className==e.options.selectedTdClass&&e.currentSelectedArr.push(f)}this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var t=e.selection.getRange(),n=e.body.innerHTML.replace(r,"");t.shrinkBoundary(),browser.ie&&(n=n.replace(/>&nbsp;</g,"><").replace(/\s*</g,"").replace(/>\s*/g,">"));if(browser.opera||browser.safari)return{senceRange:new s(t),content:n,bookcontent:n};var i=t.createBookmark(!0,!0),o=e.body.innerHTML.replace(r,"");return i&&t.moveToBookmark(i).select(!0),{bookcontent:o,content:n}},this.save=function(){var e=this.getScene(),n=this.list[this.index];if(n&&n.content==e.content&&(browser.opera||browser.safari?n.senceRange.compare(e.senceRange):n.bookcontent==e.bookcontent))return;this.list=this.list.slice(0,this.index+1),this.list.push(e),this.list.length>t&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=this.list[this.index+1]?!0:!1,this.hasUndo=this.list[this.index-1]||this.list.length==1?!0:!1},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){h=0,p=null,e.fireEvent("contentchange")}}function l(){this.undoManger.save()}var e=this,t=e.options.maxUndoCount||20,n=e.options.maxInputCount||20,r=new RegExp(domUtils.fillChar+"|</hr>","gi"),i=/\b(?:href|src|name)="[^"]*?"/gi;s.prototype={compare:function(t){return e.collapsed!==t.collapsed?0:!u(e.startAddr,t.startAddr)||!u(e.endAddr,t.endAddr)?0:1},transformRange:function(e){var t=this;e.collapsed=t.collapsed,a(e,"start",t.startAddr),e.collapsed?e.collapse(!0):a(e,"end",t.endAddr)}},e.undoManger=new f,e.addListener("beforeexeccommand",l),e.addListener("afterexeccommand",l),e.addListener("reset",function(t,n){n||e.undoManger.reset()}),e.commands.redo=e.commands.undo={execCommand:function(t){e.undoManger[t]()},queryCommandState:function(t){return e.undoManger["has"+(t.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c={16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},h=0,p;e.addListener("keydown",function(t,r){var i=r.keyCode||r.which;if(i==229)return;if(!browser.webkit&&!c[i]&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey){if(e.undoManger.list.length==0||(i==8||i==46)&&p!=i){e.undoManger.save(!0),p=i;return}e.undoManger.list.length==2&&e.undoManger.index==0&&h==0&&(e.undoManger.list.splice(1,1),e.undoManger.update()),p=i,h++,h>=n&&e.selection.getRange().collapsed&&e.undoManger.save()}})},UE.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,n=e.selection.getRange();n.selectNodeContents(t),domUtils.isEmptyBlock(t)&&(browser.opera&&t.firstChild&&t.firstChild.nodeType==1&&n.setStartAtFirst(t.firstChild),n.collapse(!0)),n.select(!0),this.selectAll=!0},notNeedUndo:1},e.addListener("ready",function(){domUtils.on(e.document,"click",function(t){e.selectAll=!1})})},UE.plugins.keystrokes=function(){var e=this,t=0,n=domUtils.keys,r={B:"strong",I:"em",FONT:"span"},i=[0,10,12,16,18,24,32,48],s={OL:["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman"],UL:["circle","disc","square"]};e.addListener("keydown",function(n,r){var i=r.keyCode||r.which;if(this.selectAll){this.selectAll=!1;if(i==8||i==46){e.undoManger&&e.undoManger.save(),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",(new dom.Range(e.document)).setStart(e.body.firstChild,0).setCursor(!1,!0),e.undoManger&&e.undoManger.save(),browser.ie&&e._selectionChange(),domUtils.preventDefault(r);return}}if(i==8){var o=e.selection.getRange(),u,a,f;if(o.collapsed){a=o.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);if(domUtils.isEmptyNode(a)&&a===e.body.firstChild){a.tagName!="P"&&(p=e.document.createElement("p"),e.body.insertBefore(p,a),domUtils.fillNode(e.document,p),o.setStart(p,0).setCursor(!1,!0),domUtils.remove(a)),domUtils.preventDefault(r);return}}o.collapsed&&o.startContainer.nodeType==3&&o.startContainer.nodeValue.replace(new RegExp(domUtils.fillChar,"g"),"").length==0&&o.setStartBefore(o.startContainer).collapse(!0);if(a=o.getClosedNode()){e.undoManger&&e.undoManger.save(),o.setStartBefore(a),domUtils.remove(a),o.setCursor(),e.undoManger&&e.undoManger.save(),domUtils.preventDefault(r);return}if(!browser.ie){a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a&&!f||!a&&f||a!==f){r.preventDefault();return}}e.undoManger&&(o.collapsed||(e.undoManger
.save(),t=1))}if(i==9){o=e.selection.getRange(),e.undoManger&&e.undoManger.save();for(var l=0,c="",h=e.options.tabSize||4,d=e.options.tabNode||"&nbsp;";l<h;l++)c+=d;var v=e.document.createElement("span");v.innerHTML=c;if(o.collapsed){var m=domUtils.findParentByTagName(o.startContainer,"li",!0);if(m&&domUtils.isStartInblock(o)){w=o.createBookmark();var g=m.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type"));b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),g.insertBefore(y,m),y.appendChild(m),o.moveToBookmark(w).select()}else o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0)}else{a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParentByTagName(o.startContainer,["ol","ul"],!0),f=domUtils.findParentByTagName(o.endContainer,["ol","ul"],!0);if(a&&f&&a===f){var w=o.createBookmark();a=domUtils.findParentByTagName(o.startContainer,"li",!0),f=domUtils.findParentByTagName(o.endContainer,"li",!0);if(a===a.parentNode.firstChild){var E=e.document.createElement(a.parentNode.tagName);a.parentNode.parentNode.insertBefore(E,a.parentNode),E.appendChild(a.parentNode)}else{g=a.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type")),b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),a.parentNode.insertBefore(y,a);var S;while(a!==f)S=a.nextSibling,y.appendChild(a),a=S;y.appendChild(f)}o.moveToBookmark(w).select()}else{if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParent(o.startContainer,T),f=domUtils.findParent(o.endContainer,T);if(a&&f&&a===f)o.deleteContents(),o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var x=o.createBookmark(),T=function(e){return domUtils.isBlockElm(e)};o.enlarge(!0);var N=o.createBookmark(),C=domUtils.getNextDomNode(N.start,!1,T);while(C&&!(domUtils.getPosition(C,N.end)&domUtils.POSITION_FOLLOWING))C.insertBefore(v.cloneNode(!0).firstChild,C.firstChild),C=domUtils.getNextDomNode(C,!1,T);o.moveToBookmark(N).moveToBookmark(x).select()}}}e.undoManger&&e.undoManger.save(),r.preventDefault?r.preventDefault():r.returnValue=!1}if(browser.gecko&&i==46){o=e.selection.getRange();if(o.collapsed){a=o.startContainer;if(domUtils.isEmptyBlock(a)){var k=a.parentNode;while(domUtils.getChildCount(k)==1&&!domUtils.isBody(k))a=k,k=k.parentNode;a===k.lastChild&&r.preventDefault();return}}}}),e.addListener("keyup",function(s,o){var u=o.keyCode||o.which;if(!browser.gecko&&!n[u]&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){v=e.selection.getRange();if(v.collapsed){var a=v.startContainer,f=0;while(!domUtils.isBlockElm(a)){if(a.nodeType==1&&utils.indexOf(["FONT","B","I"],a.tagName)!=-1){var l=e.document.createElement(r[a.tagName]);a.tagName=="FONT"&&(l.style.cssText=(a.getAttribute("size")?"font-size:"+(i[a.getAttribute("size")]||12)+"px":"")+";"+(a.getAttribute("color")?"color:"+a.getAttribute("color"):"")+";"+(a.getAttribute("face")?"font-family:"+a.getAttribute("face"):"")+";"+a.style.cssText);while(a.firstChild)l.appendChild(a.firstChild);a.parentNode.insertBefore(l,a),domUtils.remove(a),f||v.setEnd(l,l.childNodes.length).collapse(!0),a=l,f=1}a=a.parentNode}f&&v.select()}}if(u==8){if(browser.gecko)for(var c=0,h,p=domUtils.getElementsByTagName(this.body,"li");h=p[c++];)if(domUtils.isEmptyNode(h)&&!h.previousSibling){var d=h.parentNode;domUtils.remove(h),domUtils.isEmptyNode(d)&&domUtils.remove(d)}var v,a,m,g=this.currentSelectedArr;if(g&&g.length>0){for(var c=0,y;y=g[c++];)y.innerHTML=browser.ie?browser.version<9?"&#65279":"":"<br/>";v=new dom.Range(this.document),v.setStart(g[0],0).setCursor(),t&&(e.undoManger.save(),t=0),browser.webkit&&o.preventDefault();return}v=e.selection.getRange(),a=v.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);var b=0;while(a.nodeType==1&&domUtils.isEmptyNode(a)&&dtd.$removeEmpty[a.tagName])b=1,m=a.parentNode,domUtils.remove(a),a=m;if(b&&a.nodeType==1&&domUtils.isEmptyNode(a)){if(browser.ie){var w=v.document.createElement("span");a.appendChild(w),v.setStart(a,0).setCursor(),h=domUtils.findParentByTagName(a,"li",!0);if(h){var E=h.nextSibling;while(E){if(domUtils.isEmptyBlock(E)){h=E,E=E.nextSibling,domUtils.remove(h);continue}break}}}else a.innerHTML="<br/>",v.setStart(a,0).setCursor(!1,!0);setTimeout(function(){browser.ie&&domUtils.remove(w),t&&(e.undoManger.save(),t=0)},0)}else t&&(e.undoManger.save(),t=0)}})},UE.plugins.serialize=function(){function n(e){return/pt/.test(e)?e.replace(/([\d.]+)pt/g,function(e){return Math.round(parseFloat(e)*96/72)+"px"}):e}function v(e,t){var n=[0,10,12,16,18,24,32,48],s,o=utils.indexOf;switch(e.tag){case"script":e.tag="div",e.attributes._ue_div_script=1,e.attributes._ue_script_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"style":e.tag="div",e.attributes._ue_div_style=1,e.attributes._ue_style_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"img":if(e.attributes.src&&/^data:/.test(e.attributes.src))return{type:"fragment",children:[]};if(e.attributes.src&&/^(?:file)/.test(e.attributes.src)){if(!/(gif|bmp|png|jpg|jpeg)$/.test(e.attributes.src))return{type:"fragment",children:[]};e.attributes.word_img=e.attributes.src,e.attributes.src=r.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";var u=parseInt(e.attributes.width)<128||parseInt(e.attributes.height)<43;e.attributes.style="background:url("+(u?r.options.UEDITOR_HOME_URL+"themes/default/images/word.gif":r.options.langPath+r.options.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd",t&&(t.flag=1)}browser.ie&&browser.version<7&&(e.attributes.orgSrc=e.attributes.src),e.attributes.data_ue_src=e.attributes.data_ue_src||e.attributes.src;break;case"li":var a=e.children[0];if(!a||a.type!="element"||a.tag!="p"&&dtd.p[a.tag]){var f={type:"element",tag:"p",attributes:{},parent:e};f.children=a?e.children:[browser.ie?{type:"text",data:domUtils.fillChar,parent:f}:{type:"element",tag:"br",attributes:{},closed:!0,children:[],parent:f}],e.children=[f]}break;case"table":case"td":m(e);break;case"a":e.attributes.anchorname&&(e.tag="img",e.attributes={"class":"anchorclass",anchorname:e.attributes.name},e.closed=1),e.attributes.href&&(e.attributes.data_ue_src=e.attributes.href);break;case"b":e.tag=e.name="strong";break;case"i":e.tag=e.name="em";break;case"u":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:underline;";break;case"s":case"del":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:line-through;",e.children.length==1&&(a=e.children[0],a.tag==e.tag&&(e.attributes.style+=";"+a.attributes.style,e.children=a.children));break;case"span":var l=e.attributes.style;l&&(!e.attributes.style||browser.webkit&&l=="white-space:nowrap;")&&delete e.attributes.style;if(browser.gecko&&browser.version<=10902&&e.parent){var c=e.parent;c.tag=="span"&&c.attributes&&c.attributes.style&&(e.attributes.style=c.attributes.style+";"+e.attributes.style)}utils.isEmptyObject(e.attributes)&&i&&(e.type="fragment");break;case"font":e.tag=e.name="span",s=e.attributes,e.attributes={style:(s.size?"font-size:"+(n[s.size]||12)+"px":"")+";"+(s.color?"color:"+s.color:"")+";"+(s.face?"font-family:"+s.face:"")+";"+(s.style||"")};while(e.parent.tag==e.tag&&e.parent.children.length==1)e.attributes.style&&(e.parent.attributes.style?e.parent.attributes.style+=";"+e.attributes.style:e.parent.attributes.style=e.attributes.style),e.parent.children=e.children,e=e.parent;break;case"p":e.attributes.align&&(e.attributes.style=(e.attributes.style||"")+";text-align:"+e.attributes.align+";",delete e.attributes.align)}return e}function m(t){if(e&&t.attributes.style){var n=t.attributes.style;t.attributes.style=n.replace(/;\s*/g,";"),t.attributes.style=t.attributes.style.replace(/^\s*|\s*$/,"")}}function g(t){switch(t.tag){case"div":t.attributes._ue_div_script&&(t.tag="script",t.children=[{type:"cdata",data:t.attributes._ue_script_data?decodeURIComponent(t.attributes._ue_script_data):"",parent:t}],delete t.attributes._ue_div_script,delete t.attributes._ue_script_data,delete t.attributes._ue_custom_node_),t.attributes._ue_div_style&&(t.tag="style",t.children=[{type:"cdata",data:t.attributes._ue_style_data?decodeURIComponent(t.attributes._ue_style_data):"",parent:t}],delete t.attributes._ue_div_style,delete t.attributes._ue_style_data,delete t.attributes._ue_custom_node_);break;case"table":!t.attributes.style&&delete t.attributes.style,e&&t.attributes.style&&m(t),t.attributes["class"]=="noBorderTable"&&delete t.attributes["class"];break;case"td":case"th":if(/display\s*:\s*none/i.test(t.attributes.style))return{type:"fragment",children:[]};if(e&&!t.children.length){var n={type:"text",data:domUtils.fillChar,parent:t};t.children[0]=n}e&&t.attributes.style&&m(t),t.attributes["class"]=="selectTdClass"&&delete t.attributes["class"];break;case"img":t.attributes.anchorname?(t.tag="a",t.attributes={name:t.attributes.anchorname,anchorname:1},t.closed=null):t.attributes.data_ue_src&&(t.attributes.src=t.attributes.data_ue_src,delete t.attributes.data_ue_src);break;case"a":t.attributes.data_ue_src&&(t.attributes.href=t.attributes.data_ue_src,delete t.attributes.data_ue_src)}return t}function y(e,t,n){if(!e.children||!e.children.length)return e;var r=e.children;for(var i=0;i<r.length;i++){var s=t(r[i],n);if(s.type=="fragment"){var o=[i,1];o.push.apply(o,s.children),r.splice.apply(r,o),r.length||(e={type:"fragment",children:[]}),i--}else r[i]=s}return e}function b(e){this.rules=e}var e=browser.ie,t=browser.version,r=this,i=r.options.autoClearEmptyNode,s=dtd.$empty,o=function(){function f(s,u){var a,f=0,l,c;n.exec("");while(a=n.exec(s)){var h=a.index;if(h>f){var p=s.slice(f,h);c?c.push(p):u.onText(p)}f=n.lastIndex;if(l=a[1]){l=l.toLowerCase(),c&&l==c._tag_name&&(u.onCDATA(c.join("")),c=null);if(!c){u.onTagClose(l);continue}}if(c){c.push(a[0]);continue}if(l=a[3]){if(/="/.test(l))continue;l=l.toLowerCase();var d=a[4],v,m={},g=d&&d.slice(-1)=="/";if(d){r.exec("");while(v=r.exec(d)){var y=v[1].toLowerCase(),b=v[2]||v[3]||v[4]||"";!b&&i[y]&&(b=y),y=="style"&&e&&t<=6&&(b=b.replace(/(?!;)\s*([\w-]+):/g,function(e,t){return t.toLowerCase()+":"})),b&&(m[y]=b.replace(/:\s*/g,":"))}}u.onTagOpen(l,m,g),!c&&o[l]&&(c=[],c._tag_name=l);continue}(l=a[2])&&u.onComment(l)}s.length>f&&u.onText(s.slice(f,s.length))}var n=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,r=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,i={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},o={script:1,style:1},u={li:{$:"ul",ul:1,ol:1},dd:{$:"dl",dl:1},dt:{$:"dl",dl:1},option:{$:"select",select:1},td:{$:"tr",tr:1},th:{$:"tr",tr:1},tr:{$:"tbody",tbody:1,thead:1,tfoot:1,table:1},tbody:{$:"table",table:1,colgroup:1},thead:{$:"table",table:1},tfoot:{$:"table",table:1},col:{$:"colgroup",colgroup:1}},a={table:"td",tbody:"td",thead:"td",tfoot:"td",tr:"td",colgroup:"col",ul:"li",ol:"li",dl:"dd",select:"option"};return function(e,t){function i(e){e.parent=r,r.children.push(e)}function o(e,n){var i=e;if(u[i.tag]){while(u[r.tag]&&u[r.tag][i.tag])r=r.parent;r.tag==i.tag&&(r=r.parent);while(u[i.tag]){if(u[i.tag][r.tag])break;i=i.parent={type:"element",tag:u[i.tag].$,attributes:{},children:[i]}}}if(t)while(dtd[i.tag]&&!(r.tag=="span"?utils.extend(dtd.strong,{a:1,A:1}):dtd[r.tag]||dtd.div)[i.tag]){if(l(r))continue;if(!r.parent)break;r=r.parent}return i.parent=r,r.children.push(i),n&&(r=e),e.attributes.style&&(e.attributes.style=e.attributes.style.toLowerCase()),e}function l(e){var t;return!e.children.length&&(t=a[e.tag])?(o({type:"element",tag:t,attributes:{},children:[]},!0),!0):!1}var n={type:"fragment",parent:null,children:[]},r=n;f(e,{onText:function(e){while(!(dtd[r.tag]||dtd.div)["#"]){if(l(r))continue;r=r.parent}i({type:"text",data:e})},onComment:function(e){i({type:"comment",data:e})},onCDATA:function(e){while(!(dtd[r.tag]||dtd.div)["#"]){if(l(r))continue;r=r.parent}i({type:"cdata",data:e})},onTagOpen:function(e,t,n){n=n||s[e],o({type:"element",tag:e,attributes:t,closed:n,children:[]},!n)},onTagClose:function(e){var t=r;while(t&&e!=t.tag)t=t.parent;if(t){for(var n=r;n!==t.parent;n=n.parent)l(n);r=t.parent}else!dtd.$removeEmpty[e]&&!dtd.$removeEmptyBlock[e]&&e!="embed"&&(t={type:"element",tag:e,attributes:{},children:[]},o(t,!0),l(t),r=t.parent)}});while(r!==n)l(r),r=r.parent;return n}}(),u=function(){function t(t){return e[t]}var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(e){return e+="",e?e.replace(/[<>"']/g,t):""}}(),a=function(){function e(e,t){var n=e.children,r=[];for(var i=0,s;s=n[i];i++)r.push(a(s,t));return r.join("")}function t(e){var t=[];for(var r in e){var i=e[r];r=="style"&&(i=n(i),/rgba?\s*\([^)]*\)/.test(i)&&(i=i.replace(/rgba?\s*\(([^)]*)\)/g,function(e){return utils.fixColor("color",e)})),e[r]=utils.optCss(i.replace(/windowtext/g,"#000")).replace(/white-space[^;]+;/g,"")),t.push(r+'="'+u(e[r])+'"')}return t.join(" ")}function r(e,t){return t?e.data.replace(/&nbsp;/g," "):u(e.data).replace(/ /g,"&nbsp;")}function f(n,r){if(n.type=="element"&&!n.children.length&&dtd.$removeEmpty[n.tag]&&n.tag!="a"&&utils.isEmptyObject(n.attributes)&&i)return f;var u=n.tag;if(r&&u=="td")f||(f=""),f+=e(n,r)+"&nbsp;&nbsp;&nbsp;";else{var a=t(n.attributes),f="<"+(r&&o[u]?o[u]:u)+(a?" "+a:"")+(s[u]?" />":">");s[u]||(u=="p"&&!n.children.length&&(f+=browser.ie?"&nbsp;":"<br/>"),f+=e(n,r),f+="</"+(r&&o[u]?o[u]:u)+">")}return f}var o={div:"p",li:"p",tr:"p",br:"br",p:"p"};return function(t,n){return t.type=="fragment"?e(t,n):t.type=="element"?f(t,n):t.type=="text"||t.type=="cdata"?r(t,dtd.$notTransContent[t.parent.tag]):t.type=="comment"?"<!--"+t.data+"-->":""}}(),f=function(){function e(e){var t=new RegExp(/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig);return t.test(e)}function t(e){return e=e.replace(/([\d.]+)([\w]+)?/g,function(e,t,n){return(Math.round(parseFloat(t))||1)+(n||"px")}),e}function r(e){return e=e.replace(/<!--\s*EndFragment\s*-->[\s\S]*$/,"").replace(/^(\r\n|\n|\r)|(\r\n|\n|\r)$/ig,"").replace(/^\s*(&nbsp;)+/ig,"").replace(/(&nbsp;|<br[^>]*>)+\s*$/ig,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera)return"";try{var t=e.match(/width:([ \d.]*p[tx])/i)[1],r=e.match(/height:([ \d.]*p[tx])/i)[1],i=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+n(t)+'" height="'+n(r)+'" src="'+i+'" />'}catch(s){return""}}).replace(/v:\w+=["']?[^'"]+["']?/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/(lang)\s*=\s*([\'\"]?)[\w-]+\2/ig,"").replace(/<font[^>]*>\s*<\/font>/gi,"").replace(/class\s*=\s*["']?(?:(?:MsoTableGrid)|(?:MsoListParagraph)|(?:MsoNormal(Table)?))\s*["']?/gi,""),e=e.replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,n,r,i){var s=[],o=0,u=i.replace(/^\s+|\s+$/,"").replace(/&quot;/gi,"'").split(/;\s*/g);for(var o=0;o<u.length;o++){var a=u[o],f,l,c=a.split(":");if(c.length==2){f=c[0].toLowerCase(),l=c[1].toLowerCase();switch(f){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(n)||(s[o]=f.replace(/^mso-|-alt$/g,"")+":"+t(l));continue;case"horiz-align":s[o]="text-align:"+l;continue;case"vert-align":s[o]="vertical-align:"+l;continue;case"font-color":case"mso-foreground":s[o]="color:"+l;continue;case"mso-background":case"mso-highlight":s[o]="background:"+l;continue;case"mso-default-height":s[o]="min-height:"+t(l);continue;case"mso-default-width":s[o]="min-width:"+t(l);continue;case"mso-padding-between-alt":s[o]="border-collapse:separate;border-spacing:"+t(l);continue;case"text-line-through":if(l=="single"||l=="double")s[o]="text-decoration:line-through";continue;case"mso-zero-height":l=="yes"&&(s[o]="display:none");continue;case"margin":if(!/[1-9]/.test(c[1]))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(f))continue;if(/text\-indent|padding|margin/.test(f)&&/\-[\d.]+/.test(l))continue;s[o]=f+":"+c[1]}}return o>0?n+' style="'+s.join(";")+'"':n}),e=e.replace(/([ ]+)<\/span>/ig,function(e,t){return(new Array(t.length+1)).join("&nbsp;")+"</span>"}),e}return function(t){return c=null,h="",p="",d="",e(t)&&(t=r(t)),t.replace(/>[ \t\r\n]*</g,"><")}}(),l={text:"#text",comment:"#comment",cdata:"#cdata-section",fragment:"#document-fragment"},c,h="",p="",d;b.prototype={rules:null,filter:function(e,t,n){function s(e,t){e.name=e.type=="element"?e.tag:l[e.type];if(t==null)return y(e,s,e);if(i&&i[e.name])return n&&(n.flag=1),{type:"fragment",children:[]};if(r&&e.type=="element")if(t.type=="fragment"?r[e.name]:r[e.name]&&r[t.name][e.name]){var o;if(o=r[e.name].$){var u=e.attributes,a={};for(var f in o)u[f]&&(a[f]=u[f]);e.attributes=a}}else n&&(n.flag=1),e.type="fragment",e.name=t.name;return(i||r)&&y(e,s,e),e}t=t||this.rules;var r=t&&t.whiteList,i=t&&t.blackList;return s(e,null)},transformInput:function(e,t){function n(e){return e=v(e,t),e=y(e,n,e),r.options.pageBreakTag&&e.type=="text"&&e.data.replace(/\s/g,"")==r.options.pageBreakTag&&(e.type="element",e.name=e.tag="hr",delete e.data,e.attributes={"class":"pagebreak",noshade:"noshade",size:"5",unselectable:"on",style:"moz-user-select:none;-khtml-user-select: none;"},e.children=[]),e.type=="text"&&!dtd.$notTransContent[e.parent.tag]&&(e.data=e.data.replace(/[\r\t\n]*/g,"")),e}return n(e)},transformOutput:function(e){function t(e){e.tag=="hr"&&e.attributes["class"]=="pagebreak"&&(delete e.tag,e.type="text",e.data=r.options.pageBreakTag,delete e.children),e=g(e);if(e.tag=="ol"||e.tag=="ul")c=1;e=y(e,t,e);if(e.tag=="ol"||e.tag=="ul")c=0;return e}return t(e)},toHTML:a,parseHTML:o,word:f},r.serialize=new b(r.options.serialize||{}),UE.serialize=new b({})},function(){function e(e){var t=this.document;if(t.getElementById("baidu_pastebin"))return;var n=this.selection.getRange(),r=n.createBookmark(),i=t.createElement("div");i.id="baidu_pastebin",browser.webkit&&i.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar)),t.body.appendChild(i),r.start.style.display="",i.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(r.start).y+"px",n.selectNodeContents(i).select(!0),setTimeout(function(){if(browser.webkit)for(var s=0,o=t.querySelectorAll("#baidu_pastebin"),u;u=o[s++];){if(!domUtils.isEmptyNode(u)){i=u;break}domUtils.remove(u)}try{i.parentNode.removeChild(i)}catch(a){}n.moveToBookmark(r).select(!0),e(i)},0)}UE.plugins.paste=function(){function s(e){var s;if(e.firstChild){var o=domUtils.getElementsByTagName(e,"span");for(var u=0,a;a=o[u++];)(a.id=="_baidu_cut_start"||a.id=="_baidu_cut_end")&&domUtils.remove(a);if(browser.webkit){var f=e.querySelectorAll("div br");for(var u=0,l;l=f[u++];){var c=l.parentNode;c.tagName=="DIV"&&c.childNodes.length==1&&(c.innerHTML="<p><br/></p>",domUtils.remove(c))}var h=e.querySelectorAll("#baidu_pastebin");for(var u=0,p;p=h[u++];){var d=t.document.createElement("p");p.parentNode.insertBefore(d,p);while(p.firstChild)d.appendChild(p.firstChild);domUtils.remove(p)}var v=e.querySelectorAll("meta");for(var u=0,m;m=v[u++];)domUtils.remove(m);var f=e.querySelectorAll("br");for(u=0;m=f[u++];)/^apple-/.test(m)&&domUtils.remove(m)}if(browser.gecko){var g=e.querySelectorAll("[_moz_dirty]");for(u=0;m=g[u++];)m.removeAttribute("_moz_dirty")}if(!browser.ie){var y=e.querySelectorAll("span.apple-style-span");for(var u=0,m;m=y[u++];)domUtils.remove(m,!0)}s=e.innerHTML;var b=t.serialize;if(b)try{var w=b.transformInput(b.parseHTML(b.word(s)),n);w=b.filter(w,r?{whiteList:{p:{br:1,BR:1,$:{}},br:{$:{}},div:{br:1,BR:1,$:{}},li:{$:{}},tr:{td:1,$:{}},td:{$:{}}},blackList:{style:1,script:1,object:1}}:null,r?null:i);if(browser.webkit){var E=w.children.length,S;while((S=w.children[E-1])&&S.tag=="br")w.children.splice(E-1,1),E=w.children.length}s=b.toHTML(w,r)}catch(x){}s={html:s},t.fireEvent("beforepaste",s),t.execCommand("insertHtml",s.html,!0),t.fireEvent("afterpaste")}}var t=this,n={flag:""},r=t.options.pasteplain===!0,i={flag:""};t.commands.pasteplain={queryCommandState:function(){return r},execCommand:function(){r=!r|0},notNeedUndo:1},t.addListener("ready",function(){domUtils.on(t.body,"cut",function(){var e=t.selection.getRange();!e.collapsed&&t.undoManger&&t.undoManger.save()}),domUtils.on(t.body,browser.ie||browser.opera?"keydown":"paste",function(n){if(!(!browser.ie&&!browser.opera||!!n.ctrlKey&&n.keyCode=="86"))return;e.call(t,function(e){s(e)})})})}}(),UE.plugins.fiximgclick=function(){var e=this;browser.webkit&&e.addListener("click",function(t,n){if(n.target.tagName=="IMG"){var r=new dom.Range(e.document);r.selectNode(n.target).select()}})},UE.plugins.enterkey=function(){var e,t=this,n=t.options.enterTag;t.addListener("keyup",function(n,r){var i=r.keyCode||r.which;if(i==13){var s=t.selection.getRange(),o=s.startContainer,u;if(!browser.ie){if(/h\d/i.test(e)){if(browser.gecko){var a=domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote"],!0);a||(t.document.execCommand("formatBlock",!1,"<p>"),u=1)}else if(o.nodeType==1){var f=t.document.createTextNode(""),l;s.insertNode(f),l=domUtils.findParentByTagName(f,"div",!0);if(l){var c=t.document.createElement("p");while(l.firstChild)c.appendChild(l.firstChild);l.parentNode.insertBefore(c,l),domUtils.remove(l),s.setStartBefore(f).setCursor(),u=1}domUtils.remove(f)}t.undoManger&&u&&t.undoManger.save()}browser.opera&&s.select()}setTimeout(function(){t.selection.getRange().scrollToView(t.autoHeightEnabled,t.autoHeightEnabled?domUtils.getXY(t.iframe).y:0)},50)}}),t.addListener("keydown",function(r,i){var s=i.keyCode||i.which;if(s==13){t.undoManger&&t.undoManger.save(),e="";var o=t.selection.getRange();if(!o.collapsed){var u=o.startContainer,a=o.endContainer,f=domUtils.findParentByTagName(u,"td",!0),l=domUtils.findParentByTagName(a,"td",!0);if(f&&l&&f!==l||!f&&l||f&&!l){i.preventDefault?i.preventDefault():i.returnValue=!1;return}}t.currentSelectedArr&&domUtils.clearSelectedArr(t.currentSelectedArr);if(n=="p")browser.ie||(u=domUtils.findParentByTagName(o.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote"],!0),!u&&!browser.opera?(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(o=t.selection.getRange(),u=domUtils.findParentByTagName(o.startContainer,"p",!0),u&&domUtils.removeDirtyAttr(u))):(e=u.tagName,u.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(u)));else{i.preventDefault?i.preventDefault():i.returnValue=!1;if(!o.collapsed){o.deleteContents(),u=o.startContainer;if(u.nodeType==1&&(u=u.childNodes[o.startOffset])){while(u.nodeType==1){if(dtd.$empty[u.tagName])return o.setStartBefore(u).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!u.firstChild){var c=o.document.createElement("br");return u.appendChild(c),o.setStart(u,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}u=u.firstChild}u===o.startContainer.childNodes[o.startOffset]?(c=o.document.createElement("br"),o.insertNode(c).setCursor()):o.setStart(u,0).setCursor()}else c=o.document.createElement("br"),o.insertNode(c).setStartAfter(c).setCursor()}else{c=o.document.createElement("br"),o.insertNode(c);var h=c.parentNode;h.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),o.setStartBefore(c)):o.setStartAfter(c),o.setCursor()}}}})},UE.commands["delete"]={execCommand:function(){var e=this.selection.getRange(),t=0,n=0,r=this;if(this.selectAll){r.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).setCursor(!1,!0),r.selectAll=!1;return}if(r.currentSelectedArr&&r.currentSelectedArr.length>0){for(var i=0,s;s=r.currentSelectedArr[i++];)s.style.display!="none"&&(s.innerHTML=browser.ie?domUtils.fillChar:"<br/>");e.setStart(r.currentSelectedArr[0],0).setCursor();return}if(e.collapsed)return;e.txtToElmBoundary();while(!e.startOffset&&!domUtils.isBody(e.startContainer)&&!dtd.$tableContent[e.startContainer.tagName])t=1,e.setStartBefore(e.startContainer);while(e.endContainer.nodeType!=3&&!domUtils.isBody(e.endContainer)&&!dtd.$tableContent[e.endContainer.tagName]){var o,u=e.endContainer,a=e.endOffset;o=u.childNodes[a];if(!o||domUtils.isBr(o)&&u.lastChild===o){e.setEndAfter(u);continue}break}if(t){var f=r.document.createElement("span");f.innerHTML="start",f.id="_baidu_cut_start",e.insertNode(f).setStartBefore(f)}if(n){var l=r.document.createElement("span");l.innerHTML="end",l.id="_baidu_cut_end",e.cloneRange().collapse(!1).insertNode(l),e.setEndAfter(l)}e.deleteContents(),domUtils.isBody(e.startContainer)&&domUtils.isEmptyBlock(r.body)?(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).collapse(!0)):!browser.ie&&domUtils.isEmptyBlock(e.startContainer)&&(e.startContainer.innerHTML="<br/>"),e.select(!0)},queryCommandState:function(){return this.currentSelectedArr&&this.currentSelectedArr.length>0?0:this.highlight||this.selection.getRange().collapsed?-1:0}},UE.commands.inserthtml={execCommand:function(e,t,n){var r=this,i,s,o=r.currentSelectedArr;i=r.selection.getRange(),s=i.document.createElement("div"),s.style.display="inline";var u=r.serialize;if(!n&&u){var a=u.parseHTML(t);a=u.transformInput(a),a=u.filter(a),t=u.toHTML(a)}s.innerHTML=utils.trim(t);try{r.adjustTable&&r.adjustTable(s)}catch(f){}if(o&&o.length){for(var l=0,c;c=o[l++];)c.className="";o[0].innerHTML="",i.setStart(o[0],0).collapse(!0),r.currentSelectedArr=[]}if(!i.collapsed){i.deleteContents();if(i.startContainer.nodeType==1){var h=i.startContainer.childNodes[i.startOffset],p;if(h&&domUtils.isBlockElm(h)&&(p=h.previousSibling)&&domUtils.isBlockElm(p)){i.setEnd(p,p.childNodes.length).collapse();while(h.firstChild)p.appendChild(h.firstChild);domUtils.remove(h)}}}var h,d,p,v,m=0,g=s.firstChild;while(h=s.firstChild){i.insertNode(h);if(!m&&h.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(h)){d=domUtils.findParent(h,function(e){return domUtils.isBlockElm(e)});if(d&&d.tagName.toLowerCase()!="body"&&(!dtd[d.tagName][h.nodeName]||h.parentNode!==d)){if(!dtd[d.tagName][h.nodeName])p=d;else{v=h.parentNode;while(v!==d)p=v,v=v.parentNode}domUtils.breakParent(h,p||v);var p=h.previousSibling;domUtils.trimWhiteTextNode(p),p.childNodes.length||domUtils.remove(p),!browser.ie&&(y=h.nextSibling)&&domUtils.isBlockElm(y)&&y.lastChild&&!domUtils.isBr(y.lastChild)&&y.appendChild(r.document.createElement("br")),m=1}}var y=h.nextSibling;if(!s.firstChild&&y&&domUtils.isBlockElm(y)){i.setStart(y,0).collapse(!0);break}i.setEndAfter(h).collapse()}return h=i.startContainer,domUtils.isBlockElm(h)&&domUtils.isEmptyNode(h)&&(h.innerHTML=browser.ie?"":"<br/>"),i.select(!0),setTimeout(function(){i=r.selection.getRange(),i.scrollToView(r.autoHeightEnabled,r.autoHeightEnabled?domUtils.getXY(r.iframe).y:0)},200),g}},UE.plugins.autoheight=function(){function a(t){edge?e.document.body.style.overflowY="auto":(clearTimeout(o),o=setTimeout(function(){e.queryCommandState("source")!=1&&(n||(n=e.document.createElement("span"),n.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;",n.innerHTML="."),r=n.cloneNode(!0),e.body.appendChild(r),s=Math.max(domUtils.getXY(r).y+r.offsetHeight,e.options.minFrameHeight),u>0&&s>u?(e.body.style.overflowY="",e.setHeight(u),i=u,e.autoHeightEnabled=!1):(e.document.body.style.overflowY="hidden",s!=i&&(e.setHeight(s),i=s),e.autoHeightEnabled=!0),domUtils.remove(r))},50))}var e=this;e.autoHeightEnabled=e.options.autoHeightEnabled!==!1;if(!e.autoHeightEnabled)return;var t,n,r,i=0,s,o,u=e.options.autoHeightMax||0;e.adjustHeight=a,e.addListener("destroy",function(){e.removeListener("contentchange",a),e.removeListener("keyup",a),e.removeListener("mouseup",a)}),e.enableAutoHeight=function(){if(!e.autoHeightEnabled)return;var n=e.document;e.autoHeightEnabled=!0,t=n.body.style.overflowY,n.body.style.overflowY="hidden",e.addListener("contentchange",a),e.addListener("keyup",a),e.addListener("mouseup",a),setTimeout(function(){a()},browser.gecko?100:0),e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.disableAutoHeight=function(){e.body.style.overflowY=t||"",e.removeListener("contentchange",a),e.removeListener("keyup",a),e.removeListener("mouseup",a),e.autoHeightEnabled=!1,e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.addListener("ready",function(){e.enableAutoHeight();var t;domUtils.on(browser.ie?e.body:e.document,browser.webkit?"dragover":"drop",function(){clearTimeout(t),t=setTimeout(function(){a()},100)})})},UE.I18N["zh-cn"]={labelMap:{},insertorderedlist:{},insertunorderedlist:{},paragraph:{},fontfamily:{},customstyle:{},elementPathTip:"\u5143\u7d20\u8def\u5f84",wordCountTip:"\u5b57\u6570\u7edf\u8ba1",wordCountMsg:"\u5f53\u524d\u5df2\u8f93\u5165{#count}\u4e2a\u5b57\u7b26, \u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165{#leave}\u4e2a\u5b57\u7b26\u3002 ",wordOverFlowMsg:'<span style="color:red;">\u60a8\u5df2\u7ecf\u8d85\u8fc7\u6700\u5927\u5b57\u7b26!</span>',ok:"\u786e\u8ba4",cancel:"\u53d6\u6d88",closeDialog:"\u5173\u95ed\u5bf9\u8bdd\u6846",confirmClear:"\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6587\u6863\u4e48\uff1f",anthorMsg:"\u94fe\u63a5",clearColor:"\u6e05\u7a7a\u989c\u8272",standardColor:"\u6807\u51c6\u989c\u8272",themeColor:"\u4e3b\u9898\u989c\u8272",property:"\u5c5e\u6027","default":"\u9ed8\u8ba4",modify:"\u4fee\u6539",justifyleft:"\u5de6\u5bf9\u9f50",justifyright:"\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justify:"\u9ed8\u8ba4",clear:"\u6e05\u9664",anchorMsg:"\u951a\u70b9","delete":"\u5220\u9664",clickToUpload:"\u70b9\u51fb\u4e0a\u4f20",unset:"\u5c1a\u672a\u8bbe\u7f6e\u8bed\u8a00\u6587\u4ef6",t_row:"\u884c",t_col:"\u5217",more:"\u66f4\u591a"},$.extend(namespace("Wenda.Editor"),function(){function r(t){function a(e,t){var n=e.replace(/\s+/g,"");/^[\u4E00-\u9FA5]+$/.test(n)||(/(q|Q).{0,5}\d{5}/.test(n)||/[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+/.test(n)||/(\u624b\u673a|\u7535\u8bdd).{0,5}\d{10}/.test(n))&&t&&t()}function f(){window.FormData?($(".add-img-html5").show(),$(".add-img").hide(),Wenda.FileUpload.makeHtml5(o)):($(".add-img-html5").hide(),$(".add-img").show(),Wenda.FileUpload.makeFlash(o))}function l(){s.sync();var e=new RegExp("[\r	\n]","g"),t=s.getContentTxt().replace(e,"");return t}function c(){s.sync();var e=s.getContent();return e}function h(e){s.setContent(e,!0)}function p(){var e=c();return!e||e==o.hintText.replace("<br/>","")?($(r).triggerHandler("checkempty"),!0):!1}function d(){var e=l();return e.length>o.max?!0:!1}function v(){var e=p(),t=d();return e||t?!1:Wenda.FileUpload.checkLoadingImg(s)?!0:!1}function m(){$(i.body).focus()}function g(){s.destroy(),~(window.FormData||"").toString().indexOf("native code")&&o.input.off("change")}var r={},i=null,s=null,o=$.extend(!0,{},n,t||{});if(!o.container.length)return!1;var u=$.extend(!0,{},o.editor_opt,{initialContent:o.hintText,onFocusfun:function(){$(r).triggerHandler("focus")},onBlurfun:function(){$(r).triggerHandler("blur")}}),s=new UE.ui.Editor(u);return s.ready(function(){i=s.iframe.contentWindow.document,$(i).on("keydown",function(e){o.container.find(".js-form-error").hide(),e.ctrlKey&&e.keyCode==13&&(e.stopPropagation(),e.preventDefault(),$(r).triggerHandler("ctrlenter"))}),$(r).triggerHandler("ready")}),s.render(o.id),o.fileUpload&&f(),r.is_limit=d,r.is_empty=p,r.getContentTxt=l,r.getContent=c,r.setContent=h,r.focus=m,r.verify=v,r.shineError=m,r.editor=s,r.opt=o,r.destroy=g,e[r.opt.id]=r,r}function i(t){return e[t]}var e={},t,n={id:"editor",container:null,hintText:"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u56de\u7b54\uff0c\u51c6\u786e\u3001\u8be6\u5b9e\u7684\u56de\u7b54\u624d\u80fd\u771f\u6b63\u5e2e\u52a9\u5230\u7f51\u53cb\u54e6~",unloadText:"\u60a8\u5df2\u7ecf\u5bf9\u51c6\u5907\u63d0\u4ea4\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u4fee\u6539.",input:$("#upload"),max:1e4,fileUpload:!0,fileUploadSucc:function(){},fileUploadOpt:{},editor_opt:{}};return{create:r,get:i}}()),$.ObjectH.mix(namespace("Wenda.Captcha"),function(){function s(e){return e.find
(".js-captcha-input")}function o(e,t){n=!0,r=e.find(".js-captcha-error"),i=e.find(".js-captcha-input"),i.on("keyup",function(){var e=$(this);if($.trim(e.val())===""){f("empty");return}if($.trim(e.val()).length<4)return;t&&t()})}function u(i,o){i.find(".captcha").show(),c(i,o),o&&s(i).focus(),t||(t=!0,$(document).delegate(".js-captcha-input","keydown",function(t){n&&r&&r.hide(),t.keyCode==13&&(t.stopPropagation(),t.preventDefault(),$(e.event).triggerHandler("keyenter",[$(this)]))}),$(document).delegate(".js-captcha-btn","click",function(e){e.preventDefault(),c($(this).parents(),!0)}))}function a(e){t&&(e.find(".captcha").show(),c(e,!0))}function f(e){if(n){if(i&&i.val()===""){r&&r.html(r.data("empty")).show();return}r.data(e)&&r&&r.html(r.data(e)).show()}}function l(e){var r=s(e);return t&&!r.val()?(e.find(".captcha").show(),c(e,!0),r.focus(),n&&f("empty"),!1):!0}function c(e,t){var n="http://captcha."+Wenda.Info.root_domain;e.find("img.js-captcha-btn").attr("src",n+"/image.php?app=wenda&"+Math.random());var r=e.find(".js-captcha-input");r.val(""),t&&r.is(":visible")&&r.focus()}function h(e){return s(e).val().trim().stripTags()}var e={},t=!1,n=!1,r=null,i=null;return e.val=h,e.need=u,e.check=a,e.verify=l,e.change=c,e.initErrorTip=o,e.showErrorTip=f,e.event={},e}()),$.ObjectH.mix(namespace("Wenda.Cate"),function(){function r(e,t){if(n[t]==undefined){var r=[];e.forEach(function(e){t==e.pid&&r.push("<option value="+e.cid+" title="+e.name+">"+e.name+"</option>")}),n[t]=r.join("")}return n[t]}function i(e,n){t?n&&n():$.ajax(e).done(function(e){t=e.data,n&&n()})}function s(e){function o(){$("select[level]",e.node).on("change",function(){f($(this))}),i(e.port_opts,function(){l(e.level,e.pid),e.defaultData&&u(typeof e.defaultData[0]=="object"?e.defaultData[0]:e.defaultData),$(n).triggerHandler("ready")})}function u(t){t.forEach(function(t,n){var r=c(n+Number(e.level));r.val(t),f(r)})}function a(){var t={};return t.value=[],t.title=[],$("select[level]",e.node).each(function(n,r){r=$(this);var i=r.val()||"";if(i==""||i=="-1")return e.level==2||e.level==3?!0:!1;var s=$('option[value="'+i+'"]',r).attr("title");return t.value.push(i),t.title.push(s),!0}),t}function f(t){var r=t.attr("to_level"),i=t.val();e.showIndex.length>1&&e.showIndex.contains(r)?l(r,i):$(n).trigger("change")}function l(i,s){if(!i||!s){$(n).triggerHandler("change");return}var o=r(t[i],s),u=c(i);if(!e.alwaysShow&&!o){u.html("").hide(),i=="2"&&c("3").html("").hide(),$(n).triggerHandler("change");return}var a=e.defaultText[Number(i)-1];a&&(o='<option selected="true" value="-1">'+a+"</option>"+o),u.html(o),e.showIndex.contains(i)&&u.show(),f(u)}function c(t){return $("select[level="+t+"]",e.node)}var n={},s={node:"",defaultData:[573],defaultText:["","\u4e0d\u9009","\u4e0d\u9009"],showIndex:["1","2","3"],alwaysShow:!1,port_opts:{url:"/category/getallcates/",type:"post",data:""},level:"1",pid:"0"},e=$.extend({},s,e);return e.node.length?(o(),n.setData=u,n.getData=a,n):!1}function o(e){for(var n=1;n<4;n++){var r=t[n];for(var i=r.length;i--;)if(r[i].cid==e)return r[i].name}}var e={},t=null,n={};return e.bind=s,e.getTitle=o,e}()),$.ObjectH.mix(namespace("Wenda.Ask.Panel"),function(){var e=Wenda.Panel,t='<div class="{$className}"><strong>{$msg}</strong><div id="{$id}"><select size="{$num}" class="class-table" level="1" to_level="2" style="display:none;"></select><select size="{$num}" class="class-table" level="2" to_level="3" style="display:none;"></select><select size="{$num}" class="class-table class-table-last" level="3" style="display:none;"></select></div></div>',n={cateSelect:function(n,r,i,s){n=n||"\u4e3a\u60a8\u7684\u95ee\u9898\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u5206\u7c7b\uff1a";var o={skin:"panel-01",fixed:!0,width:488,content:t.tmpl({id:"category-pannel",className:"select-bd",msg:n,num:16}),header:"<h3>\u8bf7\u9009\u62e9\u5206\u7c7b</h3>",footer:'<div class="confirm-btn"><span class="btn btn-2"><button>\u786e\u5b9a</button></span></div><div class="clear"></div>'},u=e.create(o),a={node:$("#category-pannel")},f=Wenda.Cate.bind($.ObjectH.mix(a,r));return u.showModal(),$("."+o.skin).find(".confirm-btn").click(function(){i&&$.isFunction(i)&&(u.close(),i(f.getData()))}),s&&$.isFunction(s)?u.onclose=s:s&&s=="remove"&&(u.onclose=function(){u.remove()}),u.cateComp=f,u},cateSelectFloat:function(e){function o(){e.node.toggle()}var n={},r={id:"category-float-pannel",node:"",className:"classify-bd",msg:"",num:10};e=$.ObjectH.mix(e,r);if(!e.node.length)return!1;var i=t.tmpl(e);e.node.hide().html(i);var s=Wenda.Cate.bind({node:$("#"+e.id),defaultText:e.defaultText,defaultData:[e.defaultData],port_opts:e.port_opts,level:e.level,pid:e.pid,alwaysShow:e.alwaysShow,showIndex:e.showIndex});return e.alwaysShow?e.node.off("mouseleave"):e.node.on("mouseleave",function(t){e.node.hide()}),n.cateComp=s,n.toggle=o,n},safeCate:function(e){var t='<div class="{$className}"><strong>{$msg}</strong><div id="{$id}"><select size="{$num}" class="class-table l1" level="1" to_level="2" style="display:none;"></select><select size="{$num}" class="class-table l2" level="2" style="display:none;"></select><select size="{$num}" class="class-table l3" level="3" style="display:none;"></select></div></div>',n={id:"category-float-pannel",node:"",className:"classify-bd",msg:"",num:16},r={};e=$.ObjectH.mix(e,n);if(!e.node.length)return!1;var i=t.tmpl(e);e.node.html(i);var s=Wenda.Cate.bind({node:$("#"+e.id),defaultData:[1]});return r.cateComp=s,r},nologinAsk:function(){var t='<div class="log-item" id="nologin_btn" data-index="1"><div class="nolog-btn"></div><div class="log-guide">\u76f4\u63a5\u63d0\u95ee</div><div class="log-tips">\u65e0\u9700\u767b\u5f55\uff0c\u4e00\u952e\u63d0\u95ee</div><div class="log-tips-ask">( \u53ea\u80fd\u4f7f\u7528\u4e24\u6b21\u54e6~ )</div></div><div class="log-item" id="login_btn" data-index="2"><div class="qh-btn"></div><div class="log-guide">360\u5e10\u53f7\u767b\u5f55</div><div class="log-tips">\u66f4\u591a\u529f\u80fd\u3001\u5feb\u901f\u901a\u77e5</div></div><div id="log-item-bg" class="log-item-bg"></div>',n=e.create({width:300,fixed:!0,content:t,header:"<h3>\u8bf7\u9009\u62e9\u63d0\u95ee\u7684\u65b9\u5f0f</h3>",backdropOpacity:.2,skin:"panel-dialog panel-nologin-ask"});return n.onready=function(){$(this.node).delegate(".log-item","mouseenter",function(e){e.preventDefault();var t=$(this).attr("data-index");$("#log-item-bg").stop().animate({opacity:1,top:Number($(this).position().top)+1+"px"},150)})},n.showModal(),n},anonyNick:function(){var t='<div class="bd"><p class="desc">\u4eb2\uff0c\u4e3a\u4e86\u8ba9\u793e\u533a\u7684\u5c0f\u4f19\u4f34\u4eec\u8ba4\u8bc6\u60a8\uff0c\u8bf7\u8bbe\u7f6e\u6635\u79f0\uff1a</p><p><input type="text" class="text" id="nick_value" maxlength="5" value="\u95ee\u7b54\u6e38\u5ba2"><a id="nick_submit" href="javascript:;" class="btn btn-2-m"><span>\u63d0\u4ea4</span></a></p><p style="color: #ccc;">\u6635\u79f0\u4e0d\u8981\u8d85\u8fc75\u4e2a\u82f1\u6587\u5355\u8bcd\u6216\u80055\u4e2a\u4e2d\u6587\u5b57\u5466</p></div>',n=e.create({width:400,fixed:!0,cancel:function(){return!1},content:t,header:"\u9996\u6b21\u76f4\u63a5\u63d0\u95ee\u8bbe\u7f6e",footer:"",backdropOpacity:.2,skin:"panel panel-dialog panel-nick"});return n.onready=function(){this._$("close").hide()},n}};return n}()),$(document).ready(function(){function i(e,t,n){window.location.href="/home/ask?qid="+encodeURIComponent(e||"")+"&q="+encodeURIComponent(t||"")+"&ask_code="+encodeURIComponent(n||"")}function s(t,n){var r={defaultText:["","\u4e0d\u9009","\u4e0d\u9009"],alwaysShow:!1,autoShow:!1,defaultData:[],showIndex:["1","2","3"],level:"1",pid:"0",isAutoCate:!0,type:"default",port_opts:{url:"/category/getallcates/",type:"post",data:""}};if(n&&n.length>0){t.qid>0?Wenda.Asklayer.getAskLayerHtml(t.qid,t.text,r,n,o,"ASSIGN_DAREN"):Wenda.Asklayer.getAskLayerHtml(t.cid,t.text,r,n,o);return}if(!t.isEnterpriseService)return i(t.qid,t.text,t.ask_code),!1;$.ajax({url:"/other/geteusercates",type:"get",data:{qid:e.qid},success:function(e){var n=[];$.each(e.data,function(e,t){n.push(e.toString())});if(n.length>0){var r=n[0],s=e.data[r][0].pid.toString(),o={defaultText:["","",""],alwaysShow:!0,autoShow:!0,defaultData:[],showIndex:n,level:r,pid:s,isAutoCate:!1,type:"enterprise",port_opts:{url:"/category/getallcates/",type:"post",data:""}};i(t.qid,t.text,t.ask_code)}}})}function o(e){window.location="/q/"+e.data.ask_id}var e=window.location.search.queryUrl(),t=e.ref,n=$("#home_ask");if(n&&n.length>0){var r=e.qid;r>0?s({qid:r,text:window.location.search.queryUrl("q")||""},"#home_ask"):s({text:window.location.search.queryUrl("q")||""},"#home_ask"),$(".js-ask-layer").click(function(e){return $("#layer_ask_title").focus(),!1}),!Wenda.User.hasLogin()&&(~~e.src==4||~~e.src==6)&&$("#layer-submit").on("mouseenter",function(){$(".js-nologin-tip").show()}).on("mouseleave",function(){$(".js-nologin-tip").hide()});return}$(document).on("click",".js-ask-layer",function(e){e.preventDefault();var t=$("#aside_ask_con").val()||$("#js-sh-ipt").val();s({text:t,ask_code:"1000101"})}).on("click",".js-ask-daren",function(e){e.preventDefault();var t=$(this).attr("qid"),n=$(".js-sh-ipt").val()||$("#aside_ask_con").val(),r=$(this).data("ask-code");s({qid:t,text:n,ask_code:r})}).on("click",".js-ask",function(e){e.preventDefault(),s({text:$(".js-ask-input").val()})}),Wenda.Log.sendClose&&Wenda.Log.sendClose()}),$.ObjectH.mix(namespace("Wenda.Asklayer"),function(){function h(){return $((l?l:".panel-ask-layer")+" .ask-box")}function p(e,t){s||Wenda.Net.connect("asklayer",null,function(n){s=Wenda.Panel.create({width:938,fixed:!0,content:n,backdropOpacity:.4,skin:"panel-ask-layer"}),E(),S(),f=t,$("#layer-submit").on("click",function(){Wenda.Log.send("","\u63d0\u95ee\u6d6e\u5c42-\u63d0\u4ea4\u95ee\u9898"),A()}),s.onshow=function(){$("#layer_ask_title").focus()},s.onclose=function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u63d0\u95ee\u6d6e\u5c42-\u5173\u95ed"),window.monitorDclickName=""},e&&e()})}function d(e,t,n){x(n);var r=h(),i="\u63d0\u51fa\u60a8\u7684\u95ee\u9898\uff0c<span>5\u5206\u949f</span>\u5c31\u6709\u89e3\u7b54";$("#layer_to_qid").val(""),$(r).find(".mod-ask .tit").find(".title").html(i),t&&$(r).find(".mod-ask .ipt").find("#layer_ask_title").val(t).trigger("keyup"),y(e),s.showModal(),Wenda.Log.send("asklayer","common-ask-layer")}function v(e,t,n){x(n);var r=h(),i=$("#layer_to_qid").val();t&&$(r).find(".mod-ask .ipt").find("#layer_ask_title").val(t).trigger("keyup"),e!=i&&b(e,function(e){var t="\u5411<span>"+e+"</span>\u63d0\u95ee\uff1a";$(r).find(".mod-ask .tit").find(".title").html(t)}),s.showModal(),$(".panel-ask-layer #layer_to_qid").val(e),Wenda.Log.send("asklayer","daren-ask-layer")}function m(e,t,n){x(n);var r=h(),i=$("#layer_to_qid").val();t&&$(r).find(".mod-ask .ipt").find("#layer_ask_title").val(t).trigger("keyup"),e!=i&&b(e,function(e){var t="\u5411<span>"+e+"</span>\u63d0\u95ee\uff1a";$(r).find(".mod-ask .tit").find(".title").html(t)}),$("#layer_to_qid").val(e),Wenda.Log.send("asklayer","daren-ask-layer")}function g(e,t,n){x(n);var r=$(".panel-ask-layer"),i=$("#layer_to_qid");e!==i.val()&&w(e,function(e){r.find(".title").html("\u5411<span>"+e+"</span>\u63d0\u95ee\uff1a")}),i.val(e),s.showModal(),Wenda.Log.send("asklayer","\u4f01\u4e1a\u5ba2\u670d")}function y(e){var t=h(),n=$(t).find("#layer_to_qid").val();e=typeof e=="undefined"?0:e,n==""&&$.get("/other/getAskRecommendUser?cid="+e,function(n){var r=n.data.recom_users||n.data.users,i=[],s=e==0||e==""?'<p>\u5f53\u524d\u5728\u7ebf\u7684<span class="org-txt">'+n.data.online_num+"</span>\u4f4d\u70ed\u5fc3\u7f51\u53cb</p>":'<p><span class="org-txt">'+n.data.g_at_cnt+'</span>\u4f4d\u64c5\u957f<span class="org-txt">'+n.data.cate_name+"</span>\u9886\u57df\u7684\u70ed\u5fc3\u7f51\u53cb</p>";if(!r)return;var o='<div class="mod-user daren-user"><div class="user-title"><span class="gr-bar"></span>\u60a8\u7684\u95ee\u9898\u5c06\u4f1a\u53d1\u7ed9\u4ed6\u4eec</div><div class="user-desc">'+s+"</div>"+'<div class="daren-list">'+"<ul>";r.forEach(function(e){var t=e.nickName?e.nickName:e.userName,n='<li class="pic-item"><div class="pic"><a text="uc-by-header" target="_blank" href="/u/'+e.qid+'">'+'<img src="'+e.imageUrl+'" alt="">'+'<p title="'+t+'">'+$.StringH.subByte(t,10,"\u2026")+"</p>"+"</a>"+"</div>"+"</li>";i.push(n)}),o=o+i.join("")+"</ul>"+"</div>"+'<div class="online-drec">'+'<p>\u4eca\u65e5\u5df2\u6709<span class="org-txt">'+n.data.today_help_cnt+"</span>\u4f4d\u7f51\u53cb\u5f97\u5230\u4e86\u5e2e\u52a9</p>"+"</div>"+"</div>",$(t).find(".mod-user").remove().end().append(o)})}function b(e,t){var n=h();$.get("/other/getUserCard?qid="+e,function(e){var r=e.data,i=[],s=r.nickName?r.nickName:r.userName,o=r.eid;if(!r)return;t&&t(s),r.g_at_cates==""&&(i=["TA\u8fd8\u6ca1\u6709\u8bbe\u7f6e\u8fc7\u64c5\u957f\u9886\u57df"]),r.g_at_cates.forEach(function(e){i.push(e.name)});var u='<div class="mod-user assign-user"><div class="assign-daren-pic"><a text="uc-by-header" target="_blank" href="'+(o?"/e/"+o:"/u/"+r.qid)+'">'+'<img src="'+r.imageUrl+'" alt="">'+"</a>"+"</div>"+(o?'<img class="gov" src="http://p2.qhmsg.com/t0168271ffbb1238e80.png" alt="" />':"")+'<p class="user-name">'+'<a target="_blank" class="js-user-name" text="userinfo-name" href="'+(o?"/e/"+o:"/u/"+r.qid)+'">'+s+"</a>"+(o?"":'&nbsp;&nbsp;<a href="/other/help#7_2" target="_blank" title="\u7b49\u7ea7'+r.current_level+'" class="ico-lv ico-lv-'+r.current_level+'">&nbsp;</a>')+"</p>"+(o?"":'<p class="good-at"><span class="g-at-icon"></span>'+i.join("\u3001")+"</p>")+'<div class="status">'+"<table>"+"<tr>"+"<th>\u56de\u7b54\u6570</th>"+"<th>\u91c7\u7eb3\u7387</th>"+'<th class="last">\u5e2e\u52a9\u4eba\u6570</th>'+"</tr>"+"<tr>"+'<td><a target="_blank" href="'+(o?"/e/"+o:"/u/an/"+r.qid)+'" class="org-txt">'+r.answer+"</a></td>"+'<td><a target="_blank" href="/other/help#10_1" class="org-txt">'+r.adoption+"%</a></td>"+'<td class="last"><a target="_blank" href="'+(o?"/e/"+o:"/u/"+r.qid)+'" class="org-txt">'+r.rev_count+"</a></td>"+"</tr>"+"</table>"+"</div>"+"</div>";$(n).find(".mod-user").remove().end().append(u)})}function w(e,t){var n=$(".panel-ask-layer"),r=n.find(".ask-box"),i={name:"enterpriseInfo",opts:{url:"/other/getUserCard",method:"get"}};Wenda.Net.add(i.name,i.opts),Wenda.Net.connect(i.name,{qid:e},function(n){n=n.data;var i=n.nickName?n.nickName:n.userName,s='<div class="mod-user enterprise-user"><div class="content"><p class="logo"><a target="_blank" href="/u/{$qid}"><img src="{$logo}" alt="{$title}" /></a></p><h3><a target="_blank" href="/u/{$qid}">{$title}</a></h3><table><tr><th>\u5df2\u56de\u7b54</th><th class="last">\u5e2e\u52a9\u7528\u6237</th></tr><tr><td class="org-txt">{$ansNum}</td><td class="last org-txt">{$helpNum}</td></tr></table></div><p class="tip">\u6e29\u99a8\u63d0\u793a\uff1a\u7531\u4e8e\u63d0\u95ee\u6570\u91cf\u8f83\u591a\uff0c\u5ba2\u670d\u4eba\u6570\u6709\u9650\uff0c\u5982\u679c\u60a8\u7684\u95ee\u98981\u5c0f\u65f6\u5185\u6ca1\u6709\u56de\u5e94\uff0c\u6211\u4eec\u4f1a\u63a8\u7ed9360\u7f51\u53cb\u8fdb\u884c\u89e3\u7b54\u3002</p></div>';t&&t(i),r.find(".mod-user").remove().end().append(s.tmpl({qid:e,logo:n.imageUrl,title:i,ansNum:n.answer,helpNum:n.rev_count}))})}function E(){function o(){e.unloop("ask-check"),n.css({color:"rgb(51, 51, 51)"}),r.addClass("focus"),e.loop("ask-check",200,a)}function u(){r.removeClass("focus"),e.unloop("ask-check")}function a(){var e=n.val().byteLen();e!=s&&(s=e,f())}function f(){var e="#ffffff",r="\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165<em>"+Math.floor((t-s)/2)+"</em>\u4e2a\u5b57";s>t&&(e="#ffc9c9",r='\u60a8\u5df2\u7ecf\u8d85\u8fc7<em class="font-caution">'+Math.ceil((s-t)/2)+"</em>\u5b57"),n.css({background:e,color:"#333"}),i.html(r),Math.floor(s/2)<30&&i.html(" ")}var e=Wenda.Timer,t=100,n=$("#layer_ask_title"),r=n.parent("div"),i=$("#layer_inputlimitnum"),s;n.on("focus",o).on("blur",u)}function S(){var e=$("#layer_editform"),t=$("#layer-submit"),n={id:"layer_editor",container:e,hintText:"\u5728\u8fd9\u91cc\u8865\u5145\u95ee\u9898\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8be6\u7ec6\u5168\u9762\u7684\u95ee\u9898\u5f80\u5f80\u6709\u52a9\u4e8e\u5176\u4ed6\u7f51\u53cb\u63d0\u4f9b\u4e13\u4e1a\u7684\u89e3\u7b54\u3002",unloadCheck:function(){return!1},input:$("#layer_upload"),upload_file_type:/image\/(?:gif|jpg|jpeg|png|gif|x-icon|vnd\.microsoft\.icon|bmp)/i,button_placeholder_id:"layerUploadButton",max:1e4,fileUpload:!0,fileUploadSucc:function(){},editor_opt:{wordCount:!1,maximumWords:3e4,minFrameHeight:113,autoHeightEnabled:!1,focus:!1,initialStyle:'body{margin:0;padding:2px 4px;font:14px "\u5fae\u8f6f\u96c5\u9ed1","\u5b8b\u4f53";cursor:text;line-height:22px;}'},fileUploadOpt:{button_image_url:"http://p5.qhmsg.com/t01c5f2d0213fac734b.png",button_width:"51"}};w_editor=Wenda.Editor.create(n),Wenda.Info.is_nonlogin_ask==1&&a.need(e,!1),w_editor&&$(w_editor).on("focus",function(){e.find(".mod-editor").addClass("focus")}).on("blur",function(){e.find(".mod-editor").removeClass("focus")}).on("ctrlenter",function(){t.trigger("click")}).on("checkempty",function(){T(e,"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u56de\u7b54\uff0c\u63d0\u95ee\u4eba\u671f\u5f85\u60a8\u66f4\u8be6\u7ec6\u7684\u89e3\u7b54\u54e6\uff01")}).on("checklimit",function(){T(e,"\u6700\u591a\u53ef\u4ee5\u8f93\u51651.5\u4e07\u5b57\uff0c\u4f60\u8f93\u5165\u7684\u5185\u5bb9\u8fc7\u957f\uff01")})}function x(e){function E(){s=undefined,v.off("click"),f.off("keyup"),f.on("keyup",function(e){u.hide(),P()}).blur(),v.on("click",k),b.type=="enterprise"?(o.find(".add-pay").hide().end().find(".q-cate").append('<span data-tips="'+b.type+'-tips">\uff08\u5206\u7c7b\u9009\u62e9\u5f97\u8d8a\u51c6\u786e\u8d8a\u6709\u52a9\u4e8e\u5ba2\u670d\u89e3\u7b54\u60a8\u7684\u95ee\u9898\uff09</span>'),p.hide()):o.find(".add-pay").show().end().find(".q-cate").find("span[data-tips]").remove(),b.autoShow&&v.trigger("click"),b.alwaysShow?(v.off("click",k),h.css("cursor","default"),$("#layer_cat_btn2").hide()):(h.css("cursor","pointer"),$("#layer_cat_btn2").show(),$(".mod-ask-cate").hide())}function S(){var e=n.indexOf(b.type);e!=-1?N(t[e].value[t[e].value.length-1],t[e].title):b.autoShow||D()}function x(){s||(s=Wenda.Ask.Panel.cateSelectFloat(b),$(s.cateComp).on("change",function(){var e=s.cateComp.getData();T(e),N(e.value[e.value.length-1],e.title),_()}),$(s.cateComp).trigger("change"),$(s.cateComp).on("ready",function(){i&&s.cateComp.setData(i)}))}function T(e){var r=b.type;if(n.contains(r)){var i=n.indexOf(r);t[i]=e}else t.push(e),n.push(r)}function N(e,t){h.html(t.length>0?C(t):"<b>\u8bf7\u9009\u62e9\u95ee\u9898\u5206\u7c7b</b>"),e&&y(e)}function C(e){var t="";return e.forEach(function(n,r){r==e.length-1?t+="<b>"+n+"</b>":t+=n+"&nbsp>&nbsp"}),t}function k(e){e.preventDefault(),b.isAutoCate=!1,d.hide(),x(),s.toggle()}function L(e){$.get("/engine/getCate?title="+encodeURIComponent(e),function(t){var n=t.data,r=n.tags,s=[],o=[];M();if(r&&r.length){$.each(r,function(e,t){s.push(t),o.push('<span class="item">'+t+'<a href="###" data-key="'+t+'" class="remove">x</a></span>')}),l.show().find(".add").show().before(o.join("")),$("#js-tags-ipt,#js-tags-ipt-auto").val(r.join(",")),$(".weiboV").show();var u={selector:{checkbox:".js-weibocheck",vlist:".js-vlist"},tags:s.join("&gt;"),ask_title:e};Wenda.Auth.showWeiboDaren(u)}n.name?(N(n.cid,$.ObjectH.values(n.cate_names)),_(),i=$.ObjectH.keys(n.cate_names),T({value:$.ObjectH.keys(n.cate_names),title:$.ObjectH.values(n.cate_names)})):(h.html(""),D(),i=null)})}function A(){b.isAutoCate&&(L(f.val().trim()),V(f.val()))}function O(){b.isAutoCate&&D()}function M(){l.hide().find(".item").remove(),l.find(".add").hide(),$("#js-tags-ipt").val(""),$(".js-vlist").html("")}function _(){p.hide(),c.show()}function D(){p.show(),c.hide()}function P(){g&&clearTimeout(g);var e=f.val().trim();if(e.byteLen()>100||e.byteLen()<=8||e==m){O(),M();return}g=setTimeout(A,1e3)}var r={node:$(".mod-ask-cate"),isAutoCate:!0,autoShow:!1,type:"default"},i,s,o=$(".panel-ask-layer"),u=$("#layer-js-askerror"),a=$("#layer-submit"),f=$("#layer_ask_title"),l=$("#js-tags-list"),c=$("#layer_cat_list"),h=$("#layer_cat_list_items"),p=$("#layer_cat_btn"),d=$(".mod-ask .cate-tips"),v=$("#layer_cat_btn,#layer_cat_btn2,#layer_cat_list_items"),m="\u8bf7\u5728\u8fd9\u91cc\u7b80\u8981\u63cf\u8ff0\u60a8\u7684\u95ee\u9898",g,b=$.extend({},r,e),w=n.indexOf(b.type);w!=-1&&(b.defaultData=t[w].value),E(),S()}function T(e,t){var n=e.find(".js-form-error");n.html(t),n.stop(!0,!0).show().fadeOut(1e4)}function L(){var e=$("#layer_editform"),t={urlName:"sendByFormWithToken",param:e,errnoDeal:{0:function(e){P(e)},107:function(e){P(e)},101:function(){return T(e,"\u4eb2\uff0c\u8bf7\u7b49\u5f85\u81ea\u52a8\u5206\u7c7b\u5b8c\u6210\u54e6~\u60a8\u4e5f\u53ef\u4ee5\u624b\u52a8\u9009\u62e9\u5206\u7c7b"),!1},20:l?U:D,21:function(){Wenda.User.checkLogin(function(){k.trigger("click")})},110:function(){return!l||a.showErrorTip("wrong"),a.need(e,!0),!1},"default":function(t){return T(e,t.errmsg),!1},"finally":function(t){var n=t.errno;n!=0&&n!=107&&n!=-110&&n!=-20&&n!=-21&&a.check(e)}}};O(),Wenda.Net.connect(t.urlName,t.param,null,t.errnoDeal)}function A(){M(w_editor)&&_()}function O(){c.IE()&&($("#mid").val(wdextcmd.GetMid()),Cookie.set("__WD_FIRST_SELFASK",1,{path:"/",expires:6e4})),c.SE()&&($("#mid").val(external.GetMID(external.GetSID(window))),Cookie.set("__WD_FIRST_SELFASK",1,{path:"/",expires:6e4}))}function M(e){var t=$("#layer_ask_title"),n=$("#layer_editform"),r="\u8bf7\u5728\u8fd9\u91cc\u7b80\u8981\u63cf\u8ff0\u60a8\u7684\u95ee\u9898",i=Math.ceil(t.val().trim().byteLen()/2),s={min:"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u95ee\u9898\uff0c\u95ee\u9898\u63cf\u8ff0\u7684\u8d8a\u6e05\u695a\uff0c\u8d8a\u80fd\u6536\u5230\u66f4\u597d\u7684\u7b54\u6848\u54e6!",max:"\u4eb2\uff0c\u8bf7\u5b8c\u5584\u60a8\u7684\u95ee\u9898\uff0c\u95ee\u9898\u63cf\u8ff0\u7684\u8d8a\u6e05\u695a\uff0c\u8d8a\u80fd\u6536\u5230\u66f4\u597d\u7684\u7b54\u6848\u54e6!",moremax:"\u4eb2\uff0c\u60a8\u7684\u63d0\u95ee\u8d85\u8fc7\u4e86\u957f\u57ce\u7684\u957f\u5ea6\uff0c\u8bf7\u7cbe\u7b80\u60a8\u7684\u63d0\u95ee\u54e6\uff01",moremax_descript:'\u4eb2\uff0c"\u8865\u5145\u8bf4\u660e"\u4e0d\u80fd\u8d85\u8fc710000\u4e2a\u5b57\uff0c\u8bf7\u7cbe\u7b80\u60a8\u7684\u63d0\u95ee'};return i<=4||t.val()==r?(T(n,s.min),t.focus(),!1):i>50?(T(n,s.moremax),!1):Wenda.FileUpload.checkLoadingImg(e)?e.is_limit()?(T(n,s.moremax_descript),!1):a.verify(n)?!0:!1:!1}function _(){var e=$("#layer_editform"),t=$("#layer_ask_title").val();if(Wenda.Info.is_nonlogin_ask==1&&!Wenda.Info.qid){if(Cookie.get("WDNNICK")){e.attr("action","/nonLogin/ask"),F(t);return}var n=Wenda.Ask.Panel.nologinAsk(),r=Wenda.Ask.Panel.anonyNick();r.onremove=function(){var r=$("#nick_value").val()||"\u95ee\u7b54\u6e38\u5ba2",i='<div class="user-item" style="top:2px;right:20px;"><a href="/nonLogin/myasklist"><img width="32" height="32" style="border-radius:50%;" src="http://u1.qhmsg.com/qhimg/quc/48_48/22/02/55/220255dq9816.3eceac.jpg"></a></div><div class="user-item" id="nonLogin_item"><a href="/nonLogin/myasklist">'+r+"</a>"+"</div>"+'<div class="user-item">'+'<span class="hd-tools-sep">|</span><a href="#" class="user-login" text="topbar-login">\u767b\u5f55</a>'+"</div>";$("#wdnnick").val(r),$("#js-not-login").find(".user-item").hide().end().prepend(i),n.remove(),e.attr("action","/nonLogin/ask"),F(t)},$("#nologin_btn").click(function(e){e.preventDefault(),n.close(),r.showModal(),$("#nick_submit").click(function(){r.remove()})}),$("#login_btn").click(function(e){e.preventDefault(),n.close(),logPrefix="",Wenda.User.checkLogin(function(e){F(t)})});return}Wenda.User.checkLogin(function(n){e.attr("action","/submit/ask"),F(t)})}function D(){Wenda.Panel.confirm({status:"auditing special-login",msg:"<span>\u5f88\u62b1\u6b49\uff0c\u60a8\u76842\u6b21\u4e0d\u767b\u5f55\u63d0\u95ee\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\uff0c</span><span>\u767b\u5f55\u540e\u53ef\u83b7\u5f97\u66f4\u591a\u63d0\u95ee\u673a\u4f1a</span>",yesBtnText:"\u767b\u9646",noBtnText:"\u53d6\u6d88",yesFun:function(){Wenda.Log.send("","\u7f51\u9875\u4e0d\u767b\u5f55\u63d0\u95ee\u5f39\u7a97\u7acb\u5373\u767b\u5f55\u70b9\u51fb"),Wenda.User.checkLogin(function(){Wenda.Info.is_nonlogin_ask="",$("#layer-submit").trigger("click")})}}),Wenda.Log.send("","\u7f51\u9875\u4e0d\u767b\u5f55\u63d0\u95ee\u5f39\u7a97\u5c55\u73b0")}function P(e){if(Wenda.Info.is_nonlogin_ask==1&&!Wenda.Info.qid){var t=new Date;t.setTime(t.getTime()+31536e6),R("WDNASK",e.data.wdnask_id,t.toGMTString())}H(e),B(e),l?Wenda.Log.send("","\u63d0\u95ee\u9875-\u63d0\u95ee\u6210\u529f"):Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u63d0\u95ee\u6d6e\u5c42-\u63d0\u95ee\u6210\u529f");if($('.js-weibocheck[type="checkbox"]').is(":checked")){var n={ask_title:$("#layer_ask_title").val(),ask_id:e.data.ask_id};Wenda.Auth.getWeiboAuth(n)}}function H(e){c.IE()&&wdextcmd.CallQandAExpert("/askid="+e.data.ask_id);if(c.SE())try{}catch(t){return!1}}function B(e){var t='<div class="process"><div class="pro-info"><div class="pro-num"><span class="num">0</span>%</div><div class="msg"><p class="pro-txt">\u6b63\u5728\u5bf9\u60a8\u7684\u95ee\u9898\u8fdb\u884c\u8bed\u4e49\u5206\u6790</p><p class="pro-gold">\u53ca\u65f6\u91c7\u7eb3\u6ee1\u610f\u7b54\u6848\uff0c\u8fd8\u6709<span class="reward "><i class="i-gold"></i>2\u91d1\u5e01</span>\u7684\u5956\u52b1\u54e6~</p></div></div><div class="pro-bar"><div class="green-bar"></div><span class="analyze"></span><span class="invite" style="display:none"></span><span class="success" style="display:none"></span></div></div>';o=Wenda.Panel.create({width:612,fixed:!0,cancel:function(){return!1},footer:"",content:t,backdropOpacity:.2,skin:"panel-ask-process"}),o.onready=function(){this._$("close").hide()},o.onshow=function(){if($(".panel-ask-layer #layer_to_qid").val())Wenda.Log.send("asklayer","daren-ask-success"),Wenda.ReferEnum.sendLog("ask",Wenda.ReferEnum.getAskCode($(".panel-ask-layer #layer_to_qid").val()));else{Wenda.Log.send("asklayer","common-ask-success"),Wenda.ReferEnum.sendLog("ask",Wenda.ReferEnum.getAskCode());var t=window.location.href.queryUrl("ref"),n={datail2:"<\u7f51\u9875\u8be6\u60c5\u9875><\u5e95\u90e8\u63d0\u95ee\u6d6e\u5c42>",wenda_search:"<\u7f51\u9875\u641c\u7d22\u7ed3\u679c\u9875><\u6211\u8981\u63d0\u95ee\u6309\u94ae>",search:"<\u7f51\u9875\u641c\u7d22\u7ed3\u679c\u9875><\u5e95\u90e8\u63d0\u95ee\u6d6e\u5c42>",wenda_searchnone:"<\u7f51\u9875\u641c\u7d22\u7ed3\u679c\u9875><\u65e0\u641c\u7d22\u5185\u5bb9\u63d0\u95ee\u6309\u94ae>"};window.monitorDclickName||t&&$.ObjectH.map(n,function(e,n,r){t==n&&(window.monitorDclickName=e)}),window.monitorDclickName&&(Wenda.Info.is_nonlogin_ask==1&&!Wenda.Info.qid&&Wenda.Log.send(window.monitorDclickName+"<\u4e0d\u767b\u5f55><\u63d0\u95ee\u6210\u529f>"),Wenda.Info.is_nonlogin_ask!=1&&Wenda.Info.qid&&Wenda.Log.send(window.monitorDclickName+"<\u767b\u5f55><\u63d0\u95ee\u6210\u529f>"),window.monitorDclickName="")}j(e)},o.showModal()}function j(e){function r(){n=setTimeout(function(){var i=Number($(".process .green-bar").css("width").slice(0,-2)),u=Number(i+5);t++,$(".process .pro-num .num").html(t),$(".process .green-bar").css({width:u+"px"}),t>0&&t<50?r():t==50?$(".pro-bar .analyze").fadeOut(100,function(){$(".pro-bar .invite").fadeIn(100,function(){$(".process .pro-txt").html("\u6b63\u5728\u9080\u8bf7\u64c5\u957f\u6b64\u7c7b\u95ee\u9898\u7684\u7f51\u53cb..."),r()})}):t>50&&t<100?r():t==100&&$(".pro-bar .invite").fadeOut(100,function(){$(".pro-bar .success").fadeIn(100,function(){$(".process .pro-txt").html("\u60a8\u7684\u95ee\u9898\u5df2\u7ecf\u63d0\u4ea4\u6210\u529f"),clearTimeout(n),setTimeout(function(){o.remove(),s&&s.close(),f&&f(e)},100)})})},40)}var t=0,n=0;r()}function F(e){r?L():i||(i=!0,$.ajax({url:"/engine/askIntercept",method:"get",data:"time="+(new Date).getTime()+"&title="+encodeURIComponent(e)}).done(function(e){e.baike||e.wenda?I(e):(i=!1,L())}).fail(function(e){i=!1}))}function I(e){var t='<div class="recommend" id="ask-recommend"><div class="hd"><div class="cafe-icon">\u4e3a\u60a8\u63a8\u8350\u7c7b\u4f3c\u5df2\u89e3\u51b3\u7684\u95ee\u9898</div><div class="bar" style="display:none;"></div></div><div class="bd"><p class="tips">\u4ee5\u4e0b\u56de\u7b54\u53ef\u80fd\u5e2e\u52a9\u5230\u60a8</p><div class="content"><ul class="js-recommend-list"></ul></div></div><div class="ft"><a href="###" text="\u7f51\u9875\u63d0\u95ee\u62e6\u622a\u9875\u95ee\u9898\u5df2\u89e3\u51b3\u70b9\u51fb" class="resovled-btn js-resolved">\u95ee\u9898\u5df2\u89e3\u51b3\uff0c\u5173\u95ed\u63d0\u95ee</a><a href="###" text="\u7f51\u9875\u63d0\u95ee\u62e6\u622a\u9875\u7ee7\u7eed\u63d0\u4ea4\u70b9\u51fb" class="go-on-btn js-go-on">\u7ee7\u7eed\u63d0\u4ea4</a></div></div>';u=Wenda.Panel.create({width:832,fixed:!0,cancel:function(){return!1},content:t,backdropOpacity:.4,skin:"panel-recommend-ans",footer:""}),u.onready=function(){this._$("close").hide()},u.onclose=function(){i=!1,$("#coin").show(),u.remove()},u.onshow=function(){$("#coin").hide(),Wenda.Log.send("ask-recommend","\u7f51\u9875\u63d0\u95ee\u62e6\u622a\u9875\u89e6\u53d1\u6b21\u6570"),$(".js-recommend-unfold").on("click",function(e){e.preventDefault(),$(this).find(".triangle").hasClass("up")?$(this).find(".txt").text(" \u5c55\u5f00").end().find(".triangle").removeClass("up"):$(this).find(".txt").text(" \u6536\u8d77").end().find(".triangle").addClass("up");var t=$(this).parent(".detail").prev(".js-desc-wrap"),n=t.find(".js-recommend-desc"),r="70px",i=n[0].getBoundingClientRect().bottom-n[0].getBoundingClientRect().top+"px",s=t.css("height"),o=s==i?r:i;t.animate({height:o},300)})},q(e),u.showModal(),setTimeout(function(){i=!1},3e3),$(".js-resolved").on("click",function(){u.close().remove(),s.close(),$.ajax({url:"/engine/isIntercepted",type:"GET",data:{title:$("#layer_ask_title").val()}})}),$(".js-go-on").on("click",function(){r=!0,u.close().remove(),$("#record-query").val(1),L()})}function q(e,t){var n="",r="",i="",s="";t=$.extend({baike:"\u63d0\u95ee\u62e6\u622a\u7ed3\u679c\u767e\u79d1\u7b2c1\u6761",wenda:"\u63d0\u95ee\u62e6\u622a\u7ed3\u679c\u95ee\u7b54\u7b2c"},t),e.baike&&(e.wenda||(r='style="border:0;"'),e.baike.summary.length<168&&(i='style="display:none;"',s='style="height:auto;"'),n+='<li class="baike" '+r+">"+'<div class="title">'+'<a href="'+e.baike.link+'" text="'+t.baike+'" target="_blank" class="js-link"><span class="name">'+e.baike.title+'</span><span class="src">&nbsp;360\u767e\u79d1</span></a>'+'<span><i class="arrow"></i><span class="tag">\u767e\u79d1\u63a8\u8350</span></span>'+"</div>"+'<div class="desc-warp js-desc-wrap" '+s+'><p class="desc js-recommend-desc">'+e.baike.summary+"</p></div>"+'<div class="detail">'+'<a href="http://baike.'+Wenda.Info.root_domain+'" target="_blank" class="title">360\u767e\u79d1 - baike.'+Wenda.Info.root_domain+"</a>"+'<a hidefocus href="###" class="txt js-recommend-unfold" '+i+'><span class="txt">&nbsp;\u5c55\u5f00</span>&nbsp;<i class="triangle"></i></a>'+"</div>"+"</li>");if(e.wenda)for(var o=0;o<e.wenda.length;o++)o==e.wenda.length-1&&(r='style="border:0"'),e.wenda[o].answer.length<168&&(i='style="display:none;"',s='style="height:auto;"'),n+='<li class="wenda" '+r+">"+'<div class="title">'+'<a href="'+e.wenda[o].link+'" text="'+t.wenda+""+(o+1)+'\u6761" target="_blank"><span class="name">'+e.wenda[o].title+"</span></a>"+'<span><i class="arrow"></i><span class="tag">\u95ee\u7b54\u63a8\u8350</span></span>'+"</div>"+'<div class="desc-warp js-desc-wrap" '+s+'><p class="desc js-recommend-desc">'+e.wenda[o].answer+'&nbsp;<a href="'+e.wenda[o].link+'" target="_blank" style="color:#547ed4;text-decoration: underline;">\u66f4\u591a</a>'+"</p></div>"+'<div class="detail">'+"\u63d0\u95ee\u65f6\u95f4\uff1a"+'<span class="time">'+e.wenda[o].create_time+"</span>"+'<a hidefocus href="###" class="txt js-recommend-unfold" '+i+'><span class="txt">&nbsp;\u5c55\u5f00</span>&nbsp;<i class="triangle"></i></a>'+"</div>"+"</li>";$("#ask-recommend").find(".js-recommend-list").html(n)}function R(e,t,n){document.cookie=e+"="+t+";expires="+n+";path=/;domain=."+Wenda.Info.root_domain+""}function U(){Wenda.User.checkLogin(function(){Wenda.Info.is_nonlogin_ask="",$("#layer-submit").trigger("click")})}function z(){var e=$("#layer_editform"),t=$("#layer_ask_title").val();if(Wenda.Info.is_nonlogin_ask==1&&!Wenda.Info.qid){if(Cookie.get("WDNNICK")){e.attr("action","/nonLogin/ask"),L();return}e.attr("action","/nonLogin/ask");var n=$("#nick_value").val()||"\u95ee\u7b54\u6e38\u5ba2",r='<div class="user-item" style="top:2px;right:20px;"><a href="/nonLogin/myasklist"><img width="32" height="32" style="border-radius:50%;" src="http://u1.qhmsg.com/qhimg/quc/48_48/22/02/55/220255dq9816.3eceac.jpg"></a></div><div class="user-item" id="nonLogin_item"><a href="/nonLogin/myasklist">'+n+"</a>"+"</div>"+'<div class="user-item">'+'<span class="hd-tools-sep">|</span><a href="#" class="user-login" text="topbar-login">\u767b\u5f55</a>'+"</div>"
;$("#wdnnick").val(n),$("#js-not-login").find(".user-item").hide().end().prepend(r),L();return}Wenda.User.checkLogin(function(t){$("#layer-submit").removeClass("bt-no-login"),e.attr("action","/submit/ask"),L()})}function W(){M(w_editor)&&z()}function X(e,t,n,r,i,s){l=r;var o='			<div class="recommend" id="ask-recommend" style="display:none;">				<div class="hd">					<div class="cafe-icon">\u4e3a\u60a8\u63a8\u8350\u7c7b\u4f3c\u5df2\u89e3\u51b3\u7684\u95ee\u9898</div><p class="tips">\u4ee5\u4e0b\u56de\u7b54\u53ef\u80fd\u5e2e\u52a9\u5230\u60a8</p><div class="bar" style="display:none;"></div>				</div>				<div class="bd">					<div class="content">						<ul class="js-recommend-list"></ul>					</div>				</div>			</div>';$(r).find(".mod-ask").append(o),x(n),E(),Wenda.User.hasLogin()||$("#coin").prop("disabled",!0),t.length>0&&V(t),setTimeout(function(){S()},100),$("#layer-submit").on("click",function(){Wenda.User.hasLogin()?Wenda.Log.send("","\u63d0\u95ee\u9875-\u63d0\u4ea4\u95ee\u9898-\u5df2\u767b\u9646"):Wenda.Log.send("","\u63d0\u95ee\u9875-\u63d0\u4ea4\u95ee\u9898-\u672a\u767b\u9646"),W()}),a.initErrorTip($("#layer_editform"),function(){$("#layer-submit").trigger("click")}),s==="ASSIGN_DAREN"?m(e,t,n):y(e,r),f=i}function V(e){i||(i=!0,$.ajax({url:"/engine/askIntercept",method:"get",data:"time="+(new Date).getTime()+"&title="+encodeURIComponent(e)}).done(function(e){e.baike||e.wenda?(J(e),$("#ask-recommend").show(),i=!1):($("#ask-recommend").hide(),i=!1)}).fail(function(e){i=!1}))}function J(e){Wenda.Log.send("ask-recommend","\u63d0\u95ee\u9875-\u76f8\u4f3c\u95ee\u9898-\u89e6\u53d1\u6b21\u6570"),q(e,{baike:"\u63d0\u95ee\u9875-\u76f8\u4f3c\u95ee\u9898-\u7ed3\u679c\u767e\u79d1\u7b2c1\u6761",wenda:"\u63d0\u95ee\u9875-\u76f8\u4f3c\u95ee\u9898-\u95ee\u7b54\u7b2c"}),$(".js-recommend-unfold").on("click",function(e){e.preventDefault(),$(this).find(".triangle").hasClass("up")?$(this).find(".txt").text(" \u5c55\u5f00").end().find(".triangle").removeClass("up"):$(this).find(".txt").text(" \u6536\u8d77").end().find(".triangle").addClass("up");var t=$(this).parent(".detail").prev(".js-desc-wrap"),n=t.find(".js-recommend-desc"),r="70px",i=n[0].getBoundingClientRect().bottom-n[0].getBoundingClientRect().top+"px",s=t.css("height"),o=s==i?r:i;t.animate({height:o},300)})}var e={},t=[],n=[],r=!1,i=!1,s=null,o=null,u=null,a=Wenda.Captcha,f=null,l="",c={IE:function(){try{return wdextcmd.GetMid&&wdextcmd.CallQandAExpert}catch(e){return!1}},SE:function(){try{return external.GetMID(external.GetSID(window))}catch(e){return!1}}},N=$("#layer_editform"),C=$("#layer_ask_title"),k=$("#layer-submit");return function(){var e="#js-tags-list",t="#js-tags-ipt",n,r=function(){return $(t).val()},i=function(){var n=[];$(".items a[data-key]",e).each(function(){n.push($(this).attr("data-key"))}),$(t).val(n.join(","))};$(document).on("click",e+" .remove",function(){return $(this).parents(".items").find(".add").css({display:"block",visibility:"visible"}),$(this).parent().remove(),i(),!1}).on("keyup",e+" .js-tag-search",function(){var t=$(".js-tag-search",e).val().trim();if(t=="")return $(".result",e).css({display:"none",visibility:"hidden"}).html(""),!1;n&&clearTimeout(n),n=setTimeout(function(){Wenda.Net.connect("getTag",{title:t},function(t){var n=[],i=r().split(",");t.errno==0&&t.data.tags&&t.data.tags.length>0&&$.each(t.data.tags,function(e,r){$.ArrayH.contains(i,r)||n.push("<li><a "+(e==t.data.tags.length-1?' class="no-border"':"")+' href="javascript:;">'+r+"</a></li>")}),n.length==0&&n.push("<li><span>\u6682\u65e0\u6b64\u6807\u7b7e</span></li>"),$(".result",e).html(n.join("")).css({display:"block",visibility:"visible"})})},300)}).on("click",e+" .result a",function(){var t=$(this),n=t.html(),s=t.parents(".add"),o=t.parents(".result");return s.before('<span class="item">'+n+'<a href="###" data-key="'+n+'" class="remove">x</a></span>'),i(),$(".js-tag-search",e).val("").focus(),r().split(",").length==4&&($(e+" .js-tag-search").val(""),s.css({display:"none",visibility:"hidden"}).find(".result").css({display:"none",visibility:"hidden"}).html("")),t.parent().remove(),$("li",o).length==0&&o.css({display:"none",visibility:"hidden"}),!1})}(),e.createAsklayerPanel=p,e.getAssignDaren=b,e.showOnlineDarens=d,e.showAssignDaren=v,e.showEnterpriseService=g,e.getMID=c,e.getAskLayerHtml=X,e}()),$.ObjectH.mix(namespace("Wenda.Tag"),function(){function u(){var e=$.Deferred();return s==="team_tag_setting"||s=="create_team_tag_setting"?Wenda.Net.connect("getSetTeamTagPage",{},function(t){e.resolve(t)}):Wenda.Net.connect("getSetTagPage",{},function(t){e.resolve(t)}),e}function f(){var e=$(this).parents(".user-tag");$(this).parent().fadeOut(function(){$(".tags",e).append("<li></li>"),$(this).remove()}),e.find(".a-submit").removeClass("a-disabled"),delete o[$(this).parent().attr("data-tag")],o.length--,o.length==0&&$(".a-submit",e).addClass("a-disabled")}function l(){var e=$(".mod-set-tag"),t=$(".user-search .a-submit",e),n=$(this).html();if($(this).hasClass("active"))$(this).removeClass("active"),o[n]&&o[n]==2&&(delete o[n],o.length--),$(".user-search .tags .active",e).length==0&&t.addClass("a-disabled");else{if(!o[n]){if(o.length>10)return Wenda.Panel.steam({msg:"\u5174\u8da3\u6807\u7b7e\u5df2\u6ee1\uff0c\u5220\u51cf\u540e\u53ef\u7ee7\u7eed\u6dfb\u52a0",width:""}),!1;o[n]=2,o.length++}$(this).addClass("active"),t.removeClass("a-disabled")}}function c(e){Wenda.User.checkLogin(function(){var n=[];for(var r in o)r!="length"&&n.push(r);var i=n;if(s=="create_team_tag_setting"){t.close(),$.isFunction(Wenda.Tag.afterSubmit)&&Wenda.Tag.afterSubmit(i);return}var u=s==="team_tag_setting"?"setTeamTag":"setTag",a={tags:n.join(",")};Wenda.Net.connect(u,a,function(n){if(e)return e(),!1;t.close(),n.errno==0?(s||Wenda.Panel.steam(),$.isFunction(Wenda.Tag.afterSubmit)?Wenda.Tag.afterSubmit(i):setTimeout(function(){location.reload()},1e3)):Wenda.Panel.steam({msg:n.errmsg})}),Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u6807\u7b7e\u6d6e\u5c42-\u8bbe\u7f6e\u6210\u529f")})}function h(){var e=$(this);return s=e.data("opt"),Wenda.User.checkLogin(function(){i="",u().done(function(e){if(n)return;n=!0,t=Wenda.Panel.create({fixed:!0,skin:"mod-tag-pc",content:e,backdropOpacity:.4,footer:"",onready:function(){var e=this;$.isFunction(Wenda.Tag.onready)&&Wenda.Tag.onready(e),s&&s==="team_join_tag_setting"&&Wenda.Log.send("\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u6d4f\u89c8\u91cf")},onclose:function(){Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u6807\u7b7e\u6d6e\u5c42-\u5173\u95ed"),n=!1,r&&($.isFunction(Wenda.Tag.afterSubmit)?Wenda.Tag.afterSubmit():setTimeout(function(){location.reload()},1e3)),r=!1,this.remove()}}).showModal();if(s&&s==="team_join_tag_setting"){var i=$(".mod-set-tag");nextBtn=$(".user-tag .a-submit",i),$(".hd h3",i).html("1\u3001\u586b\u5199\u4f60\u611f\u5174\u8da3\u7684\u6807\u7b7e\uff0c\u4e3a\u4f60\u63a8\u8350\u56e2\u961f<em>\u6700\u591a\u53ef\u6dfb\u52a030\u4e2a\u5174\u8da3</em>"),nextBtn.text("\u4e0b\u4e00\u6b65").attr("text","\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u3010\u4e0b\u4e00\u6b65-\u6309\u94ae\u3011\u70b9\u51fb\u91cf"),$(".tags li.active",i).length&&nextBtn.removeClass("a-disabled"),$(".panel span.close").click(function(){Wenda.Log.send("\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u3010\u5173\u95ed\u3011\u70b9\u51fb\u91cf")})}$(".mod-set-tag .user-tag .tags .active").each(function(e){var t=$(this);o[t.attr("data-tag")]=1,o.length=e+1})})}),!1}var e={beforeSubmit:function(){return!0},show:h},t,n=!1,r=!1,i="",s="",o={length:0},a=function(){var e=$(".mod-set-tag"),t=$(".js-tag-input",e).val().trim(),n=[];t!=""&&t!=i&&(e.find(".user-tag").hide().end().find(".user-search").show(),Wenda.Net.connect("getTag",{title:t},function(t){t.errno==0?t.data.tags&&t.data.tags.length>0?($.each(t.data.tags,function(e,t){n.push('<a href="javascript:;">'+t+"</a>")}),$(".user-search .box",e).show(),$(".user-search .tags",e).hide().html(n.join("")).fadeIn(),$(".user-search .empty",e).hide()):($(".user-search .box",e).hide(),$(".user-search .empty",e).show()):t.errno=="-1007"&&(i="",$(".user-search .box",e).hide(),$(".user-search .empty",e).hide())}),i=t,Wenda.Log.send("","\u7f51\u9875\u4e2a\u4eba\u641c\u7d22\u6807\u7b7e\u6309\u94ae"),s&&s==="team_join_tag_setting"&&Wenda.Log.send("\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u3010\u641c\u7d22\u5174\u8da3-\u6309\u94ae\u3011\u70b9\u51fb\u91cf"))};return $(document).on("click",".js-set-tag",h).on("blur",".mod-set-tag .js-tag-input",function(){$(this).parent().removeClass("active")}).on("keyup",".mod-set-tag .js-tag-input",function(e){e.keyCode==13&&$(".mod-set-tag .js-tag-search").trigger("click")}).on("click",".mod-set-tag .js-tag-search",a).on("click",".mod-set-tag .user-tag .tags .remove",f).on("click",".mod-set-tag .user-tag .a-submit",function(){if($(this).hasClass("a-disabled"))return!1;if(o.length==0)return Wenda.Panel.steam({msg:"\u60a8\u8fd8\u672a\u6210\u529f\u8bbe\u7f6e\u4e00\u4e2a\u5174\u8da3\u54e6~",width:450}),!1;c()}).on("click",".mod-set-tag .user-tag .a-cancel",function(){var e=!0;for(var n in o)if(n!="length"&&o[n]==1){e=!1;break}e?Wenda.Panel.steam({msg:"\u60a8\u8fd8\u672a\u6210\u529f\u8bbe\u7f6e\u4e00\u4e2a\u5174\u8da3\u54e6~",width:450}):(r&&($.isFunction(Wenda.Tag.afterSubmit)?Wenda.Tag.afterSubmit():setTimeout(function(){location.reload()},1e3)),Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u6807\u7b7e\u6d6e\u5c42-\u5173\u95ed"),t.close(),s&&s==="team_join_tag_setting"&&Wenda.Log.send("\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u3010\u9000\u51fa-\u6309\u94ae\u3011\u70b9\u51fb\u91cf"))}).on("click",".mod-set-tag .user-search .tags a",l).on("click",".mod-set-tag .user-search .a-submit",function(){var e=$(".mod-set-tag");if($(this).hasClass("a-disabled"))return!1;c(function(){$(".user-tag .a-submit",e).removeClass("a-disabled"),Wenda.Panel.steam();for(var t in o)t!="length"&&o[t]==2&&($(".user-tag .tags li",e).eq($(".user-tag .tags .active",e).length).addClass("active").attr("data-tag",t).html("<span>"+t+'</span><a class="remove" href="javascript:;" title="\u5173\u95ed">x</a>').show(),o[t]=1);$(".user-search .a-cancel",e).trigger("click")}),r=!0,s&&s==="team_join_tag_setting"&&Wenda.Log.send("\u3010\u4e50\u5e2e\u56e2\u3011\u3010\u9996\u9875\u3011\u3010\u63a8\u8350\u68461\u3011\u3010\u4fdd\u5b58-\u6309\u94ae\u3011\u70b9\u51fb\u91cf")}).on("click",".mod-set-tag .user-search .a-cancel",function(){var e=$(".mod-set-tag");e.find(".user-tag").show(),e.find(".user-search").hide().find(".tags,.user-search .empty").hide(),e.find(".user-search .a-submit").addClass("a-disabled"),e.find(".js-tag-input").val("");var t=[];$.each(o,function(e){e!="length"&&o[e]==2&&t.push(e)}),$.each(t,function(e,t){delete o[t],o.length--}),i=""}),e}()),$.ObjectH.mix(namespace("Wenda.setCatePanel"),function(){var e={afterSet:function(){return!0}};return $(document).ready(function(){function s(e,n){if(t[n]==undefined){var r=[];n=="0"?e.forEach(function(e){n==e.pid&&r.push('<li class="js-parent-cate" data-cid='+e.cid+" data-name="+e.name+'><a href="javascript:;">'+e.name+"</a></li>")}):e.forEach(function(e){n==e.pid&&r.push('<li><span class="cate-name">'+e.name+'</span><a href="javascript:;" class="js-add-btn add-btn" data-cid='+e.cid+" data-name="+e.name+"></a></li>")}),t[n]=r.join("")}return t[n]}function o(t){e?t&&t():$.ajax({url:"/category/getallcates/",type:"post"}).done(function(n){e=n.data,t&&t()})}function u(t,r){var i=s(e[t],r);r!="0"?(i='<li><span class="cate-name">\u4e0d\u9009</span><a href="javascript:;" data-cid='+r+' data-name="\u4e0d\u9009" class="add-btn js-add-btn"></a></li>'+i,$("#child-cates").html(i),n.length>=3?$(".js-add-btn").removeClass("add-btn").addClass("disabled"):n.forEach(function(e){$(".js-add-btn[data-cid="+e+"]").removeClass("add-btn").addClass("disabled")})):$("#all-cates").html(i)}function a(){$(".js-delete").trigger("click"),n=[]}function f(e,t){e=e=="\u4e0d\u9009"?$(".cur-cate-name").attr("data-name"):e,$("#holdertext").hide(),$("#selected-cates").append('<li class="select-btn">'+e+'<a href="javascript:;" data-cid='+t+' class="delete js-delete">X</a></li>')}function l(){$(".js-parent-cate[data-cid=1]","#all-cates").trigger("click")}function c(e){e.removeClass("add-btn").addClass("disabled")}function h(e){e.removeClass("disabled").addClass("add-btn")}var e=null,t={},n=[],r=null,i='<div class="mod-setcate"><form id="setGoodatForm" action="/user/setgoodat" method="post" onsubmit="return false"><div class="header"><span class="set-icon"></span><span class="text">\u6dfb\u52a0\u64c5\u957f\u5206\u7c7b</span></div><div class="content"><div class="cates"><div class="p-cate"><div class="cur-cate"><span class="cur-cate-name">\u7535\u8111/\u7f51\u7edc</span><a href="javascript:;" class="pull-btn"></a></div><div class="all-cate" style="display:none;"><ul id="all-cates"></ul></div></div><div class="c-cate"><ul id="child-cates"></ul></div></div><div class="arrow"></div><div class="goodat"><div class="title">\u60a8\u8bbe\u7f6e\u7684\u64c5\u957f\u9886\u57df<span class="icon"></span></div><div class="select-cates"><input id="cate_value" type="hidden" name="cids" value=""><p id="holdertext" class="holdertext" style="display:none;">\u8bf7\u5728\u5de6\u4fa7\u6dfb\u52a0\u60a8\u7684\u64c5\u957f\u9886\u57df</p><ul id="selected-cates"></ul><div class="tips">\u60a8\u6700\u591a\u53ef\u6dfb\u52a03\u4e2a\u5206\u7c7b</div></div><div class="sure"><a text="" href="javascript:;" class="sure-btn js-sure-btn"></a></div></div></div></form></div>';$(document.body).delegate(".js-set-goodat","click",function(e){e.preventDefault(),Wenda.User.checkLogin(function(){o(function(){u("1","0"),l()}),$(".panel-set-goodat").length?r.showModal():(r=Wenda.Panel.create({fixed:!0,skin:"panel-set-goodat",content:i,backdropOpacity:.4,footer:"",onready:function(){$(".setcate-btn").length?$(".js-sure-btn").attr("text","\u7f51\u7ad9\u5206\u7c7b\u9875\u8bbe\u7f6e\u64c5\u957f\u9886\u57df\u786e\u5b9a\u70b9\u51fb"):$(".js-sure-btn").attr("text","\u7f51\u7ad9\u9996\u9875\u8bbe\u7f6e\u64c5\u957f\u9886\u57df\u786e\u5b9a\u70b9\u51fb"),$(this.node).delegate(".p-cate","mouseenter",function(e){$(".all-cate").show()}).delegate(".p-cate","mouseleave",function(e){$(".all-cate").hide()})}}),r.onclose=function(){$(".setcate-btn").length?Wenda.Log.send("setCate","\u7f51\u7ad9\u5206\u7c7b\u9875\u8bbe\u7f6e\u64c5\u957f\u9886\u57df\u5173\u95ed\u70b9\u51fb"):Wenda.Log.send("setCate","\u7f51\u7ad9\u9996\u9875\u8bbe\u7f6e\u64c5\u957f\u9886\u57df\u5173\u95ed\u70b9\u51fb"),Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u5206\u7c7b\u6d6e\u5c42-\u5173\u95ed")},r.onshow=function(){a(),$.ajax({url:"/user/getgoodat?time="+(new Date).getTime(),type:"get",success:function(e){$("#holdertext").show(),$.each(e.data,function(e,t){$("#holdertext").hide(),n.push(Number(t.cid)),f(t.name,t.cid)}),l()}})},r.showModal())})}).delegate(".js-parent-cate","click",function(e){e.preventDefault();var t=$(this).attr("data-cid"),n=$(this).attr("data-name");u("2",t),$(".cur-cate-name").text(n),$(".cur-cate-name").attr({"data-cid":t,"data-name":n}),$(".all-cate").hide(),$("#child-cates").scrollTop(0)}).delegate(".js-add-btn","click",function(e){e.preventDefault();if(n.length<3&&!$(this).hasClass("disabled")){var t=$(this).attr("data-cid"),r=$(this).attr("data-name");c($(this)),n.push(Number(t)),f(r,t),n.length>=3&&c($(".js-add-btn"))}}).delegate(".js-delete","click",function(e){var t=$(this).attr("data-cid");$(this).parent("li").remove(),n.remove(Number(t)),n.length<3?(h($(".js-add-btn")),n.forEach(function(e){c($(".js-add-btn[data-cid="+e+"]"))}),n.length==0&&$("#holdertext").show()):h($(".js-add-btn[data-cid="+t+"]"))}).delegate(".js-sure-btn","click",function(e){e.preventDefault(),$("#cate_value").val(n.join(",")),Wenda.Net.connect("sendByForm",$("#setGoodatForm"),function(e){r.close(),e.errno==0?(Wenda.Panel.steam(),Wenda.setCatePanel.afterSet(e)&&($(".setcate-btn").length?setTimeout(function(){location.href="/c/"+$("#cate_value").val().split(",")[0]},1e3):setTimeout(function(){location.reload()},1e3))):Wenda.Panel.steam({msg:e.errmsg}),Wenda.Log.sendClose(!1,"\u6d6e\u5c42\u7c7b-\u5206\u7c7b\u6d6e\u5c42-\u8bbe\u7f6e\u6210\u529f")})})}),e}());